/*! For license information please see main.7a8a995b.js.LICENSE.txt */
(()=>{"use strict";var e={730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),x=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var A=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var R,F=Object.assign;function U(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case C:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,ke=null;function Ce(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Se?ke?ke.push(e):ke=[e]:Se=e}function xe(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Le(){}var Pe=!1;function De(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==Se||null!==ke)&&(Le(),xe())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ae=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Ae=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){Ae=!1}function Oe(e,t,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Re=!1,Fe=null,Ue=!1,Ve=null,ze={onError:function(e){Re=!0,Fe=e}};function Be(e,t,n,r,i,o,s,a,l){Re=!1,Fe=null,Oe.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(je(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,kt,Ct,It=!1,xt=[],Tt=null,Lt=null,Pt=null,Dt=new Map,Mt=new Map,At=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Rt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){It=!1,null!==Tt&&Ut(Tt)&&(Tt=null),null!==Lt&&Ut(Lt)&&(Lt=null),null!==Pt&&Ut(Pt)&&(Pt=null),Dt.forEach(Vt),Mt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Bt(t,e)}if(0<xt.length){Bt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Lt&&Bt(Lt,e),null!==Pt&&Bt(Pt,e),Dt.forEach(t),Mt.forEach(t),n=0;n<At.length;n++)(r=At[n]).blockedOn===e&&(r.blockedOn=null);for(;0<At.length&&null===(n=At[0]).blockedOn;)Ft(n),null===n.blockedOn&&At.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=o}}function Gt(e,t,n,r){var i=wt,o=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=o}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Rt(Tt,e,t,n,r,i),!0;case"dragenter":return Lt=Rt(Lt,e,t,n,r,i),!0;case"mouseover":return Pt=Rt(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dt.set(o,Rt(Dt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Mt.set(o,Rt(Mt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var o=wi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=F({},un,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(F({},fn,{dataTransfer:0})),mn=on(F({},hn,{relatedTarget:0})),vn=on(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(yn),bn=on(F({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var In=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=on(In),Tn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=on(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Dn),An=[9,13,27,32],Nn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Rn=c&&"TextEvent"in window&&!On,Fn=c&&(!Nn||On&&8<On&&11>=On),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==An.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(c){var Jn;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,_e(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var s=cr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},kr={};function Cr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Ir=Cr("animationend"),xr=Cr("animationiteration"),Tr=Cr("animationstart"),Lr=Cr("transitionend"),Pr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Pr.set(e,t),l(t,[e])}for(var Ar=0;Ar<Dr.length;Ar++){var Nr=Dr[Ar];Mr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Mr(Ir,"onAnimationEnd"),Mr(xr,"onAnimationIteration"),Mr(Tr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Lr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,u){if(Be.apply(this,arguments),Re){if(!Re)throw Error(o(198));var c=Fe;Re=!1,Fe=null,Ue||(Ue=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,a,u),o=l}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Ae||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}De((function(){var r=o,i=_e(n),s=[];e:{var a=Pr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case Ir:case xr:case Tr:l=vn;break;case Lr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Me(p,d))&&c.push(Kr(p,g,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Hr(f))p++;for(f=0,g=d;g;g=Hr(g))f++;for(;0<p-f;)c=Hr(c),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hr(c),d=Hr(d)}c=null}else c=null;null!==l&&Qr(s,a,l,c,!1),null!==u&&null!==h&&Qr(s,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Wn(a))if($n)m=sr;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Kn(s,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(y=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,jn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),s.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Nn&&zn(e,t)?(e=en(),Zt=Jt=$t=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Me(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=Me(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Me(n,o))&&s.unshift(Kr(n,l,a)):i||null!=(l=Me(n,o))&&s.push(Kr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function ki(e){return{current:e}}function Ci(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ii(e,t){Si++,Ei[Si]=e.current,e.current=t}var xi={},Ti=ki(xi),Li=ki(!1),Pi=xi;function Di(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ai(){Ci(Li),Ci(Ti)}function Ni(e,t,n){if(Ti.current!==xi)throw Error(o(168));Ii(Ti,t),Ii(Li,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return F({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Pi=Ti.current,Ii(Ti,e),Ii(Li,Li.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Oi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Li),Ci(Ti),Ii(Ti,e)):Ci(Li),Ii(Li,n)}var Ui=null,Vi=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!zi&&null!==Ui){zi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,ji),i}finally{wt=t,zi=!1}}return null}var qi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Wi++]=Gi,qi[Wi++]=Ki,Ki=e,Gi=t}function Zi(e,t,n){Hi[Qi++]=Xi,Hi[Qi++]=$i,Hi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Xi=1<<32-st(t)+i|n<<i|r,$i=o+e}else Xi=1<<o|n<<i|r,$i=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Gi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ui(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=b.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=ki(null),wo=null,bo=null,_o=null;function Eo(){_o=bo=wo=null}function So(e){var t=yo.current;Ci(yo),e._currentValue=t}function ko(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Co(e,t){wo=e,_o=bo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===bo){if(null===wo)throw Error(o(308));bo=e,wo.dependencies={lanes:0,firstContext:e}}else bo=bo.next=e;return t}var xo=null;function To(e){null===xo?xo=[e]:xo.push(e)}function Lo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,To(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ll)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,To(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Ro(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Fo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,c=u=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=h}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var zo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var jo={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=No(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Oo(e,o,i))&&(ru(t,e,i,r),Ro(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=No(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Oo(e,o,i))&&(ru(t,e,i,r),Ro(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=No(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oo(e,i,r))&&(ru(t,e,r,n),Ro(t,e,r))}};function qo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Wo(e,t,n){var r=!1,i=xi,o=t.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Mi(t)?Pi:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):xi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=zo,Mo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Mi(t)?Pi:Ti.current,i.context=Di(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&jo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===zo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Ou(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case E:return(t=Vu(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ru(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case M:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function g(i,o,a,l){for(var u=null,c=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),io&&Ji(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(o=s(h,o,g),null===c?u=h:c.sibling=h,c=h);return io&&Ji(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,g),u}function m(i,a,l,u){var c=O(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var w=f(i,g,y.value,u);if(null===w){null===g&&(g=v);break}e&&g&&null===w.alternate&&t(i,g),a=s(w,a,m),null===h?c=w:h.sibling=w,h=w,g=v}if(y.done)return n(i,g),io&&Ji(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(a=s(y,a,m),null===h?c=y:h.sibling=y,h=y);return io&&Ji(i,m),c}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?c=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),io&&Ji(i,m),c}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===S){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&Yo(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=Ho(r,c,s),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===S?((o=Ru(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Ou(s.type,s.key,s.props,null,r.mode,l)).ref=Ho(r,o,s),l.return=r,r=l)}return a(r);case E:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Vu(s,r.mode,l)).return=r,r=o}return a(r);case M:return e(r,o,(c=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(O(s))return m(r,o,s,l);Qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Uu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var $o=Xo(!0),Jo=Xo(!1),Zo={},es=ki(Zo),ts=ki(Zo),ns=ki(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(Ii(ns,t),Ii(ts,e),Ii(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(es),Ii(es,t)}function os(){Ci(es),Ci(ts),Ci(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ii(ts,e),Ii(es,n))}function as(e){ts.current===e&&(Ci(es),Ci(ts))}var ls=ki(0);function us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cs=[];function hs(){for(var e=0;e<cs.length;e++)cs[e]._workInProgressVersionPrimary=null;cs.length=0}var ds=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,ys=!1,ws=!1,bs=0,_s=0;function Es(){throw Error(o(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ks(e,t,n,r,i,s){if(ps=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),ws){s=0;do{if(ws=!1,bs=0,25<=s)throw Error(o(301));s+=1,vs=ms=null,t.updateQueue=null,ds.current=ua,e=n(r,i)}while(ws)}if(ds.current=sa,t=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,ys=!1,t)throw Error(o(300));return e}function Cs(){var e=0!==bs;return bs=0,e}function Is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function xs(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ms=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function Ts(e,t){return"function"===typeof t?t(e):t}function Ls(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var h=c.lane;if((ps&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,gs.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,gs.lanes|=s,Fl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ps(e){var t=xs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ds(){}function Ms(e,t){var n=gs,r=xs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,Ws(Os.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Vs(9,Ns.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&ps)||As(n,t,i)}return i}function As(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ns(e,t,n,r){t.value=n,t.getSnapshot=r,Rs(t)&&Fs(e)}function Os(e,t,n){return n((function(){Rs(t)&&Fs(e)}))}function Rs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fs(e){var t=Po(e,1);null!==t&&ru(t,e,1,-1)}function Us(e){var t=Is();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,gs,e),[t.memoizedState,e]}function Vs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zs(){return xs().memoizedState}function Bs(e,t,n,r){var i=Is();gs.flags|=e,i.memoizedState=Vs(1|t,n,void 0,void 0===r?null:r)}function js(e,t,n,r){var i=xs();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&Ss(r,s.deps))return void(i.memoizedState=Vs(t,n,o,r))}gs.flags|=e,i.memoizedState=Vs(1|t,n,o,r)}function qs(e,t){return Bs(8390656,8,e,t)}function Ws(e,t){return js(2048,8,e,t)}function Ks(e,t){return js(4,2,e,t)}function Gs(e,t){return js(4,4,e,t)}function Hs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,js(4,4,Hs.bind(null,t,e),n)}function Ys(){}function Xs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $s(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),gs.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zs(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{wt=n,fs.transition=r}}function ea(){return xs().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Lo(e,t,n,r))){ru(n,e,r,tu()),oa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,To(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Lo(e,t,i,r))&&(ru(n,e,r,i=tu()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function ia(e,t){ws=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Io,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},aa={readContext:Io,useCallback:function(e,t){return Is().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Hs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=Is();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Is();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Is().memoizedState=e},useState:Us,useDebugValue:Ys,useDeferredValue:function(e){return Is().memoizedState=e},useTransition:function(){var e=Us(!1),t=e[0];return e=Zs.bind(null,e[1]),Is().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gs,i=Is();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pl)throw Error(o(349));0!==(30&ps)||As(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Os.bind(null,r,s,e),[e]),r.flags|=2048,Vs(9,Ns.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Is(),t=Pl.identifierPrefix;if(io){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-st(Xi)-1)).toString(32)+n),0<(n=bs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Io,useCallback:Xs,useContext:Io,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ks,useLayoutEffect:Gs,useMemo:$s,useReducer:Ls,useRef:zs,useState:function(){return Ls(Ts)},useDebugValue:Ys,useDeferredValue:function(e){return Js(xs(),ms.memoizedState,e)},useTransition:function(){return[Ls(Ts)[0],xs().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ms,useId:ea,unstable_isNewReconciler:!1},ua={readContext:Io,useCallback:Xs,useContext:Io,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Ks,useLayoutEffect:Gs,useMemo:$s,useReducer:Ps,useRef:zs,useState:function(){return Ps(Ts)},useDebugValue:Ys,useDeferredValue:function(e){var t=xs();return null===ms?t.memoizedState=e:Js(t,ms.memoizedState,e)},useTransition:function(){return[Ps(Ts)[0],xs().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ms,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=No(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),da(0,t)},n}function ga(e,t,n){(n=No(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Iu.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=No(-1,1)).tag=2,Oo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Jo(t,null,n,r):$o(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var o=t.ref;return Co(t,i),r=ks(e,t,n,r,o,i),n=Cs(),null===e||ba?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Au(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ka(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Nu(o,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Nl,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Nl,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ii(Nl,Al),Al|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ii(Nl,Al),Al|=r;return _a(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var o=Mi(n)?Pi:Ti.current;return o=Di(t,o),Co(t,i),n=ks(e,t,n,r,o,i),r=Cs(),null===e||ba?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ta(e,t,n,r,i){if(Mi(n)){var o=!0;Ri(t)}else o=!1;if(Co(t,i),null===t.stateNode)Wa(e,t),Wo(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=Io(u):u=Di(t,u=Mi(n)?Pi:Ti.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&Ko(t,s,r,u),Do=!1;var d=t.memoizedState;s.state=d,Uo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Li.current||Do?("function"===typeof c&&(Bo(t,n,c,r),l=t.memoizedState),(a=Do||qo(t,n,a,r,d,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ao(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vo(t.type,a),s.props=u,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Io(l):l=Di(t,l=Mi(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Ko(t,s,r,l),Do=!1,d=t.memoizedState,s.state=d,Uo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Li.current||Do?("function"===typeof f&&(Bo(t,n,f,r),p=t.memoizedState),(u=Do||qo(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return La(e,t,n,r,o,i)}function La(e,t,n,r,i,o){Ia(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Fi(t,n,!1),Ka(e,t,o);r=t.stateNode,wa.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=$o(t,e.child,null,o),t.child=$o(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),is(e,t.containerInfo)}function Da(e,t,n,r,i){return po(),go(i),t.flags|=256,_a(e,t,n,r),t.child}var Ma,Aa,Na,Oa,Ra={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ii(ls,1&s),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fu(l,i,0,null),e=Ru(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ra,e):Va(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(s=Ru(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&$o(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ra,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Po(e,i),ru(r,e,i,-1))}return mu(),za(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Hi[Qi++]=Xi,Hi[Qi++]=$i,Hi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Nu(r,a):(a=Ru(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Nu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&go(r),$o(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ko(e.return,t,n)}function ja(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,o);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Mi(t.type)&&Ai(),Ha(t),null;case 3:return r=t.stateNode,os(),Ci(Li),Ci(Ti),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(au(oo),oo=null))),Aa(e,t),Ha(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ha(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,s),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Vr("invalid",r);break;case"textarea":ie(r,s),Vr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ma(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(s in ye(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?me(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Vr("scroll",e):null!=c&&w(e,s,c,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ci(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else null!==oo&&(au(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ol&&(Ol=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return os(),Aa(e,t),null===e&&jr(t.stateNode.containerInfo),Ha(t),null;case 10:return So(t.type._context),Ha(t),null;case 19:if(Ci(ls),null===(s=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ga(s,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=us(e))){for(t.flags|=128,Ga(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>ql&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=us(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ha(t),null}else 2*$e()-s.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=ls.current,Ii(ls,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Mi(t.type)&&Ai(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ci(Li),Ci(Ti),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ci(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ls),null;case 4:return os(),null;case 10:return So(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Ma=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Aa=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Vr("scroll",e),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(r=$a)||null!==n.memoizedState,fl(e,t,n),$a=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));pl(s,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Cu(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Cu(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Cu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&$(i,s),we(l,a);var c=we(l,s);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Cu(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Cu(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){Cu(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=$e())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(c=$a)||h,ml(t,e),$a=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cu(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Za=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",a))}catch(m){Cu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Cu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ul(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Cu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Xa;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Xa;var u=$a;if(Xa=s,($a=l)&&!u)for(Za=i;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Za=l):Sl(i);for(;null!==o;)Za=o,bl(o,t,n),o=o.sibling;Za=i,Xa=a,$a=u}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$a)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Vo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(o(163))}$a||512&t.flags&&ol(t)}catch(f){Cu(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Sl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Cu(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Cu(t,s,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var kl,Cl=Math.ceil,Il=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Ll=0,Pl=null,Dl=null,Ml=0,Al=0,Nl=ki(0),Ol=0,Rl=null,Fl=0,Ul=0,Vl=0,zl=null,Bl=null,jl=0,ql=1/0,Wl=null,Kl=!1,Gl=null,Hl=null,Ql=!1,Yl=null,Xl=0,$l=0,Jl=null,Zl=-1,eu=0;function tu(){return 0!==(6&Ll)?$e():-1!==Zl?Zl:Zl=$e()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Ll)&&0!==Ml?Ml&-Ml:null!==mo.transition?(0===eu&&(eu=gt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ru(e,t,n,r){if(50<$l)throw $l=0,Jl=null,Error(o(185));vt(e,n,r),0!==(2&Ll)&&e===Pl||(e===Pl&&(0===(2&Ll)&&(Ul|=n),4===Ol&&lu(e,Ml)),iu(e,r),1===n&&0===Ll&&0===(1&t.mode)&&(ql=$e()+500,Vi&&ji()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Pl?Ml:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),si((function(){0===(6&Ll)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pu(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if(Zl=-1,eu=0,0!==(6&Ll))throw Error(o(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Ll;Ll|=2;var s=gu();for(Pl===e&&Ml===t||(Wl=null,ql=$e()+500,fu(e,t));;)try{wu();break}catch(l){pu(e,l)}Eo(),Il.current=s,Ll=i,null!==Dl?t=0:(Pl=null,Ml=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=su(e,i))),1===t)throw n=Rl,fu(e,0),lu(e,r),iu(e,$e()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(s=pt(e))&&(r=s,t=su(e,s))),1===t))throw n=Rl,fu(e,0),lu(e,r),iu(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Eu(e,Bl,Wl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=jl+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Eu.bind(null,e,Bl,Wl),t);break}Eu(e,Bl,Wl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(Eu.bind(null,e,Bl,Wl),r);break}Eu(e,Bl,Wl);break;default:throw Error(o(329))}}}return iu(e,$e()),e.callbackNode===n?ou.bind(null,e):null}function su(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Bl,Bl=n,null!==t&&au(t)),e}function au(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Ll))throw Error(o(327));Su();var t=dt(e,0);if(0===(1&t))return iu(e,$e()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Rl,fu(e,0),lu(e,t),iu(e,$e()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,Bl,Wl),iu(e,$e()),null}function cu(e,t){var n=Ll;Ll|=1;try{return e(t)}finally{0===(Ll=n)&&(ql=$e()+500,Vi&&ji())}}function hu(e){null!==Yl&&0===Yl.tag&&0===(6&Ll)&&Su();var t=Ll;Ll|=1;var n=Tl.transition,r=wt;try{if(Tl.transition=null,wt=1,e)return e()}finally{wt=r,Tl.transition=n,0===(6&(Ll=t))&&ji()}}function du(){Al=Nl.current,Ci(Nl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ai();break;case 3:os(),Ci(Li),Ci(Ti),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ci(ls);break;case 10:So(r.type._context);break;case 22:case 23:du()}n=n.return}if(Pl=e,Dl=e=Nu(e.current,null),Ml=Al=t,Ol=0,Rl=null,Vl=Ul=Fl=0,Bl=zl=null,null!==xo){for(t=0;t<xo.length;t++)if(null!==(r=(n=xo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}xo=null}return e}function pu(e,t){for(;;){var n=Dl;try{if(Eo(),ds.current=sa,ys){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=ms=gs=null,ws=!1,bs=0,xl.current=null,null===n||null===n.return){Ol=1,Rl=t,Dl=null;break}e:{var s=e,a=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(s,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ma(s,c,t),mu();break e}u=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),go(ca(u,l));break e}}s=u=ca(u,l),4!==Ol&&(Ol=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,pa(0,u,t));break e;case 1:l=u;var y=s.type,w=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){s.flags|=65536,t&=-t,s.lanes|=t,Fo(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}_u(n)}catch(b){t=b,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gu(){var e=Il.current;return Il.current=sa,null===e?sa:e}function mu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Ul)||lu(Pl,Ml)}function vu(e,t){var n=Ll;Ll|=2;var r=gu();for(Pl===e&&Ml===t||(Wl=null,fu(e,t));;)try{yu();break}catch(i){pu(e,i)}if(Eo(),Ll=n,Il.current=r,null!==Dl)throw Error(o(261));return Pl=null,Ml=0,Ol}function yu(){for(;null!==Dl;)bu(Dl)}function wu(){for(;null!==Dl&&!Ye();)bu(Dl)}function bu(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?_u(e):Dl=t,xl.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Al)))return void(Dl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Ol=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Ol&&(Ol=5)}function Eu(e,t,n){var r=wt,i=Tl.transition;try{Tl.transition=null,wt=1,function(e,t,n,r){do{Su()}while(null!==Yl);if(0!==(6&Ll))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Pl&&(Dl=Pl=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Pu(tt,(function(){return Su(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Tl.transition,Tl.transition=null;var a=wt;wt=1;var l=Ll;Ll|=4,xl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===s&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:vo(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(_){Cu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Xe(),Ll=l,wt=a,Tl.transition=s}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=i),s=e.pendingLanes,0===s&&(Hl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&Su(),s=e.pendingLanes,0!==(1&s)?e===Jl?$l++:($l=0,Jl=e):$l=0,ji()}(e,t,n,r)}finally{Tl.transition=i,wt=r}return null}function Su(){if(null!==Yl){var e=bt(Xl),t=Tl.transition,n=wt;try{if(Tl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Ll))throw Error(o(331));var i=Ll;for(Ll|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Za=c;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(sl(h),h===c){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Za=y;break e}Za=s.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Cu(l,l.return,E)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Ll=i,ji(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Tl.transition=t}}return!1}function ku(e,t,n){e=Oo(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function Cu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Oo(t,e=ga(t,e=ca(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Ml&n)===n&&(4===Ol||3===Ol&&(130023424&Ml)===Ml&&500>$e()-jl?fu(e,0):Vl|=n),iu(e,t)}function xu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Po(e,t))&&(vt(e,t,n),iu(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xu(e,n)}function Lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),xu(e,n)}function Pu(e,t){return He(e,t)}function Du(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Du(e,t,n,r)}function Au(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Au(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ru(n.children,i,s,t);case k:a=8,i|=8;break;case C:return(e=Mu(12,n,t,2|i)).elementType=C,e.lanes=s,e;case L:return(e=Mu(13,n,t,i)).elementType=L,e.lanes=s,e;case P:return(e=Mu(19,n,t,i)).elementType=P,e.lanes=s,e;case A:return Fu(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case x:a=9;break e;case T:a=11;break e;case D:a=14;break e;case M:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mu(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ru(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=A,e.lanes=n,e.stateNode={isHidden:!1},e}function Uu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Vu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,o,s,a,l){return e=new zu(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function ju(e){if(!e)return xi;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Oi(e,n,t)}return t}function qu(e,t,n,r,i,o,s,a,l){return(e=Bu(n,r,!0,e,0,o,0,a,l)).context=ju(null),n=e.current,(o=No(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Oo(n,o,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function Wu(e,t,n,r){var i=t.current,o=tu(),s=nu(i);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=No(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oo(i,t,s))&&(ru(e,i,s,o),Ro(e,i,s)),s}function Ku(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Li.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),po();break;case 5:ss(t);break;case 1:Mi(t.type)&&Ri(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ii(ls,1&ls.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ii(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Di(t,Ti.current);Co(t,n),i=ks(null,t,r,e,i,n);var s=Cs();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(s=!0,Ri(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Mo(t),i.updater=jo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=La(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Au(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===D)return 14}return 2}(r),e=vo(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ao(e,t),Uo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Da(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ka(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&uo(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ia(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Ua(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$o(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ii(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Li.current){t=Ka(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=No(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),ko(s.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ko(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Co(t,n),r=r(i=Io(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Sa(e,t,r,i=vo(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Wa(e,t),t.tag=1,Mi(r)?(e=!0,Ri(t)):e=!1,Co(t,n),Wo(t,r,i),Go(t,r,i,n),La(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ca(e,t,n)}throw Error(o(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Ku(s);a.call(e)}}Wu(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Ku(s);o.call(e)}}var s=qu(t,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=s,e[pi]=s.current,jr(8===e.nodeType?e.parentNode:e),hu(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Ku(l);a.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),hu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return Ku(s)}Xu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wu(e,t,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Wu(null,e,null,null)})),t[pi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<At.length&&0!==t&&t<At[n].priority;n++);At.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,$e()),0===(6&Ll)&&(ql=$e()+500,ji()))}break;case 13:hu((function(){var t=Po(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Hu(e,1)}},Et=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)ru(t,e,134217728,tu());Hu(e,134217728)}},St=function(e){if(13===e.tag){var t=nu(e),n=Po(e,t);if(null!==n)ru(n,e,t,tu());Hu(e,t)}},kt=function(){return wt},Ct=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));H(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cu,Le=hu;var tc={usingClientEntryPoint:!1,Events:[wi,bi,_i,Ie,xe,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),ot=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(o(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(o(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(o(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(o(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:a.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,i)&&!k.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+T(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),L(s,t,i,"",(function(e){return e}))):null!=s&&(I(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(x,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var u=0;u<e.length;u++){var c=o+T(a=e[u],u);l+=L(a,t,i,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=L(a=a.value,t,i,c=o+T(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},A={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:A,ReactCurrentOwner:S};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=w,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=A.transition;A.transition={};try{e()}finally{A.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(m=!1,b(e),!g)if(null!==r(u))g=!0,A(E);else{var t=r(c);null!==t&&N(_,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,y(I),I=-1),p=!0;var o=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!L());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&N(_,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,I=-1,x=5,T=-1;function L(){return!(t.unstable_now()-T<x)}function P(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"===typeof w)S=function(){w(P)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,M=D.port2;D.port1.onmessage=P,S=function(){M.postMessage(null)}}else S=function(){v(P,0)};function A(e){C=e,k||(k=!0,S())}function N(e,n){I=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,A(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(m?(y(I),I=-1):m=!0,N(_,o-s))):(e.sortIndex=a,n(u,e),g||p||(g=!0,A(E))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)},895:(e,t,n)=>{var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useSyncExternalStore,s=r.useRef,a=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,o=e,e=r(e),void 0!==c&&d.hasValue){var t=d.value;if(c(t,e))return s=t}return s=e}if(t=s,i(o,e))return t;var n=r(e);return void 0!==c&&c(t,n)?t:(o=e,s=n)}var o,s,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,c]);var f=o(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},237:(e,t,n)=>{e.exports=n(895)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>ko,SDK_VERSION:()=>xs,_DEFAULT_ENTRY_NAME:()=>gs,_addComponent:()=>ws,_addOrOverwriteComponent:()=>bs,_apps:()=>vs,_clearComponents:()=>ks,_components:()=>ys,_getProvider:()=>Es,_registerComponent:()=>_s,_removeServiceInstance:()=>Ss,deleteApp:()=>Ds,getApp:()=>Ls,getApps:()=>Ps,initializeApp:()=>Ts,onLog:()=>As,registerVersion:()=>Ms,setLogLevel:()=>Ns});var t,r=n(43),i=n.t(r,2),o=n(391),s=n(950),a=n.t(s,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const u="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,a=o.history,h=t.Pop,g=null,m=v();function v(){return(a.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-m;m=e,g&&g({action:h,location:b.location,delta:n})}function w(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(l({},a.state,{idx:m}),""));let b={get action(){return h},get location(){return e(o,a)},listen(e){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(u,y),g=e,()=>{o.removeEventListener(u,y),g=null}},createHref:e=>n(o,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),m=v()+1;let l=d(i,m),u=b.createHref(i);try{a.pushState(l,"",u)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(u)}s&&g&&g({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),m=v();let o=d(i,m),l=b.createHref(i);a.replaceState(o,"",l),s&&g&&g({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=M(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=D(r);o=L(i[s],e)}return o}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=F([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=b(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,E=3,S=2,k=1,C=10,I=-2,x=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=I),t&&(r+=S),n.filter((e=>!x(e))).reduce(((e,t)=>e+(_.test(t)?E:""===t?k:C)),r)}function L(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;o.push({params:r,pathname:F([i,u.pathname]),pathnameBase:U(F([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=F([i,u.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function A(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=N(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function R(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),c(!i.pathname||!i.pathname.includes("?"),A("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),A("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),A("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(r),hash:z(i)}}(i,o),h=a&&"/"!==a&&a.endsWith("/"),d=(s||"."===a)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const F=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const j=["post","put","patch","delete"],q=(new Set(j),["get",...j]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=r.createContext(null);const G=r.createContext(null);const H=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function $(){return null!=r.useContext(Q)}function J(){return $()||c(!1),r.useContext(Q).location}function Z(e){r.useContext(H).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ce(le.UseNavigateStable),t=de(ue.UseNavigateStable),n=r.useRef(!1);Z((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return i}():function(){$()||c(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext(H),{matches:o}=r.useContext(Y),{pathname:s}=J(),a=JSON.stringify(O(o,n.v7_relativeSplatPath)),l=r.useRef(!1);return Z((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let o=R(n,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:F([t,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[t,i,a,s,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(H),{matches:o}=r.useContext(Y),{pathname:s}=J(),a=JSON.stringify(O(o,i.v7_relativeSplatPath));return r.useMemo((()=>R(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function ne(e,n,i,o){$()||c(!1);let{navigator:s}=r.useContext(H),{matches:a}=r.useContext(Y),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=J();if(n){var p;let e="string"===typeof n?g(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||c(!1),d=e}else d=f;let m=d.pathname||"/",v=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=ae(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:F([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:F([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return n&&b?r.createElement(Q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function re(){let e=function(){var e;let t=r.useContext(X),n=he(ue.UseRouteError),i=de(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,null)}const ie=r.createElement(re,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(K);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function ae(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(null==(s=n)||!s.errors)return null;e=n.matches}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,c=!1,d=null,f=null;var p;n&&(s=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ie,u&&(h<0&&0===o?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):h===o&&(c=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,o+1)),m=()=>{let t;return t=s?d:c?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(se,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:d,error:s,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function ce(e){let t=r.useContext(K);return t||c(!1),t}function he(e){let t=r.useContext(G);return t||c(!1),t}function de(e){let t=function(e){let t=r.useContext(Y);return t||c(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const fe={};i.startTransition;function pe(e){c(!1)}function ge(e){let{basename:n="/",children:i=null,location:o,navigationType:s=t.Pop,navigator:a,static:l=!1,future:u}=e;$()&&c(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},u)})),[h,u,a,l]);"string"===typeof o&&(o=g(o));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=o,w=r.useMemo((()=>{let e=M(f,h);return null==e?null:{location:{pathname:e,search:p,hash:m,state:v,key:y},navigationType:s}}),[h,f,p,m,v,y,s]);return null==w?null:r.createElement(H.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:w}))}function me(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,o));e.type!==pe&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=ve(e.props.children,o)),n.push(s)})),n}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch($I){}new Map;const _e=i.startTransition;a.flushSync,i.useId;function Ee(e){let{basename:t,children:n,future:i,window:o}=e,s=r.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=s.current,[u,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=r.useCallback((e=>{h&&_e?_e((()=>c(e))):c(e)}),[c,h]);return r.useLayoutEffect((()=>l.listen(d)),[l,d]),r.createElement(ge,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:i})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=r.forwardRef((function(e,t){let n,{onClick:i,relative:o,reloadDocument:s,replace:a,state:l,target:u,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,g=we(e,be),{basename:m}=r.useContext(H),v=!1;if("string"===typeof h&&ke.test(h)&&(n=h,Se))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=M(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch($I){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||c(!1);let{basename:i,navigator:o}=r.useContext(H),{hash:s,pathname:a,search:l}=te(e,{relative:n}),u=a;return"/"!==i&&(u="/"===a?i:F([i,a])),o.createHref({pathname:u,search:l,hash:s})}(h,{relative:o}),w=function(e,t){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=ee(),c=J(),h=te(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(c)===p(h);u(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[c,u,h,i,o,n,e,s,a,l])}(h,{replace:a,state:l,target:u,preventScrollReset:d,relative:o,unstable_viewTransition:f});return r.createElement("a",ye({},g,{href:n||y,onClick:v||s?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:u}))}));var Ie,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));var Te=n(237),Le=r,Pe=Symbol.for("react-redux-context"),De="undefined"!==typeof globalThis?globalThis:{};function Me(){var e;if(!Le.createContext)return{};const t=null!==(e=De[Pe])&&void 0!==e?e:De[Pe]=new Map;let n=t.get(Le.createContext);return n||(n=Le.createContext(null),t.set(Le.createContext,n)),n}var Ae=Me(),Ne=()=>{throw new Error("uSES not initialized!")};function Oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;return function(){return Le.useContext(e)}}var Re=Oe(),Fe=Ne,Ue=(e,t)=>e===t;function Ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;const t=e===Ae?Re:Oe(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=Ue,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:o,subscription:s,getServerState:a,stabilityCheck:l,identityFunctionCheck:u}=t(),c=(Le.useRef(!0),Le.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),h=Fe(s.addNestedSub,o.getState,a||o.getState,c,r);return Le.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var ze=Ve();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function Be(e){e()}var je={notify(){},get:()=>[]};function qe(e,t){let n,r=je,i=0,o=!1;function s(){u.onStateChange&&u.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(s):e.subscribe(s),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Be((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=je)}const u={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:s,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,a())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return u}var We=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?Le.useLayoutEffect:Le.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Ke=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:o="once",identityFunctionCheck:s="once"}=e;const a=Le.useMemo((()=>{const e=qe(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,identityFunctionCheck:s}}),[t,i,o,s]),l=Le.useMemo((()=>t.getState()),[t]);We((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const u=n||Ae;return Le.createElement(u.Provider,{value:a},r)};function Ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;const t=e===Ae?Re:Oe(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var He=Ge();function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ae;const t=e===Ae?He:Ge(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Ye,Xe=Qe();Ye=Te.useSyncExternalStoreWithSelector,Fe=Ye,(e=>{e})(r.useSyncExternalStore);const $e=()=>Xe(),Je=ze;var Ze=Symbol.for("immer-nothing"),et=Symbol.for("immer-draftable"),tt=Symbol.for("immer-state");function nt(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var rt=Object.getPrototypeOf;function it(e){return!!e&&!!e[tt]}function ot(e){var t;return!!e&&(at(e)||Array.isArray(e)||!!e[et]||!(null===(t=e.constructor)||void 0===t||!t[et])||dt(e)||ft(e))}var st=Object.prototype.constructor.toString();function at(e){if(!e||"object"!==typeof e)return!1;const t=rt(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===st}function lt(e,t){0===ut(e)?Object.entries(e).forEach((n=>{let[r,i]=n;t(r,i,e)})):e.forEach(((n,r)=>t(r,n,e)))}function ut(e){const t=e[tt];return t?t.type_:Array.isArray(e)?1:dt(e)?2:ft(e)?3:0}function ct(e,t){return 2===ut(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t,n){const r=ut(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function dt(e){return e instanceof Map}function ft(e){return e instanceof Set}function pt(e){return e.copy_||e.base_}function gt(e,t){if(dt(e))return new Map(e);if(ft(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&at(e)){if(!rt(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[tt];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],o=n[t];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[t]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[t]})}return Object.create(rt(e),n)}function mt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yt(e)||it(e)||!ot(e)||(ut(e)>1&&(e.set=e.add=e.clear=e.delete=vt),Object.freeze(e),t&&lt(e,((e,t)=>mt(t,!0)))),e}function vt(){nt(2)}function yt(e){return Object.isFrozen(e)}var wt,bt={};function _t(e){const t=bt[e];return t||nt(0),t}function Et(){return wt}function St(e,t){t&&(_t("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function kt(e){Ct(e),e.drafts_.forEach(xt),e.drafts_=null}function Ct(e){e===wt&&(wt=e.parent_)}function It(e){return wt={drafts_:[],parent_:wt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xt(e){const t=e[tt];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Tt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[tt].modified_&&(kt(t),nt(4)),ot(e)&&(e=Lt(t,e),t.parent_||Dt(t,e)),t.patches_&&_t("Patches").generateReplacementPatches_(n[tt].base_,e,t.patches_,t.inversePatches_)):e=Lt(t,n,[]),kt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ze?e:void 0}function Lt(e,t,n){if(yt(t))return t;const r=t[tt];if(!r)return lt(t,((i,o)=>Pt(e,r,t,i,o,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Dt(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),lt(i,((i,s)=>Pt(e,r,t,i,s,n,o))),Dt(e,t,!1),n&&e.patches_&&_t("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Pt(e,t,n,r,i,o,s){if(it(i)){const s=Lt(e,i,o&&t&&3!==t.type_&&!ct(t.assigned_,r)?o.concat(r):void 0);if(ht(n,r,s),!it(s))return;e.canAutoFreeze_=!1}else s&&n.add(i);if(ot(i)&&!yt(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Lt(e,i),t&&t.scope_.parent_||Dt(e,i)}}function Dt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mt(t,n)}var Mt={get(e,t){if(t===tt)return e;const n=pt(e);if(!ct(n,t))return function(e,t,n){var r;const i=Ot(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!ot(r)?r:r===Nt(e.base_,t)?(Ft(e),e.copy_[t]=Ut(r,e)):r},has:(e,t)=>t in pt(e),ownKeys:e=>Reflect.ownKeys(pt(e)),set(e,t,n){const r=Ot(pt(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Nt(pt(e),t),i=null===r||void 0===r?void 0:r[tt];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||ct(e.base_,t)))return!0;Ft(e),Rt(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Nt(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ft(e),Rt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=pt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){nt(11)},getPrototypeOf:e=>rt(e.base_),setPrototypeOf(){nt(12)}},At={};function Nt(e,t){const n=e[tt];return(n?pt(n):e)[t]}function Ot(e,t){if(!(t in e))return;let n=rt(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=rt(n)}}function Rt(e){e.modified_||(e.modified_=!0,e.parent_&&Rt(e.parent_))}function Ft(e){e.copy_||(e.copy_=gt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}lt(Mt,((e,t)=>{At[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),At.deleteProperty=function(e,t){return At.set.call(this,e,t,void 0)},At.set=function(e,t,n){return Mt.set.call(this,e[0],t,n,e[0])};function Ut(e,t){const n=dt(e)?_t("MapSet").proxyMap_(e,t):ft(e)?_t("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Et(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Mt;n&&(i=[r],o=At);const{revoke:s,proxy:a}=Proxy.revocable(i,o);return r.draft_=a,r.revoke_=s,a}(e,t);return(t?t.scope_:Et()).drafts_.push(n),n}function Vt(e){return it(e)||nt(10),zt(e)}function zt(e){if(!ot(e)||yt(e))return e;const t=e[tt];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=gt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=gt(e,!0);return lt(n,((e,t)=>{ht(n,e,zt(t))})),t&&(t.finalized_=!1),n}var Bt=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return r.produce(e,(e=>t.call(this,e,...o)))}}let r;if("function"!==typeof t&&nt(6),void 0!==n&&"function"!==typeof n&&nt(7),ot(e)){const i=It(this),o=Ut(e,void 0);let s=!0;try{r=t(o),s=!1}finally{s?kt(i):Ct(i)}return St(i,n),Tt(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Ze&&(r=void 0),this.autoFreeze_&&mt(r,!0),n){const t=[],i=[];_t("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}nt(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const o=this.produce(e,n,((e,t)=>{r=e,i=t}));return[o,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ot(e)||nt(8),it(e)&&(e=Vt(e));const t=It(this),n=Ut(e,void 0);return n[tt].isManual_=!0,Ct(t),n}finishDraft(e,t){const n=e&&e[tt];n&&n.isManual_||nt(9);const{scope_:r}=n;return St(r,t),Tt(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=_t("Patches").applyPatches_;return it(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},jt=Bt.produce;Bt.produceWithPatches.bind(Bt),Bt.setAutoFreeze.bind(Bt),Bt.setUseStrictShallowCopy.bind(Bt),Bt.applyPatches.bind(Bt),Bt.createDraft.bind(Bt),Bt.finishDraft.bind(Bt);function qt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Wt=e=>Array.isArray(e)?e:[e];function Kt(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Gt="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},Ht=0,Qt=1;function Yt(){return{s:Ht,v:void 0,o:null,p:null}}function Xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Yt();const{resultEqualityCheck:r}=t;let i,o=0;function s(){let t=n;const{length:s}=arguments;for(let e=0,n=s;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=Yt(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=Yt(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===Qt?l=t.v:(l=e.apply(null,arguments),o++),a.s=Qt,r){var u,c,h;const e=null!==(u=null===(c=i)||void 0===c||null===(h=c.deref)||void 0===h?void 0:h.call(c))&&void 0!==u?u:i;null!=e&&r(e,l)&&(l=e,0!==o&&o--);i="object"===typeof l&&null!==l||"function"===typeof l?new Gt(l):l}return a.v=l,l}return s.clearCache=()=>{n=Yt(),s.resetResultsCount()},s.resultsCount=()=>o,s.resetResultsCount=()=>{o=0},s}function $t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,o=0,s=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),qt(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const u={...i,...a},{memoize:c,memoizeOptions:h=[],argsMemoize:d=Xt,argsMemoizeOptions:f=[],devModeChecks:p={}}=u,g=Wt(h),m=Wt(f),v=Kt(t),y=c((function(){return o++,l.apply(null,arguments)}),...g);const w=d((function(){s++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(v,arguments);return r=y.apply(null,e),r}),...m);return Object.assign(w,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>r,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:c,argsMemoize:d})};return Object.assign(o,{withTypes:()=>o}),o}var Jt=$t(Xt),Zt=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>Zt});function en(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var tn=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),nn=()=>Math.random().toString(36).substring(7).split("").join("."),rn={INIT:"@@redux/INIT".concat(nn()),REPLACE:"@@redux/REPLACE".concat(nn()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(nn())};function on(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function sn(e,t,n){if("function"!==typeof e)throw new Error(en(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(en(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(en(1));return n(sn)(e,t)}let r=e,i=t,o=new Map,s=o,a=0,l=!1;function u(){s===o&&(s=new Map,o.forEach(((e,t)=>{s.set(t,e)})))}function c(){if(l)throw new Error(en(3));return i}function h(e){if("function"!==typeof e)throw new Error(en(4));if(l)throw new Error(en(5));let t=!0;u();const n=a++;return s.set(n,e),function(){if(t){if(l)throw new Error(en(6));t=!1,u(),s.delete(n),o=null}}}function d(e){if(!on(e))throw new Error(en(7));if("undefined"===typeof e.type)throw new Error(en(8));if("string"!==typeof e.type)throw new Error(en(17));if(l)throw new Error(en(9));try{l=!0,i=r(i,e)}finally{l=!1}return(o=s).forEach((e=>{e()})),e}d({type:rn.INIT});return{dispatch:d,subscribe:h,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(en(10));r=e,d({type:rn.REPLACE})},[tn]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(en(11));function n(){const e=t;e.next&&e.next(c())}n();return{unsubscribe:e(n)}},[tn](){return this}}}}}function an(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:rn.INIT}))throw new Error(en(12));if("undefined"===typeof n(void 0,{type:rn.PROBE_UNKNOWN_ACTION()}))throw new Error(en(13))}))}(n)}catch($I){i=$I}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let o=!1;const s={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],u=e[a],c=l(u,t);if("undefined"===typeof c){t&&t.type;throw new Error(en(14))}s[a]=c,o=o||c!==u}return o=o||r.length!==Object.keys(e).length,o?s:e}}function ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function un(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var cn=un(),hn=un,dn=(function(){const e=$t(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(it(e)?Vt(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(Xt),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ln:ln.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function fn(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Vn(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return on(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var pn=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function gn(e){return ot(e)?jt(e,(()=>{})):e}function mn(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Vn(10));const r=n.insert(t,e);return e.set(t,r),r}var vn="RTK_autoBatch",yn=e=>t=>{setTimeout(t,e)},wn="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:yn(10),bn=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new pn(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,o=!1;const s=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?wn:"callback"===e.type?e.queueNotification:yn(e.timeout),l=()=>{o=!1,i&&(i=!1,s.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[vn]),i=!r,i&&(o||(o=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function _n(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Vn(28));if(r in t)throw new Error(Vn(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var En=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Sn=Symbol.for("rtk-slice-createasyncthunk");function kn(e,t){return"".concat(e,"/").concat(t)}function Cn(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Sn];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Vn(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(i),s={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Vn(12));if(n in s.sliceCaseReducersByType)throw new Error(Vn(13));return s.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(s.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(s.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(s.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?_n(e.extraReducers):[e.extraReducers],i={...t,...s.sliceCaseReducersByType};return function(e,t){let n,[r,i,o]=_n(t);if(function(e){return"function"===typeof e}(e))n=()=>gn(e());else{const t=gn(e);n=()=>t}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,s=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===s.filter((e=>!!e)).length&&(s=[o]),s.reduce(((e,n)=>{if(n){if(it(e)){const r=n(e,t);return void 0===r?e:r}if(ot(e))return jt(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Vn(9))}return r}}return e}),e)}return s.getInitialState=n,s}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of s.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}o.forEach((r=>{const o=i[r],s={reducerName:r,type:kn(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function(e,t,n){let r,i,{type:o,reducerName:s,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Vn(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(o,r).exposeCaseReducer(s,r).exposeAction(s,i?fn(o,i):fn(o))}(s,o,a):function(e,t,n,r){let{type:i,reducerName:o}=e;if(!r)throw new Error(Vn(18));const{payloadCreator:s,fulfilled:a,pending:l,rejected:u,settled:c,options:h}=t,d=r(i,s,h);n.exposeAction(o,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);u&&n.addCase(d.rejected,u);c&&n.addMatcher(d.settled,c);n.exposeCaseReducer(o,{fulfilled:a||Tn,pending:l||Tn,rejected:u||Tn,settled:c||Tn})}(s,o,a,n)}));const u=e=>e,c=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const r=mn(c,n,{insert:()=>new WeakMap});return mn(r,t,{insert:()=>{const r={};for(const[o,s]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[o]=In(s,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g={name:t,reducer:d,actions:s.actionCreators,caseReducers:s.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...g,...p(i,!0)}}};return g}}function In(e,t,n,r){function i(i){let o=t(i);"undefined"===typeof o&&r&&(o=n());for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return e(o,...a)}return i.unwrapped=e,i}var xn=Cn();function Tn(){}var Ln="listener",Pn="completed",Dn="cancelled",Mn=("task-".concat(Dn),"task-".concat(Pn),"".concat(Ln,"-").concat(Dn),"".concat(Ln,"-").concat(Pn),(e,t)=>{if("function"!==typeof e)throw new Error(Vn(32))});var{assign:An}=Object,Nn="listenerMiddleware",On=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:o}=e;if(t)i=fn(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Vn(21));return Mn(o),{predicate:i,type:t,effect:o}},Rn=Object.assign((e=>{const{type:t,predicate:n,effect:r}=On(e);return{id:En(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Vn(22))}}}),{withTypes:()=>Rn}),Fn=Object.assign(fn("".concat(Nn,"/add")),{withTypes:()=>Fn}),Un=(fn("".concat(Nn,"/removeAll")),Object.assign(fn("".concat(Nn,"/remove")),{withTypes:()=>Un}));Symbol.for("rtk-state-proxy-original");function Vn(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const zn=xn({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser(e,t){e.email=t.payload.email,e.token=t.payload.token,e.id=t.payload.id},removeUser(e){e.email=null,e.token=null,e.id=null}}}),{setUser:Bn,removeUser:jn}=zn.actions,qn=zn.reducer;var Wn=n(579),Kn=function(e,t){return Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Kn(e,t)};function Gn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Kn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Hn=function(){return Hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hn.apply(this,arguments)};function Qn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Yn(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch($I){o($I)}}function a(e){try{l(r.throw(e))}catch($I){o($I)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function Xn(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch($I){o=[6,$I],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function $n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jn=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,s,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}},Zn=$n(Jn),er=(0,r.createContext)(null);function tr(e,t,n,r){var i={};return function(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}(e,(function(e,o){var s=n[o];s!==t[o]&&(i[o]=s,e(r,s))})),i}function nr(e,t,n){var r=function(e,t,n){return Object.keys(e).reduce((function(n,r){return t(n,e[r],r)}),n)}(n,(function(n,r,i){return"function"===typeof e[i]&&n.push(google.maps.event.addListener(t,r,e[i])),n}),[]);return r}function rr(e){google.maps.event.removeListener(e)}function ir(e){void 0===e&&(e=[]),e.forEach(rr)}function or(e){var t=e.updaterMap,n=e.eventMap,r=e.prevProps,i=e.nextProps,o=e.instance,s=nr(i,o,n);return tr(t,r,i,o),s}var sr={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},ar={extraMapTypes:function(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center:function(e,t){e.setCenter(t)},clickableIcons:function(e,t){e.setClickableIcons(t)},heading:function(e,t){e.setHeading(t)},mapTypeId:function(e,t){e.setMapTypeId(t)},options:function(e,t){e.setOptions(t)},streetView:function(e,t){e.setStreetView(t)},tilt:function(e,t){e.setTilt(t)},zoom:function(e,t){e.setZoom(t)}};(0,r.memo)((function(e){var t=e.children,n=e.options,i=e.id,o=e.mapContainerStyle,s=e.mapContainerClassName,a=e.center,l=e.onClick,u=e.onDblClick,c=e.onDrag,h=e.onDragEnd,d=e.onDragStart,f=e.onMouseMove,p=e.onMouseOut,g=e.onMouseOver,m=e.onMouseDown,v=e.onMouseUp,y=e.onRightClick,w=e.onCenterChanged,b=e.onLoad,_=e.onUnmount,E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useRef)(null),I=(0,r.useState)(null),x=I[0],T=I[1],L=(0,r.useState)(null),P=L[0],D=L[1],M=(0,r.useState)(null),A=M[0],N=M[1],O=(0,r.useState)(null),R=O[0],F=O[1],U=(0,r.useState)(null),V=U[0],z=U[1],B=(0,r.useState)(null),j=B[0],q=B[1],W=(0,r.useState)(null),K=W[0],G=W[1],H=(0,r.useState)(null),Q=H[0],Y=H[1],X=(0,r.useState)(null),$=X[0],J=X[1],Z=(0,r.useState)(null),ee=Z[0],te=Z[1],ne=(0,r.useState)(null),re=ne[0],ie=ne[1],oe=(0,r.useState)(null),se=oe[0],ae=oe[1];return(0,r.useEffect)((function(){n&&null!==S&&S.setOptions(n)}),[S,n]),(0,r.useEffect)((function(){null!==S&&"undefined"!==typeof a&&S.setCenter(a)}),[S,a]),(0,r.useEffect)((function(){S&&u&&(null!==P&&google.maps.event.removeListener(P),D(google.maps.event.addListener(S,"dblclick",u)))}),[u]),(0,r.useEffect)((function(){S&&h&&(null!==A&&google.maps.event.removeListener(A),N(google.maps.event.addListener(S,"dragend",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==R&&google.maps.event.removeListener(R),F(google.maps.event.addListener(S,"dragstart",d)))}),[d]),(0,r.useEffect)((function(){S&&m&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(S,"mousedown",m)))}),[m]),(0,r.useEffect)((function(){S&&f&&(null!==j&&google.maps.event.removeListener(j),q(google.maps.event.addListener(S,"mousemove",f)))}),[f]),(0,r.useEffect)((function(){S&&p&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(S,"mouseout",p)))}),[p]),(0,r.useEffect)((function(){S&&g&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(S,"mouseover",g)))}),[g]),(0,r.useEffect)((function(){S&&v&&(null!==$&&google.maps.event.removeListener($),J(google.maps.event.addListener(S,"mouseup",v)))}),[v]),(0,r.useEffect)((function(){S&&y&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(S,"rightclick",y)))}),[y]),(0,r.useEffect)((function(){S&&l&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(S,"click",l)))}),[l]),(0,r.useEffect)((function(){S&&c&&(null!==se&&google.maps.event.removeListener(se),ae(google.maps.event.addListener(S,"drag",c)))}),[c]),(0,r.useEffect)((function(){S&&w&&(null!==x&&google.maps.event.removeListener(x),T(google.maps.event.addListener(S,"center_changed",w)))}),[l]),(0,r.useEffect)((function(){var e=null===C.current?null:new google.maps.Map(C.current,n);return k(e),null!==e&&b&&b(e),function(){null!==e&&_&&_(e)}}),[]),(0,Wn.jsx)("div",{id:i,ref:C,style:o,className:s,children:(0,Wn.jsx)(er.Provider,{value:S,children:null!==S?t:null})})}));var lr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={map:null},t.registeredEvents=[],t.mapRef=null,t.getInstance=function(){return null===t.mapRef?null:new google.maps.Map(t.mapRef,t.props.options)},t.panTo=function(e){var n=t.getInstance();n&&n.panTo(e)},t.setMapCallback=function(){null!==t.state.map&&t.props.onLoad&&t.props.onLoad(t.state.map)},t.getRef=function(e){t.mapRef=e},t}return Gn(t,e),t.prototype.componentDidMount=function(){var e=this.getInstance();this.registeredEvents=or({updaterMap:ar,eventMap:sr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.map&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:ar,eventMap:sr,prevProps:e,nextProps:this.props,instance:this.state.map}))},t.prototype.componentWillUnmount=function(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ir(this.registeredEvents))},t.prototype.render=function(){return(0,Wn.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,Wn.jsx)(er.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})},t}(r.PureComponent),ur="undefined"!==typeof document;function cr(e){var t=e.url,n=e.id,r=e.nonce;return ur?new Promise((function(e,i){var o=document.getElementById(n),s=window;if(o){var a=o.getAttribute("data-state");if(o.src===t&&"error"!==a){if("ready"===a)return e(n);var l=s.initMap,u=o.onerror;return s.initMap=function(){l&&l(),e(n)},void(o.onerror=function(e){u&&u(e),i(e)})}o.remove()}var c=document.createElement("script");c.type="text/javascript",c.src=t,c.id=n,c.async=!0,c.nonce=r||"",c.onerror=function(e){c.setAttribute("data-state","error"),i(e)},s.initMap=function(){c.setAttribute("data-state","ready"),e(n)},document.head.appendChild(c)})).catch((function(e){throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function hr(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function dr(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(n,r){return hr(n)||Reflect.apply(t,e,[n,r]),n};var n=e.appendChild.bind(e);e.appendChild=function(t){return hr(t)||Reflect.apply(n,e,[t]),t}}}function fr(e){var t=e.googleMapsApiKey,n=e.googleMapsClientId,r=e.version,i=void 0===r?"weekly":r,o=e.language,s=e.region,a=e.libraries,l=e.channel,u=e.mapIds,c=e.authReferrerPolicy,h=[];return Zn(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?h.push("key=".concat(t)):n&&h.push("client=".concat(n)),i&&h.push("v=".concat(i)),o&&h.push("language=".concat(o)),s&&h.push("region=".concat(s)),a&&a.length&&h.push("libraries=".concat(a.sort().join(","))),l&&h.push("channel=".concat(l)),u&&u.length&&h.push("map_ids=".concat(u.join(","))),c&&h.push("auth_referrer_policy=".concat(c)),h.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(h.join("&"))}var pr=!1;function gr(){return(0,Wn.jsx)("div",{children:"Loading..."})}var mr,vr={id:"script-loader",version:"weekly"};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.check=(0,r.createRef)(),t.state={loaded:!1},t.cleanupCallback=function(){delete window.google.maps,t.injectScript()},t.isCleaningUp=function(){return Yn(t,void 0,void 0,(function(){function e(e){if(pr){if(ur)var t=window.setInterval((function(){pr||(window.clearInterval(t),e())}),1)}else e()}return Xn(this,(function(t){return[2,new Promise(e)]}))}))},t.cleanup=function(){pr=!0;var e=document.getElementById(t.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},t.injectScript=function(){t.props.preventGoogleFontsLoading&&dr(),Zn(!!t.props.id,'LoadScript requires "id" prop to be a string: %s',t.props.id),cr({id:t.props.id,nonce:t.props.nonce,url:fr(t.props)}).then((function(){t.props.onLoad&&t.props.onLoad(),t.setState((function(){return{loaded:!0}}))})).catch((function(e){t.props.onError&&t.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(t.props.googleMapsApiKey||"-",") or Client ID (").concat(t.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))},t}Gn(t,e),t.prototype.componentDidMount=function(){if(ur){if(window.google&&window.google.maps&&!pr)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}},t.prototype.componentDidUpdate=function(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ur&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))},t.prototype.componentWillUnmount=function(){var e=this;if(ur){this.cleanup();window.setTimeout((function(){e.check.current||(delete window.google,pr=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}},t.prototype.render=function(){return(0,Wn.jsxs)(Wn.Fragment,{children:[(0,Wn.jsx)("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||(0,Wn.jsx)(gr,{})]})},t.defaultProps=vr}(r.PureComponent);function yr(e){var t=e.id,n=void 0===t?vr.id:t,i=e.version,o=void 0===i?vr.version:i,s=e.nonce,a=e.googleMapsApiKey,l=e.googleMapsClientId,u=e.language,c=e.region,h=e.libraries,d=e.preventGoogleFontsLoading,f=e.channel,p=e.mapIds,g=e.authReferrerPolicy,m=(0,r.useRef)(!1),v=(0,r.useState)(!1),y=v[0],w=v[1],b=(0,r.useState)(void 0),_=b[0],E=b[1];(0,r.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]),(0,r.useEffect)((function(){ur&&d&&dr()}),[d]),(0,r.useEffect)((function(){y&&Zn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[y]);var S=fr({version:o,googleMapsApiKey:a,googleMapsClientId:l,language:u,region:c,libraries:h,channel:f,mapIds:p,authReferrerPolicy:g});(0,r.useEffect)((function(){function e(){m.current&&(w(!0),mr=S)}ur&&(window.google&&window.google.maps&&mr===S?e():cr({id:n,url:S,nonce:s}).then(e).catch((function(e){m.current&&E(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(a||"-",") or Client ID (").concat(l||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[n,S,s]);var k=(0,r.useRef)();return(0,r.useEffect)((function(){k.current&&h!==k.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),k.current=h}),[h]),{isLoaded:y,loadError:_,url:S}}var wr=(0,Wn.jsx)(gr,{});(0,r.memo)((function(e){var t=e.loadingElement,n=e.onLoad,i=e.onError,o=e.onUnmount,s=e.children,a=yr(Qn(e,["loadingElement","onLoad","onError","onUnmount","children"])),l=a.isLoaded,u=a.loadError;return(0,r.useEffect)((function(){l&&"function"===typeof n&&n()}),[l,n]),(0,r.useEffect)((function(){u&&"function"===typeof i&&i(u)}),[u,i]),(0,r.useEffect)((function(){return function(){o&&o()}}),[o]),l?s:t||wr}));var br;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(br||(br={}));var _r={},Er={options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.options,n=e.onLoad,i=e.onUnmount,o=(0,r.useContext)(er),s=(0,r.useState)(null),a=s[0],l=s[1];return(0,r.useEffect)((function(){null!==a&&a.setMap(o)}),[o]),(0,r.useEffect)((function(){t&&null!==a&&a.setOptions(t)}),[a,t]),(0,r.useEffect)((function(){var e=new google.maps.TrafficLayer(Hn(Hn({},t||{}),{map:o}));return l(e),n&&n(e),function(){null!==a&&(i&&i(a),a.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={trafficLayer:null},t.setTrafficLayerCallback=function(){null!==t.state.trafficLayer&&t.props.onLoad&&t.props.onLoad(t.state.trafficLayer)},t.registeredEvents=[],t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.TrafficLayer(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:Er,eventMap:_r,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.trafficLayer&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Er,eventMap:_r,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))},t.prototype.componentWillUnmount=function(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ir(this.registeredEvents),this.state.trafficLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);(0,r.memo)((function(e){var t=e.onLoad,n=e.onUnmount,i=(0,r.useContext)(er),o=(0,r.useState)(null),s=o[0],a=o[1];return(0,r.useEffect)((function(){null!==s&&s.setMap(i)}),[i]),(0,r.useEffect)((function(){var e=new google.maps.BicyclingLayer;return a(e),e.setMap(i),t&&t(e),function(){null!==e&&(n&&n(e),e.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bicyclingLayer:null},t.setBicyclingLayerCallback=function(){null!==t.state.bicyclingLayer&&(t.state.bicyclingLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.bicyclingLayer))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.BicyclingLayer;this.setState((function(){return{bicyclingLayer:e}}),this.setBicyclingLayerCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);(0,r.memo)((function(e){var t=e.onLoad,n=e.onUnmount,i=(0,r.useContext)(er),o=(0,r.useState)(null),s=o[0],a=o[1];return(0,r.useEffect)((function(){null!==s&&s.setMap(i)}),[i]),(0,r.useEffect)((function(){var e=new google.maps.TransitLayer;return a(e),e.setMap(i),t&&t(e),function(){null!==s&&(n&&n(s),s.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={transitLayer:null},t.setTransitLayerCallback=function(){null!==t.state.transitLayer&&(t.state.transitLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.transitLayer))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Sr={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},kr={drawingMode:function(e,t){e.setDrawingMode(t)},options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.options,n=e.drawingMode,i=e.onCircleComplete,o=e.onMarkerComplete,s=e.onOverlayComplete,a=e.onPolygonComplete,l=e.onPolylineComplete,u=e.onRectangleComplete,c=e.onLoad,h=e.onUnmount,d=(0,r.useContext)(er),f=(0,r.useState)(null),p=f[0],g=f[1],m=(0,r.useState)(null),v=m[0],y=m[1],w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],D=(0,r.useState)(null),M=D[0],A=D[1];return(0,r.useEffect)((function(){null!==p&&p.setMap(d)}),[d]),(0,r.useEffect)((function(){t&&null!==p&&p.setOptions(t)}),[p,t]),(0,r.useEffect)((function(){null!==p&&p.setDrawingMode(null!==n&&void 0!==n?n:null)}),[p,n]),(0,r.useEffect)((function(){p&&i&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(p,"circlecomplete",i)))}),[p,i]),(0,r.useEffect)((function(){p&&o&&(null!==b&&google.maps.event.removeListener(b),_(google.maps.event.addListener(p,"markercomplete",o)))}),[p,o]),(0,r.useEffect)((function(){p&&s&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(p,"overlaycomplete",s)))}),[p,s]),(0,r.useEffect)((function(){p&&a&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(p,"polygoncomplete",a)))}),[p,a]),(0,r.useEffect)((function(){p&&l&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(p,"polylinecomplete",l)))}),[p,l]),(0,r.useEffect)((function(){p&&u&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(p,"rectanglecomplete",u)))}),[p,u]),(0,r.useEffect)((function(){Zn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Hn(Hn({},t||{}),{map:d}));return n&&e.setDrawingMode(n),i&&y(google.maps.event.addListener(e,"circlecomplete",i)),o&&_(google.maps.event.addListener(e,"markercomplete",o)),s&&k(google.maps.event.addListener(e,"overlaycomplete",s)),a&&x(google.maps.event.addListener(e,"polygoncomplete",a)),l&&P(google.maps.event.addListener(e,"polylinecomplete",l)),u&&A(google.maps.event.addListener(e,"rectanglecomplete",u)),g(e),c&&c(e),function(){null!==p&&(v&&google.maps.event.removeListener(v),b&&google.maps.event.removeListener(b),S&&google.maps.event.removeListener(S),I&&google.maps.event.removeListener(I),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),h&&h(p),p.setMap(null))}}),[]),null})),function(e){function t(t){var n=e.call(this,t)||this;return n.registeredEvents=[],n.state={drawingManager:null},n.setDrawingManagerCallback=function(){null!==n.state.drawingManager&&n.props.onLoad&&n.props.onLoad(n.state.drawingManager)},Zn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),n}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.drawing.DrawingManager(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:kr,eventMap:Sr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.drawingManager&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:kr,eventMap:Sr,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))},t.prototype.componentWillUnmount=function(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ir(this.registeredEvents),this.state.drawingManager.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Cr={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Ir={animation:function(e,t){e.setAnimation(t)},clickable:function(e,t){e.setClickable(t)},cursor:function(e,t){e.setCursor(t)},draggable:function(e,t){e.setDraggable(t)},icon:function(e,t){e.setIcon(t)},label:function(e,t){e.setLabel(t)},map:function(e,t){e.setMap(t)},opacity:function(e,t){e.setOpacity(t)},options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},shape:function(e,t){e.setShape(t)},title:function(e,t){e.setTitle(t)},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},xr={};(0,r.memo)((function(e){var t=e.position,n=e.options,i=e.clusterer,o=e.noClustererRedraw,s=e.children,a=e.draggable,l=e.visible,u=e.animation,c=e.clickable,h=e.cursor,d=e.icon,f=e.label,p=e.opacity,g=e.shape,m=e.title,v=e.zIndex,y=e.onClick,w=e.onDblClick,b=e.onDrag,_=e.onDragEnd,E=e.onDragStart,S=e.onMouseOut,k=e.onMouseOver,C=e.onMouseUp,I=e.onMouseDown,x=e.onRightClick,T=e.onClickableChanged,L=e.onCursorChanged,P=e.onAnimationChanged,D=e.onDraggableChanged,M=e.onFlatChanged,A=e.onIconChanged,N=e.onPositionChanged,O=e.onShapeChanged,R=e.onTitleChanged,F=e.onVisibleChanged,U=e.onZindexChanged,V=e.onLoad,z=e.onUnmount,B=(0,r.useContext)(er),j=(0,r.useState)(null),q=j[0],W=j[1],K=(0,r.useState)(null),G=K[0],H=K[1],Q=(0,r.useState)(null),Y=Q[0],X=Q[1],$=(0,r.useState)(null),J=$[0],Z=$[1],ee=(0,r.useState)(null),te=ee[0],ne=ee[1],re=(0,r.useState)(null),ie=re[0],oe=re[1],se=(0,r.useState)(null),ae=se[0],le=se[1],ue=(0,r.useState)(null),ce=ue[0],he=ue[1],de=(0,r.useState)(null),fe=de[0],pe=de[1],ge=(0,r.useState)(null),me=ge[0],ve=ge[1],ye=(0,r.useState)(null),we=ye[0],be=ye[1],_e=(0,r.useState)(null),Ee=_e[0],Se=_e[1],ke=(0,r.useState)(null),Ce=ke[0],Ie=ke[1],xe=(0,r.useState)(null),Te=xe[0],Le=xe[1],Pe=(0,r.useState)(null),De=Pe[0],Me=Pe[1],Ae=(0,r.useState)(null),Ne=Ae[0],Oe=Ae[1],Re=(0,r.useState)(null),Fe=Re[0],Ue=Re[1],Ve=(0,r.useState)(null),ze=Ve[0],Be=Ve[1],je=(0,r.useState)(null),qe=je[0],We=je[1],Ke=(0,r.useState)(null),Ge=Ke[0],He=Ke[1],Qe=(0,r.useState)(null),Ye=Qe[0],Xe=Qe[1],$e=(0,r.useState)(null),Je=$e[0],Ze=$e[1];(0,r.useEffect)((function(){null!==q&&q.setMap(B)}),[B]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==q&&q.setOptions(n)}),[q,n]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==q&&q.setDraggable(a)}),[q,a]),(0,r.useEffect)((function(){t&&null!==q&&q.setPosition(t)}),[q,t]),(0,r.useEffect)((function(){"undefined"!==typeof l&&null!==q&&q.setVisible(l)}),[q,l]),(0,r.useEffect)((function(){null===q||void 0===q||q.setAnimation(u)}),[q,u]),(0,r.useEffect)((function(){q&&void 0!==c&&q.setClickable(c)}),[q,c]),(0,r.useEffect)((function(){q&&void 0!==h&&q.setCursor(h)}),[q,h]),(0,r.useEffect)((function(){q&&void 0!==d&&q.setIcon(d)}),[q,d]),(0,r.useEffect)((function(){q&&void 0!==f&&q.setLabel(f)}),[q,f]),(0,r.useEffect)((function(){q&&void 0!==p&&q.setOpacity(p)}),[q,p]),(0,r.useEffect)((function(){q&&void 0!==g&&q.setShape(g)}),[q,g]),(0,r.useEffect)((function(){q&&void 0!==m&&q.setTitle(m)}),[q,m]),(0,r.useEffect)((function(){q&&void 0!==v&&q.setZIndex(v)}),[q,v]),(0,r.useEffect)((function(){q&&w&&(null!==G&&google.maps.event.removeListener(G),H(google.maps.event.addListener(q,"dblclick",w)))}),[w]),(0,r.useEffect)((function(){q&&_&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(q,"dragend",_)))}),[_]),(0,r.useEffect)((function(){q&&E&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(q,"dragstart",E)))}),[E]),(0,r.useEffect)((function(){q&&I&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(q,"mousedown",I)))}),[I]),(0,r.useEffect)((function(){q&&S&&(null!==ie&&google.maps.event.removeListener(ie),oe(google.maps.event.addListener(q,"mouseout",S)))}),[S]),(0,r.useEffect)((function(){q&&k&&(null!==ae&&google.maps.event.removeListener(ae),le(google.maps.event.addListener(q,"mouseover",k)))}),[k]),(0,r.useEffect)((function(){q&&C&&(null!==ce&&google.maps.event.removeListener(ce),he(google.maps.event.addListener(q,"mouseup",C)))}),[C]),(0,r.useEffect)((function(){q&&x&&(null!==fe&&google.maps.event.removeListener(fe),pe(google.maps.event.addListener(q,"rightclick",x)))}),[x]),(0,r.useEffect)((function(){q&&y&&(null!==me&&google.maps.event.removeListener(me),ve(google.maps.event.addListener(q,"click",y)))}),[y]),(0,r.useEffect)((function(){q&&b&&(null!==we&&google.maps.event.removeListener(we),be(google.maps.event.addListener(q,"drag",b)))}),[b]),(0,r.useEffect)((function(){q&&T&&(null!==Ee&&google.maps.event.removeListener(Ee),Se(google.maps.event.addListener(q,"clickable_changed",T)))}),[T]),(0,r.useEffect)((function(){q&&L&&(null!==Ce&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(q,"cursor_changed",L)))}),[L]),(0,r.useEffect)((function(){q&&P&&(null!==Te&&google.maps.event.removeListener(Te),Le(google.maps.event.addListener(q,"animation_changed",P)))}),[P]),(0,r.useEffect)((function(){q&&D&&(null!==De&&google.maps.event.removeListener(De),Me(google.maps.event.addListener(q,"draggable_changed",D)))}),[D]),(0,r.useEffect)((function(){q&&M&&(null!==Ne&&google.maps.event.removeListener(Ne),Oe(google.maps.event.addListener(q,"flat_changed",M)))}),[M]),(0,r.useEffect)((function(){q&&A&&(null!==Fe&&google.maps.event.removeListener(Fe),Ue(google.maps.event.addListener(q,"icon_changed",A)))}),[A]),(0,r.useEffect)((function(){q&&N&&(null!==ze&&google.maps.event.removeListener(ze),Be(google.maps.event.addListener(q,"position_changed",N)))}),[N]),(0,r.useEffect)((function(){q&&O&&(null!==qe&&google.maps.event.removeListener(qe),We(google.maps.event.addListener(q,"shape_changed",O)))}),[O]),(0,r.useEffect)((function(){q&&R&&(null!==Ge&&google.maps.event.removeListener(Ge),He(google.maps.event.addListener(q,"title_changed",R)))}),[R]),(0,r.useEffect)((function(){q&&F&&(null!==Ye&&google.maps.event.removeListener(Ye),Xe(google.maps.event.addListener(q,"visible_changed",F)))}),[F]),(0,r.useEffect)((function(){q&&U&&(null!==Je&&google.maps.event.removeListener(Je),Ze(google.maps.event.addListener(q,"zindex_changed",U)))}),[U]),(0,r.useEffect)((function(){var e=Hn(Hn(Hn({},n||xr),i?xr:{map:B}),{position:t}),r=new google.maps.Marker(e);return i?i.addMarker(r,!!o):r.setMap(B),t&&r.setPosition(t),"undefined"!==typeof l&&r.setVisible(l),"undefined"!==typeof a&&r.setDraggable(a),"undefined"!==typeof c&&r.setClickable(c),"string"===typeof h&&r.setCursor(h),d&&r.setIcon(d),"undefined"!==typeof f&&r.setLabel(f),"undefined"!==typeof p&&r.setOpacity(p),g&&r.setShape(g),"string"===typeof m&&r.setTitle(m),"number"===typeof v&&r.setZIndex(v),w&&H(google.maps.event.addListener(r,"dblclick",w)),_&&X(google.maps.event.addListener(r,"dragend",_)),E&&Z(google.maps.event.addListener(r,"dragstart",E)),I&&ne(google.maps.event.addListener(r,"mousedown",I)),S&&oe(google.maps.event.addListener(r,"mouseout",S)),k&&le(google.maps.event.addListener(r,"mouseover",k)),C&&he(google.maps.event.addListener(r,"mouseup",C)),x&&pe(google.maps.event.addListener(r,"rightclick",x)),y&&ve(google.maps.event.addListener(r,"click",y)),b&&be(google.maps.event.addListener(r,"drag",b)),T&&Se(google.maps.event.addListener(r,"clickable_changed",T)),L&&Ie(google.maps.event.addListener(r,"cursor_changed",L)),P&&Le(google.maps.event.addListener(r,"animation_changed",P)),D&&Me(google.maps.event.addListener(r,"draggable_changed",D)),M&&Oe(google.maps.event.addListener(r,"flat_changed",M)),A&&Ue(google.maps.event.addListener(r,"icon_changed",A)),N&&Be(google.maps.event.addListener(r,"position_changed",N)),O&&We(google.maps.event.addListener(r,"shape_changed",O)),R&&He(google.maps.event.addListener(r,"title_changed",R)),F&&Xe(google.maps.event.addListener(r,"visible_changed",F)),U&&Ze(google.maps.event.addListener(r,"zindex_changed",U)),W(r),V&&V(r),function(){null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==J&&google.maps.event.removeListener(J),null!==te&&google.maps.event.removeListener(te),null!==ie&&google.maps.event.removeListener(ie),null!==ae&&google.maps.event.removeListener(ae),null!==ce&&google.maps.event.removeListener(ce),null!==fe&&google.maps.event.removeListener(fe),null!==me&&google.maps.event.removeListener(me),null!==Ee&&google.maps.event.removeListener(Ee),null!==Ce&&google.maps.event.removeListener(Ce),null!==Te&&google.maps.event.removeListener(Te),null!==De&&google.maps.event.removeListener(De),null!==Ne&&google.maps.event.removeListener(Ne),null!==Fe&&google.maps.event.removeListener(Fe),null!==ze&&google.maps.event.removeListener(ze),null!==Ge&&google.maps.event.removeListener(Ge),null!==Ye&&google.maps.event.removeListener(Ye),null!==Je&&google.maps.event.removeListener(Je),z&&z(r),i?i.removeMarker(r,!!o):r&&r.setMap(null)}}),[]);var et=(0,r.useMemo)((function(){return s?r.Children.map(s,(function(e){if(!(0,r.isValidElement)(e))return e;var t=e;return(0,r.cloneElement)(t,{anchor:q})})):null}),[s,q]);return(0,Wn.jsx)(Wn.Fragment,{children:et})||null}));var Tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t}return Gn(t,e),t.prototype.componentDidMount=function(){var e=Hn(Hn(Hn({},this.props.options||xr),this.props.clusterer?xr:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(e),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=or({updaterMap:Ir,eventMap:Cr,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)},t.prototype.componentDidUpdate=function(e){this.marker&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Ir,eventMap:Cr,prevProps:e,nextProps:this.props,instance:this.marker}))},t.prototype.componentWillUnmount=function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ir(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))},t.prototype.render=function(){var e=this,t=null;return this.props.children&&(t=r.Children.map(this.props.children,(function(t){if(!(0,r.isValidElement)(t))return t;var n=t;return(0,r.cloneElement)(n,{anchor:e.marker})}))),t||null},t.contextType=er,t}(r.PureComponent),Lr=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),i=t.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var i=e.getZoom()||0;null!==n&&i>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r,i,o;if(this.div&&this.center){var s=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),l=parseInt((null===(e=a[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt((null===(t=a[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),c=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==c?"".concat(c.y,"px"):"0","; left: ").concat(null!==c?"".concat(c.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var h=document.createElement("img");h.alt=s,h.src=this.url,h.width=this.width,h.height=this.height,h.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(h.style.clip="rect(-".concat(u,"px, -").concat(l+this.width,"px, -").concat(u+this.height,", -").concat(l,")"));var d=document.createElement("div");d.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(n=this.sums)||void 0===n?void 0:n.text)&&(d.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(i=this.sums)||void 0===i?void 0:i.html)&&(d.innerHTML="".concat(null===(o=this.sums)||void 0===o?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(h),this.div.appendChild(d),this.div.title=s,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),Pr=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Lr(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,n=this.getMarkers();t<n.length;t++){var r=n[t].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var i=this.markers.length,o=this.markerClusterer.getMaxZoom(),s=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==o&&"undefined"!==typeof s&&s>o)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var a=0,l=this.markers;a<l.length;a++){l[a].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function Dr(e,t){var n=e.length,r=n.toString().length,i=Math.min(r,t);return{text:n.toString(),index:i,title:""}}var Mr=[53,56,66,78,90],Ar=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||Mr,this.calculator=r.calculator||Dr,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var n=t[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var r=0,i=this.clusters;r<i.length;r++){i[r].remove()}this.clusters=[];for(var o=0,s=this.listeners;o<s.length;o++){var a=s[o];google.maps.event.removeListener(a)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0,r=e;n<r.length;n++){var i=r[n].getPosition();i&&t.extend(i)}var o=this.getMap();null!==o&&"fitBounds"in o&&o.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0,i=e;r<i.length;r++){var o=i[r];n=n||this.removeMarker_(o)}return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0,n=e;t<n.length;t++){n[t].remove()}}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var i=t.fromDivPixelToLatLng(n);null!==i&&e.extend(i)}if(null!==r){var o=t.fromDivPixelToLatLng(r);null!==o&&e.extend(o)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,n=this.clusters;t<n.length;t++){n[t].remove()}this.clusters=[];for(var r=0,i=this.markers;r<i.length;r++){var o=i[r];o.isAdded=!1,e&&o.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,i=0,o=this.clusters;i<o.length;i++){var s=(t=o[i]).getCenter(),a=e.getPosition();if(s&&a){var l=this.distanceBetweenPoints(s,a);l<n&&(n=l,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new Pr(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),i=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),o=this.getExtendedBounds(i),s=Math.min(e+this.batchSize,this.markers.length),a=e;a<s;a++){var l=this.markers[a];l&&!l.isAdded&&this.isMarkerInBounds(l,o)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(s<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(s)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var u=0,c=this.clusters;u<c.length;u++){c[u].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var n=t;this.prototype[n]=e.prototype[n]}return this}.apply(e,[t])},e}(),Nr={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Or={averageCenter:function(e,t){e.setAverageCenter(t)},batchSizeIE:function(e,t){e.setBatchSizeIE(t)},calculator:function(e,t){e.setCalculator(t)},clusterClass:function(e,t){e.setClusterClass(t)},enableRetinaIcons:function(e,t){e.setEnableRetinaIcons(t)},gridSize:function(e,t){e.setGridSize(t)},ignoreHidden:function(e,t){e.setIgnoreHidden(t)},imageExtension:function(e,t){e.setImageExtension(t)},imagePath:function(e,t){e.setImagePath(t)},imageSizes:function(e,t){e.setImageSizes(t)},maxZoom:function(e,t){e.setMaxZoom(t)},minimumClusterSize:function(e,t){e.setMinimumClusterSize(t)},styles:function(e,t){e.setStyles(t)},title:function(e,t){e.setTitle(t)},zoomOnClick:function(e,t){e.setZoomOnClick(t)}},Rr={};(0,r.memo)((function(e){var t=e.children,n=e.options,i=e.averageCenter,o=e.batchSizeIE,s=e.calculator,a=e.clusterClass,l=e.enableRetinaIcons,u=e.gridSize,c=e.ignoreHidden,h=e.imageExtension,d=e.imagePath,f=e.imageSizes,p=e.maxZoom,g=e.minimumClusterSize,m=e.styles,v=e.title,y=e.zoomOnClick,w=e.onClick,b=e.onClusteringBegin,_=e.onClusteringEnd,E=e.onMouseOver,S=e.onMouseOut,k=e.onLoad,C=e.onUnmount,I=(0,r.useState)(null),x=I[0],T=I[1],L=(0,r.useContext)(er),P=(0,r.useState)(null),D=P[0],M=P[1],A=(0,r.useState)(null),N=A[0],O=A[1],R=(0,r.useState)(null),F=R[0],U=R[1],V=(0,r.useState)(null),z=V[0],B=V[1],j=(0,r.useState)(null),q=j[0],W=j[1];return(0,r.useEffect)((function(){x&&S&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(x,Nr.onMouseOut,S)))}),[S]),(0,r.useEffect)((function(){x&&E&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(x,Nr.onMouseOver,E)))}),[E]),(0,r.useEffect)((function(){x&&w&&(null!==D&&google.maps.event.removeListener(D),M(google.maps.event.addListener(x,Nr.onClick,w)))}),[w]),(0,r.useEffect)((function(){x&&b&&(null!==N&&google.maps.event.removeListener(N),O(google.maps.event.addListener(x,Nr.onClusteringBegin,b)))}),[b]),(0,r.useEffect)((function(){x&&_&&(null!==F&&google.maps.event.removeListener(F),O(google.maps.event.addListener(x,Nr.onClusteringEnd,_)))}),[_]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==x&&Or.averageCenter(x,i)}),[x,i]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==x&&Or.batchSizeIE(x,o)}),[x,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==x&&Or.calculator(x,s)}),[x,s]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==x&&Or.clusterClass(x,a)}),[x,a]),(0,r.useEffect)((function(){"undefined"!==typeof l&&null!==x&&Or.enableRetinaIcons(x,l)}),[x,l]),(0,r.useEffect)((function(){"undefined"!==typeof u&&null!==x&&Or.gridSize(x,u)}),[x,u]),(0,r.useEffect)((function(){"undefined"!==typeof c&&null!==x&&Or.ignoreHidden(x,c)}),[x,c]),(0,r.useEffect)((function(){"undefined"!==typeof h&&null!==x&&Or.imageExtension(x,h)}),[x,h]),(0,r.useEffect)((function(){"undefined"!==typeof d&&null!==x&&Or.imagePath(x,d)}),[x,d]),(0,r.useEffect)((function(){"undefined"!==typeof f&&null!==x&&Or.imageSizes(x,f)}),[x,f]),(0,r.useEffect)((function(){"undefined"!==typeof p&&null!==x&&Or.maxZoom(x,p)}),[x,p]),(0,r.useEffect)((function(){"undefined"!==typeof g&&null!==x&&Or.minimumClusterSize(x,g)}),[x,g]),(0,r.useEffect)((function(){"undefined"!==typeof m&&null!==x&&Or.styles(x,m)}),[x,m]),(0,r.useEffect)((function(){"undefined"!==typeof v&&null!==x&&Or.title(x,v)}),[x,v]),(0,r.useEffect)((function(){"undefined"!==typeof y&&null!==x&&Or.zoomOnClick(x,y)}),[x,y]),(0,r.useEffect)((function(){if(L){var e=Hn({},n||Rr),t=new Ar(L,[],e);return i&&Or.averageCenter(t,i),o&&Or.batchSizeIE(t,o),s&&Or.calculator(t,s),a&&Or.clusterClass(t,a),l&&Or.enableRetinaIcons(t,l),u&&Or.gridSize(t,u),c&&Or.ignoreHidden(t,c),h&&Or.imageExtension(t,h),d&&Or.imagePath(t,d),f&&Or.imageSizes(t,f),p&&Or.maxZoom(t,p),g&&Or.minimumClusterSize(t,g),m&&Or.styles(t,m),v&&Or.title(t,v),y&&Or.zoomOnClick(t,y),S&&B(google.maps.event.addListener(t,Nr.onMouseOut,S)),E&&W(google.maps.event.addListener(t,Nr.onMouseOver,E)),w&&M(google.maps.event.addListener(t,Nr.onClick,w)),b&&O(google.maps.event.addListener(t,Nr.onClusteringBegin,b)),_&&U(google.maps.event.addListener(t,Nr.onClusteringEnd,_)),T(t),k&&k(t),function(){null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==D&&google.maps.event.removeListener(D),null!==N&&google.maps.event.removeListener(N),null!==F&&google.maps.event.removeListener(F),C&&C(t)}}}),[]),null!==x&&t(x)||null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={markerClusterer:null},t.setClustererCallback=function(){null!==t.state.markerClusterer&&t.props.onLoad&&t.props.onLoad(t.state.markerClusterer)},t}Gn(t,e),t.prototype.componentDidMount=function(){if(this.context){var e=new Ar(this.context,[],this.props.options);this.registeredEvents=or({updaterMap:Or,eventMap:Nr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{markerClusterer:e}}),this.setClustererCallback)}},t.prototype.componentDidUpdate=function(e){this.state.markerClusterer&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Or,eventMap:Nr,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))},t.prototype.componentWillUnmount=function(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ir(this.registeredEvents),this.state.markerClusterer.setMap(null))},t.prototype.render=function(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null},t.contextType=er}(r.PureComponent);function Fr(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var Ur=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<i.length;r++){var o=i[r];this.eventListeners.push(google.maps.event.addListener(this.div,o,Fr))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||Fr(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,i=t.getBounds();i&&!i.contains(this.position)&&t.setCenter(this.position);var o=t.getDiv(),s=o.offsetWidth,a=o.offsetHeight,l=this.pixelOffset.width,u=this.pixelOffset.height,c=this.div.offsetWidth,h=this.div.offsetHeight,d=this.infoBoxClearance.width,f=this.infoBoxClearance.height,p=this.getProjection().fromLatLngToContainerPixel(this.position);null!==p&&(p.x<-l+d?n=p.x+l-d:p.x+c+l+d>s&&(n=p.x+c+l+d-s),this.alignBottom?p.y<-u+f+h?r=p.y+u-f-h:p.y+u+f>a&&(r=p.y+u+f-a):p.y<-u+f?r=p.y+u-f:p.y+h+u+f>a&&(r=p.y+h+u+f-a)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var n=t[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),Vr={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},zr={options:function(e,t){e.setOptions(t)},position:function(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},Br={};(0,r.memo)((function(e){var t=e.children,n=e.anchor,i=e.options,o=e.position,a=e.zIndex,l=e.onCloseClick,u=e.onDomReady,c=e.onContentChanged,h=e.onPositionChanged,d=e.onZindexChanged,f=e.onLoad,p=e.onUnmount,g=(0,r.useContext)(er),m=(0,r.useState)(null),v=m[0],y=m[1],w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],D=(0,r.useState)(null),M=D[0],A=D[1],N=(0,r.useRef)(null);return(0,r.useEffect)((function(){g&&null!==v&&(v.close(),n?v.open(g,n):v.getPosition()&&v.open(g))}),[g,v,n]),(0,r.useEffect)((function(){i&&null!==v&&v.setOptions(i)}),[v,i]),(0,r.useEffect)((function(){if(o&&null!==v){var e=o instanceof google.maps.LatLng?o:new google.maps.LatLng(o.lat,o.lng);v.setPosition(e)}}),[o]),(0,r.useEffect)((function(){"number"===typeof a&&null!==v&&v.setZIndex(a)}),[a]),(0,r.useEffect)((function(){v&&l&&(null!==b&&google.maps.event.removeListener(b),_(google.maps.event.addListener(v,"closeclick",l)))}),[l]),(0,r.useEffect)((function(){v&&u&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(v,"domready",u)))}),[u]),(0,r.useEffect)((function(){v&&c&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(v,"content_changed",c)))}),[c]),(0,r.useEffect)((function(){v&&h&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(v,"position_changed",h)))}),[h]),(0,r.useEffect)((function(){v&&d&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(v,"zindex_changed",d)))}),[d]),(0,r.useEffect)((function(){if(g){var e=i||Br,t=e.position,r=Qn(e,["position"]),o=void 0;!t||t instanceof google.maps.LatLng||(o=new google.maps.LatLng(t.lat,t.lng));var s=new Ur(Hn(Hn({},r),o?{position:o}:{}));N.current=document.createElement("div"),y(s),l&&_(google.maps.event.addListener(s,"closeclick",l)),u&&k(google.maps.event.addListener(s,"domready",u)),c&&x(google.maps.event.addListener(s,"content_changed",c)),h&&P(google.maps.event.addListener(s,"position_changed",h)),d&&A(google.maps.event.addListener(s,"zindex_changed",d)),s.setContent(N.current),n?s.open(g,n):s.getPosition()?s.open(g):Zn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),f&&f(s)}return function(){null!==v&&(b&&google.maps.event.removeListener(b),I&&google.maps.event.removeListener(I),S&&google.maps.event.removeListener(S),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),p&&p(v),v.close())}}),[]),N.current?(0,s.createPortal)(r.Children.only(t),N.current):null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=null,t.state={infoBox:null},t.open=function(e,n){n?null!==t.context&&e.open(t.context,n):e.getPosition()?null!==t.context&&e.open(t.context):Zn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},t.setInfoBoxCallback=function(){null!==t.state.infoBox&&null!==t.containerElement&&(t.state.infoBox.setContent(t.containerElement),t.open(t.state.infoBox,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoBox))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e,t=this.props.options||{},n=t.position,r=Qn(t,["position"]);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var i=new Ur(Hn(Hn({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=or({updaterMap:zr,eventMap:Vr,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)},t.prototype.componentDidUpdate=function(e){var t=this.state.infoBox;null!==t&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:zr,eventMap:Vr,prevProps:e,nextProps:this.props,instance:t}))},t.prototype.componentWillUnmount=function(){var e=this.props.onUnmount,t=this.state.infoBox;null!==t&&(e&&e(t),ir(this.registeredEvents),t.close())},t.prototype.render=function(){return this.containerElement?(0,s.createPortal)(r.Children.only(this.props.children),this.containerElement):null},t.contextType=er}(r.PureComponent);var jr=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},qr=$n(jr);const Wr=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Kr{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));const i=Wr[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new Kr(s,o,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=Wr.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Gr(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:s}=this,a=[0,i.length-1,0],l=[];for(;a.length;){const u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=s){for(let s=h;s<=c;s++){const a=o[2*s],u=o[2*s+1];a>=e&&a<=n&&u>=t&&u<=r&&l.push(i[s])}continue}const d=h+c>>1,f=o[2*d],p=o[2*d+1];f>=e&&f<=n&&p>=t&&p<=r&&l.push(i[d]),(0===u?e<=f:t<=p)&&(a.push(h),a.push(d-1),a.push(1-u)),(0===u?n>=f:r>=p)&&(a.push(d+1),a.push(c),a.push(1-u))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,s=[0,r.length-1,0],a=[],l=n*n;for(;s.length;){const u=s.pop()||0,c=s.pop()||0,h=s.pop()||0;if(c-h<=o){for(let n=h;n<=c;n++)Xr(i[2*n],i[2*n+1],e,t)<=l&&a.push(r[n]);continue}const d=h+c>>1,f=i[2*d],p=i[2*d+1];Xr(f,p,e,t)<=l&&a.push(r[d]),(0===u?e-n<=f:t-n<=p)&&(s.push(h),s.push(d-1),s.push(1-u)),(0===u?e+n>=f:t+n>=p)&&(s.push(d+1),s.push(c),s.push(1-u))}return a}}function Gr(e,t,n,r,i,o){if(i-r<=n)return;const s=r+i>>1;Hr(e,t,s,r,i,o),Gr(e,t,n,r,s-1,1-o),Gr(e,t,n,s+1,i,1-o)}function Hr(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const s=i-r+1,a=n-r+1,l=Math.log(s),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(s-u)/s)*(a-s/2<0?-1:1);Hr(e,t,n,Math.max(r,Math.floor(n-a*u/s+c)),Math.min(i,Math.floor(n+(s-a)*u/s+c)),o)}const s=t[2*n+o];let a=r,l=i;for(Qr(e,t,r,n),t[2*i+o]>s&&Qr(e,t,r,i);a<l;){for(Qr(e,t,a,l),a++,l--;t[2*a+o]<s;)a++;for(;t[2*l+o]>s;)l--}t[2*r+o]===s?Qr(e,t,r,l):(l++,Qr(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function Qr(e,t,n,r){Yr(e,n,r),Yr(t,2*n,2*r),Yr(t,2*n+1,2*r+1)}function Yr(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Xr(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}const $r={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Jr=Math.fround||(Zr=new Float32Array(1),e=>(Zr[0]=+e,Zr[0]));var Zr;const ei=3,ti=5,ni=6;class ri{constructor(e){this.options=Object.assign(Object.create($r),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i="prepare ".concat(e.length," points");t&&console.time(i),this.points=e;const o=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=Jr(si(n)),s=Jr(ai(r));o.push(i,s,1/0,a,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const e=+Date.now();s=this.trees[a]=this._createTree(this._cluster(s,a)),t&&console.log("z%d: %d clusters in %dms",a,s.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],a=s.range(si(n),ai(o),si(i),ai(r)),l=s.data,u=[];for(const c of a){const e=this.stride*c;u.push(l[e+ti]>1?ii(l,e,this.clusterProps):this.points[l[e+ei]])}return u}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(t*this.stride>=o.length)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[t*this.stride],l=o[t*this.stride+1],u=i.within(a,l,s),c=[];for(const h of u){const t=h*this.stride;o[t+4]===e&&c.push(o[t+ti]>1?ii(o,t,this.clusterProps):this.points[o[t+ei]])}if(0===c.length)throw new Error(r);return c}getLeaves(e,t,n){t=t||10,n=n||0;const r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:s}=this.options,a=s/o,l=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((t-a)/i,l,(t+1+a)/i,u),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-a/i,l,1,u),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,a/i,u),r.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const s of o){const t=s.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i}_createTree(e){const t=new Kr(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,o){for(const s of e){const e=s*this.stride,a=t[e+ti]>1;let l,u,c;if(a)l=oi(t,e,this.clusterProps),u=t[e],c=t[e+1];else{const n=this.points[t[e+ei]];l=n.properties;const[r,i]=n.geometry.coordinates;u=si(r),c=ai(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(u*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:l};let d;d=a||this.options.generateId?t[e+ei]:this.points[t[e+ei]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,s=n/(r*Math.pow(2,t)),a=e.data,l=[],u=this.stride;for(let c=0;c<a.length;c+=u){if(a[c+2]<=t)continue;a[c+2]=t;const n=a[c],r=a[c+1],h=e.within(a[c],a[c+1],s),d=a[c+ti];let f=d;for(const e of h){const n=e*u;a[n+2]>t&&(f+=a[n+ti])}if(f>d&&f>=o){let e,o=n*d,s=r*d,p=-1;const g=((c/u|0)<<5)+(t+1)+this.points.length;for(const n of h){const r=n*u;if(a[r+2]<=t)continue;a[r+2]=t;const l=a[r+ti];o+=a[r]*l,s+=a[r+1]*l,a[r+4]=g,i&&(e||(e=this._map(a,c,!0),p=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,r)))}a[c+4]=g,l.push(o/f,s/f,1/0,g,-1,f),i&&l.push(p)}else{for(let e=0;e<u;e++)l.push(a[c+e]);if(f>1)for(const e of h){const n=e*u;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<u;e++)l.push(a[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+ti]>1){const r=this.clusterProps[e[t+ni]];return n?Object.assign({},r):r}const r=this.points[e[t+ei]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function ii(e,t,n){return{type:"Feature",id:e[t+ei],properties:oi(e,t,n),geometry:{type:"Point",coordinates:[li(e[t]),ui(e[t+1])]}}}function oi(e,t,n){const r=e[t+ti],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,o=e[t+ni],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:e[t+ei],point_count:r,point_count_abbreviated:i})}function si(e){return e/360+.5}function ai(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function li(e){return 360*(e-.5)}function ui(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ci(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}class hi{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class di{constructor(e){let{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(hi.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>hi.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(hi.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class fi{constructor(e){let{maxZoom:t=16}=e;this.maxZoom=t}noop(e){let{markers:t}=e;return pi(t)}}const pi=e=>e.map((e=>new di({position:hi.getPosition(e),markers:[e]})));class gi extends fi{constructor(e){var{maxZoom:t,radius:n=60}=e,r=ci(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new ri(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!qr(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const n=this.markers.map((e=>{const t=hi.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!qr(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){let{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){let{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new di({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});const i=r.marker;return new di({markers:[i],position:hi.getPosition(i)})}}class mi{constructor(e,t){this.markers={sum:e.length};const n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class vi{render(e,t,n){let{count:r,position:i}=e;const o=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",s='<svg fill="'.concat(o,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),a="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(hi.isAdvancedMarkerAvailable(n)){const e=(new DOMParser).parseFromString(s,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const t={map:n,position:i,zIndex:l,title:a,content:e};return new google.maps.marker.AdvancedMarkerElement(t)}const u={position:i,zIndex:l,title:a,icon:{url:"data:image/svg+xml;base64,".concat(btoa(s)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class yi{constructor(){!function(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}(yi,google.maps.OverlayView)}}var wi;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(wi||(wi={}));const bi=(e,t,n)=>{n.fitBounds(t.bounds)};class _i extends yi{constructor(e){let{map:t,markers:n=[],algorithmOptions:r={},algorithm:i=new gi(r),renderer:o=new vi,onClusterClick:s=bi}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=o,this.onClusterClick=s,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return-1!==n&&(hi.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,wi.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){const e=new Set;for(const r of t)1==r.markers.length&&e.add(r.markers[0]);const n=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||hi.setMap(t.marker,null):n.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>n.forEach((e=>hi.setMap(e,null)))))}google.maps.event.trigger(this,wi.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>hi.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new mi(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>hi.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,wi.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),hi.setMap(n.marker,t)}))}}function Ei(e){var t=function(){Zn(!!r.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,r.useContext)(er);return Zn(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),n=(0,r.useState)(null),i=n[0],o=n[1];return(0,r.useEffect)((function(){if(t&&null===i){var n=new _i(Hn(Hn({},e),{map:t}));o(n)}}),[t]),i}(0,r.memo)((function(e){var t=e.children,n=Ei(e.options);return null!==n?t(n):null}));var Si={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},ki={options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},zIndex:function(e,t){e.setZIndex(t)}};(0,r.memo)((function(e){var t=e.children,n=e.anchor,i=e.options,o=e.position,a=e.zIndex,l=e.onCloseClick,u=e.onDomReady,c=e.onContentChanged,h=e.onPositionChanged,d=e.onZindexChanged,f=e.onLoad,p=e.onUnmount,g=(0,r.useContext)(er),m=(0,r.useState)(null),v=m[0],y=m[1],w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],D=(0,r.useState)(null),M=D[0],A=D[1],N=(0,r.useRef)(null);return(0,r.useEffect)((function(){null!==v&&(v.close(),n?v.open(g,n):v.getPosition()&&v.open(g))}),[g,v,n]),(0,r.useEffect)((function(){i&&null!==v&&v.setOptions(i)}),[v,i]),(0,r.useEffect)((function(){o&&null!==v&&v.setPosition(o)}),[o]),(0,r.useEffect)((function(){"number"===typeof a&&null!==v&&v.setZIndex(a)}),[a]),(0,r.useEffect)((function(){v&&l&&(null!==b&&google.maps.event.removeListener(b),_(google.maps.event.addListener(v,"closeclick",l)))}),[l]),(0,r.useEffect)((function(){v&&u&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(v,"domready",u)))}),[u]),(0,r.useEffect)((function(){v&&c&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(v,"content_changed",c)))}),[c]),(0,r.useEffect)((function(){v&&h&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(v,"position_changed",h)))}),[h]),(0,r.useEffect)((function(){v&&d&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(v,"zindex_changed",d)))}),[d]),(0,r.useEffect)((function(){var e=new google.maps.InfoWindow(Hn({},i||{}));return y(e),N.current=document.createElement("div"),l&&_(google.maps.event.addListener(e,"closeclick",l)),u&&k(google.maps.event.addListener(e,"domready",u)),c&&x(google.maps.event.addListener(e,"content_changed",c)),h&&P(google.maps.event.addListener(e,"position_changed",h)),d&&A(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(N.current),o&&e.setPosition(o),a&&e.setZIndex(a),n?e.open(g,n):e.getPosition()?e.open(g):Zn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),f&&f(e),function(){b&&google.maps.event.removeListener(b),I&&google.maps.event.removeListener(I),S&&google.maps.event.removeListener(S),L&&google.maps.event.removeListener(L),M&&google.maps.event.removeListener(M),p&&p(e),e.close()}}),[]),N.current?(0,s.createPortal)(r.Children.only(t),N.current):null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=null,t.state={infoWindow:null},t.open=function(e,n){n?e.open(t.context,n):e.getPosition()?e.open(t.context):Zn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},t.setInfoWindowCallback=function(){null!==t.state.infoWindow&&null!==t.containerElement&&(t.state.infoWindow.setContent(t.containerElement),t.open(t.state.infoWindow,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoWindow))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.InfoWindow(Hn({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=or({updaterMap:ki,eventMap:Si,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{infoWindow:e}}),this.setInfoWindowCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.infoWindow&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:ki,eventMap:Si,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))},t.prototype.componentWillUnmount=function(){null!==this.state.infoWindow&&(ir(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())},t.prototype.render=function(){return this.containerElement?(0,s.createPortal)(r.Children.only(this.props.children),this.containerElement):null},t.contextType=er}(r.PureComponent);var Ci={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Ii={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},visible:function(e,t){e.setVisible(t)}},xi={};(0,r.memo)((function(e){var t=e.options,n=e.draggable,i=e.editable,o=e.visible,s=e.path,a=e.onDblClick,l=e.onDragEnd,u=e.onDragStart,c=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,f=e.onMouseOver,p=e.onMouseUp,g=e.onRightClick,m=e.onClick,v=e.onDrag,y=e.onLoad,w=e.onUnmount,b=(0,r.useContext)(er),_=(0,r.useState)(null),E=_[0],S=_[1],k=(0,r.useState)(null),C=k[0],I=k[1],x=(0,r.useState)(null),T=x[0],L=x[1],P=(0,r.useState)(null),D=P[0],M=P[1],A=(0,r.useState)(null),N=A[0],O=A[1],R=(0,r.useState)(null),F=R[0],U=R[1],V=(0,r.useState)(null),z=V[0],B=V[1],j=(0,r.useState)(null),q=j[0],W=j[1],K=(0,r.useState)(null),G=K[0],H=K[1],Q=(0,r.useState)(null),Y=Q[0],X=Q[1],$=(0,r.useState)(null),J=$[0],Z=$[1],ee=(0,r.useState)(null),te=ee[0],ne=ee[1];return(0,r.useEffect)((function(){null!==E&&E.setMap(b)}),[b]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==E&&E.setOptions(t)}),[E,t]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==E&&E.setDraggable(n)}),[E,n]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==E&&E.setEditable(i)}),[E,i]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==E&&E.setVisible(o)}),[E,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==E&&E.setPath(s)}),[E,s]),(0,r.useEffect)((function(){E&&a&&(null!==C&&google.maps.event.removeListener(C),I(google.maps.event.addListener(E,"dblclick",a)))}),[a]),(0,r.useEffect)((function(){E&&l&&(null!==T&&google.maps.event.removeListener(T),L(google.maps.event.addListener(E,"dragend",l)))}),[l]),(0,r.useEffect)((function(){E&&u&&(null!==D&&google.maps.event.removeListener(D),M(google.maps.event.addListener(E,"dragstart",u)))}),[u]),(0,r.useEffect)((function(){E&&c&&(null!==N&&google.maps.event.removeListener(N),O(google.maps.event.addListener(E,"mousedown",c)))}),[c]),(0,r.useEffect)((function(){E&&h&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(E,"mousemove",h)))}),[h]),(0,r.useEffect)((function(){E&&d&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(E,"mouseout",d)))}),[d]),(0,r.useEffect)((function(){E&&f&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(E,"mouseover",f)))}),[f]),(0,r.useEffect)((function(){E&&p&&(null!==G&&google.maps.event.removeListener(G),H(google.maps.event.addListener(E,"mouseup",p)))}),[p]),(0,r.useEffect)((function(){E&&g&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(E,"rightclick",g)))}),[g]),(0,r.useEffect)((function(){E&&m&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(E,"click",m)))}),[m]),(0,r.useEffect)((function(){E&&v&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(E,"drag",v)))}),[v]),(0,r.useEffect)((function(){var e=new google.maps.Polyline(Hn(Hn({},t||xi),{map:b}));return s&&e.setPath(s),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),a&&I(google.maps.event.addListener(e,"dblclick",a)),l&&L(google.maps.event.addListener(e,"dragend",l)),u&&M(google.maps.event.addListener(e,"dragstart",u)),c&&O(google.maps.event.addListener(e,"mousedown",c)),h&&U(google.maps.event.addListener(e,"mousemove",h)),d&&B(google.maps.event.addListener(e,"mouseout",d)),f&&W(google.maps.event.addListener(e,"mouseover",f)),p&&H(google.maps.event.addListener(e,"mouseup",p)),g&&X(google.maps.event.addListener(e,"rightclick",g)),m&&Z(google.maps.event.addListener(e,"click",m)),v&&ne(google.maps.event.addListener(e,"drag",v)),S(e),y&&y(e),function(){null!==C&&google.maps.event.removeListener(C),null!==T&&google.maps.event.removeListener(T),null!==D&&google.maps.event.removeListener(D),null!==N&&google.maps.event.removeListener(N),null!==F&&google.maps.event.removeListener(F),null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==J&&google.maps.event.removeListener(J),w&&w(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={polyline:null},t.setPolylineCallback=function(){null!==t.state.polyline&&t.props.onLoad&&t.props.onLoad(t.state.polyline)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Polyline(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:Ii,eventMap:Ci,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.polyline&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Ii,eventMap:Ci,prevProps:e,nextProps:this.props,instance:this.state.polyline}))},t.prototype.componentWillUnmount=function(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ir(this.registeredEvents),this.state.polyline.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Ti={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Li={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},paths:function(e,t){e.setPaths(t)},visible:function(e,t){e.setVisible(t)}};(0,r.memo)((function(e){var t=e.options,n=e.draggable,i=e.editable,o=e.visible,s=e.path,a=e.paths,l=e.onDblClick,u=e.onDragEnd,c=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,f=e.onMouseOut,p=e.onMouseOver,g=e.onMouseUp,m=e.onRightClick,v=e.onClick,y=e.onDrag,w=e.onLoad,b=e.onUnmount,_=e.onEdit,E=(0,r.useContext)(er),S=(0,r.useState)(null),k=S[0],C=S[1],I=(0,r.useState)(null),x=I[0],T=I[1],L=(0,r.useState)(null),P=L[0],D=L[1],M=(0,r.useState)(null),A=M[0],N=M[1],O=(0,r.useState)(null),R=O[0],F=O[1],U=(0,r.useState)(null),V=U[0],z=U[1],B=(0,r.useState)(null),j=B[0],q=B[1],W=(0,r.useState)(null),K=W[0],G=W[1],H=(0,r.useState)(null),Q=H[0],Y=H[1],X=(0,r.useState)(null),$=X[0],J=X[1],Z=(0,r.useState)(null),ee=Z[0],te=Z[1],ne=(0,r.useState)(null),re=ne[0],ie=ne[1];return(0,r.useEffect)((function(){null!==k&&k.setMap(E)}),[E]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==k&&k.setOptions(t)}),[k,t]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==k&&k.setDraggable(n)}),[k,n]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==k&&k.setEditable(i)}),[k,i]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==k&&k.setVisible(o)}),[k,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==k&&k.setPath(s)}),[k,s]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==k&&k.setPaths(a)}),[k,a]),(0,r.useEffect)((function(){k&&l&&(null!==x&&google.maps.event.removeListener(x),T(google.maps.event.addListener(k,"dblclick",l)))}),[l]),(0,r.useEffect)((function(){k&&(google.maps.event.addListener(k.getPath(),"insert_at",(function(){null===_||void 0===_||_(k)})),google.maps.event.addListener(k.getPath(),"set_at",(function(){null===_||void 0===_||_(k)})))}),[k,_]),(0,r.useEffect)((function(){k&&u&&(null!==P&&google.maps.event.removeListener(P),D(google.maps.event.addListener(k,"dragend",u)))}),[u]),(0,r.useEffect)((function(){k&&c&&(null!==A&&google.maps.event.removeListener(A),N(google.maps.event.addListener(k,"dragstart",c)))}),[c]),(0,r.useEffect)((function(){k&&h&&(null!==R&&google.maps.event.removeListener(R),F(google.maps.event.addListener(k,"mousedown",h)))}),[h]),(0,r.useEffect)((function(){k&&d&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(k,"mousemove",d)))}),[d]),(0,r.useEffect)((function(){k&&f&&(null!==j&&google.maps.event.removeListener(j),q(google.maps.event.addListener(k,"mouseout",f)))}),[f]),(0,r.useEffect)((function(){k&&p&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(k,"mouseover",p)))}),[p]),(0,r.useEffect)((function(){k&&g&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(k,"mouseup",g)))}),[g]),(0,r.useEffect)((function(){k&&m&&(null!==$&&google.maps.event.removeListener($),J(google.maps.event.addListener(k,"rightclick",m)))}),[m]),(0,r.useEffect)((function(){k&&v&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(k,"click",v)))}),[v]),(0,r.useEffect)((function(){k&&y&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(k,"drag",y)))}),[y]),(0,r.useEffect)((function(){var e=new google.maps.Polygon(Hn(Hn({},t||{}),{map:E}));return s&&e.setPath(s),a&&e.setPaths(a),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),l&&T(google.maps.event.addListener(e,"dblclick",l)),u&&D(google.maps.event.addListener(e,"dragend",u)),c&&N(google.maps.event.addListener(e,"dragstart",c)),h&&F(google.maps.event.addListener(e,"mousedown",h)),d&&z(google.maps.event.addListener(e,"mousemove",d)),f&&q(google.maps.event.addListener(e,"mouseout",f)),p&&G(google.maps.event.addListener(e,"mouseover",p)),g&&Y(google.maps.event.addListener(e,"mouseup",g)),m&&J(google.maps.event.addListener(e,"rightclick",m)),v&&te(google.maps.event.addListener(e,"click",v)),y&&ie(google.maps.event.addListener(e,"drag",y)),C(e),w&&w(e),function(){null!==x&&google.maps.event.removeListener(x),null!==P&&google.maps.event.removeListener(P),null!==A&&google.maps.event.removeListener(A),null!==R&&google.maps.event.removeListener(R),null!==V&&google.maps.event.removeListener(V),null!==j&&google.maps.event.removeListener(j),null!==K&&google.maps.event.removeListener(K),null!==Q&&google.maps.event.removeListener(Q),null!==$&&google.maps.event.removeListener($),null!==ee&&google.maps.event.removeListener(ee),b&&b(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={polygon:null},t.setPolygonCallback=function(){null!==t.state.polygon&&t.props.onLoad&&t.props.onLoad(t.state.polygon)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Polygon(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:Li,eventMap:Ti,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polygon:e}}),this.setPolygonCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.polygon&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Li,eventMap:Ti,prevProps:e,nextProps:this.props,instance:this.state.polygon}))},t.prototype.componentWillUnmount=function(){null!==this.state.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),ir(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Pi={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Di={bounds:function(e,t){e.setBounds(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},visible:function(e,t){e.setVisible(t)}};(0,r.memo)((function(e){var t=e.options,n=e.bounds,i=e.draggable,o=e.editable,s=e.visible,a=e.onDblClick,l=e.onDragEnd,u=e.onDragStart,c=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,f=e.onMouseOver,p=e.onMouseUp,g=e.onRightClick,m=e.onClick,v=e.onDrag,y=e.onBoundsChanged,w=e.onLoad,b=e.onUnmount,_=(0,r.useContext)(er),E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],D=(0,r.useState)(null),M=D[0],A=D[1],N=(0,r.useState)(null),O=N[0],R=N[1],F=(0,r.useState)(null),U=F[0],V=F[1],z=(0,r.useState)(null),B=z[0],j=z[1],q=(0,r.useState)(null),W=q[0],K=q[1],G=(0,r.useState)(null),H=G[0],Q=G[1],Y=(0,r.useState)(null),X=Y[0],$=Y[1],J=(0,r.useState)(null),Z=J[0],ee=J[1],te=(0,r.useState)(null),ne=te[0],re=te[1],ie=(0,r.useState)(null),oe=ie[0],se=ie[1];return(0,r.useEffect)((function(){null!==S&&S.setMap(_)}),[_]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==S&&S.setOptions(t)}),[S,t]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==S&&S.setDraggable(i)}),[S,i]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==S&&S.setEditable(o)}),[S,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==S&&S.setVisible(s)}),[S,s]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==S&&S.setBounds(n)}),[S,n]),(0,r.useEffect)((function(){S&&a&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(S,"dblclick",a)))}),[a]),(0,r.useEffect)((function(){S&&l&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(S,"dragend",l)))}),[l]),(0,r.useEffect)((function(){S&&u&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(S,"dragstart",u)))}),[u]),(0,r.useEffect)((function(){S&&c&&(null!==O&&google.maps.event.removeListener(O),R(google.maps.event.addListener(S,"mousedown",c)))}),[c]),(0,r.useEffect)((function(){S&&h&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(S,"mousemove",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(S,"mouseout",d)))}),[d]),(0,r.useEffect)((function(){S&&f&&(null!==W&&google.maps.event.removeListener(W),K(google.maps.event.addListener(S,"mouseover",f)))}),[f]),(0,r.useEffect)((function(){S&&p&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(S,"mouseup",p)))}),[p]),(0,r.useEffect)((function(){S&&g&&(null!==X&&google.maps.event.removeListener(X),$(google.maps.event.addListener(S,"rightclick",g)))}),[g]),(0,r.useEffect)((function(){S&&m&&(null!==Z&&google.maps.event.removeListener(Z),ee(google.maps.event.addListener(S,"click",m)))}),[m]),(0,r.useEffect)((function(){S&&v&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(S,"drag",v)))}),[v]),(0,r.useEffect)((function(){S&&y&&(null!==oe&&google.maps.event.removeListener(oe),se(google.maps.event.addListener(S,"bounds_changed",y)))}),[y]),(0,r.useEffect)((function(){var e=new google.maps.Rectangle(Hn(Hn({},t||{}),{map:_}));return"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof o&&e.setEditable(o),"undefined"!==typeof i&&e.setDraggable(i),"undefined"!==typeof n&&e.setBounds(n),a&&x(google.maps.event.addListener(e,"dblclick",a)),l&&P(google.maps.event.addListener(e,"dragend",l)),u&&A(google.maps.event.addListener(e,"dragstart",u)),c&&R(google.maps.event.addListener(e,"mousedown",c)),h&&V(google.maps.event.addListener(e,"mousemove",h)),d&&j(google.maps.event.addListener(e,"mouseout",d)),f&&K(google.maps.event.addListener(e,"mouseover",f)),p&&Q(google.maps.event.addListener(e,"mouseup",p)),g&&$(google.maps.event.addListener(e,"rightclick",g)),m&&ee(google.maps.event.addListener(e,"click",m)),v&&re(google.maps.event.addListener(e,"drag",v)),y&&se(google.maps.event.addListener(e,"bounds_changed",y)),k(e),w&&w(e),function(){null!==I&&google.maps.event.removeListener(I),null!==L&&google.maps.event.removeListener(L),null!==M&&google.maps.event.removeListener(M),null!==O&&google.maps.event.removeListener(O),null!==U&&google.maps.event.removeListener(U),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==H&&google.maps.event.removeListener(H),null!==X&&google.maps.event.removeListener(X),null!==Z&&google.maps.event.removeListener(Z),null!==ne&&google.maps.event.removeListener(ne),null!==oe&&google.maps.event.removeListener(oe),b&&b(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={rectangle:null},t.setRectangleCallback=function(){null!==t.state.rectangle&&t.props.onLoad&&t.props.onLoad(t.state.rectangle)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Rectangle(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:Di,eventMap:Pi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.rectangle&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Di,eventMap:Pi,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))},t.prototype.componentWillUnmount=function(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ir(this.registeredEvents),this.state.rectangle.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Mi={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Ai={center:function(e,t){e.setCenter(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},radius:function(e,t){e.setRadius(t)},visible:function(e,t){e.setVisible(t)}},Ni={};(0,r.memo)((function(e){var t=e.options,n=e.center,i=e.radius,o=e.draggable,s=e.editable,a=e.visible,l=e.onDblClick,u=e.onDragEnd,c=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,f=e.onMouseOut,p=e.onMouseOver,g=e.onMouseUp,m=e.onRightClick,v=e.onClick,y=e.onDrag,w=e.onCenterChanged,b=e.onRadiusChanged,_=e.onLoad,E=e.onUnmount,S=(0,r.useContext)(er),k=(0,r.useState)(null),C=k[0],I=k[1],x=(0,r.useState)(null),T=x[0],L=x[1],P=(0,r.useState)(null),D=P[0],M=P[1],A=(0,r.useState)(null),N=A[0],O=A[1],R=(0,r.useState)(null),F=R[0],U=R[1],V=(0,r.useState)(null),z=V[0],B=V[1],j=(0,r.useState)(null),q=j[0],W=j[1],K=(0,r.useState)(null),G=K[0],H=K[1],Q=(0,r.useState)(null),Y=Q[0],X=Q[1],$=(0,r.useState)(null),J=$[0],Z=$[1],ee=(0,r.useState)(null),te=ee[0],ne=ee[1],re=(0,r.useState)(null),ie=re[0],oe=re[1],se=(0,r.useState)(null),ae=se[0],le=se[1],ue=(0,r.useState)(null),ce=ue[0],he=ue[1];return(0,r.useEffect)((function(){null!==C&&C.setMap(S)}),[S]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==C&&C.setOptions(t)}),[C,t]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==C&&C.setDraggable(o)}),[C,o]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==C&&C.setEditable(s)}),[C,s]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==C&&C.setVisible(a)}),[C,a]),(0,r.useEffect)((function(){"number"===typeof i&&null!==C&&C.setRadius(i)}),[C,i]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==C&&C.setCenter(n)}),[C,n]),(0,r.useEffect)((function(){C&&l&&(null!==T&&google.maps.event.removeListener(T),L(google.maps.event.addListener(C,"dblclick",l)))}),[l]),(0,r.useEffect)((function(){C&&u&&(null!==D&&google.maps.event.removeListener(D),M(google.maps.event.addListener(C,"dragend",u)))}),[u]),(0,r.useEffect)((function(){C&&c&&(null!==N&&google.maps.event.removeListener(N),O(google.maps.event.addListener(C,"dragstart",c)))}),[c]),(0,r.useEffect)((function(){C&&h&&(null!==F&&google.maps.event.removeListener(F),U(google.maps.event.addListener(C,"mousedown",h)))}),[h]),(0,r.useEffect)((function(){C&&d&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(C,"mousemove",d)))}),[d]),(0,r.useEffect)((function(){C&&f&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(C,"mouseout",f)))}),[f]),(0,r.useEffect)((function(){C&&p&&(null!==G&&google.maps.event.removeListener(G),H(google.maps.event.addListener(C,"mouseover",p)))}),[p]),(0,r.useEffect)((function(){C&&g&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(C,"mouseup",g)))}),[g]),(0,r.useEffect)((function(){C&&m&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(C,"rightclick",m)))}),[m]),(0,r.useEffect)((function(){C&&v&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(C,"click",v)))}),[v]),(0,r.useEffect)((function(){C&&y&&(null!==ie&&google.maps.event.removeListener(ie),oe(google.maps.event.addListener(C,"drag",y)))}),[y]),(0,r.useEffect)((function(){C&&w&&(null!==ae&&google.maps.event.removeListener(ae),le(google.maps.event.addListener(C,"center_changed",w)))}),[v]),(0,r.useEffect)((function(){C&&b&&(null!==ce&&google.maps.event.removeListener(ce),he(google.maps.event.addListener(C,"radius_changed",b)))}),[b]),(0,r.useEffect)((function(){var e=new google.maps.Circle(Hn(Hn({},t||Ni),{map:S}));return"number"===typeof i&&e.setRadius(i),"undefined"!==typeof n&&e.setCenter(n),"number"===typeof i&&e.setRadius(i),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof o&&e.setDraggable(o),l&&L(google.maps.event.addListener(e,"dblclick",l)),u&&M(google.maps.event.addListener(e,"dragend",u)),c&&O(google.maps.event.addListener(e,"dragstart",c)),h&&U(google.maps.event.addListener(e,"mousedown",h)),d&&B(google.maps.event.addListener(e,"mousemove",d)),f&&W(google.maps.event.addListener(e,"mouseout",f)),p&&H(google.maps.event.addListener(e,"mouseover",p)),g&&X(google.maps.event.addListener(e,"mouseup",g)),m&&Z(google.maps.event.addListener(e,"rightclick",m)),v&&ne(google.maps.event.addListener(e,"click",v)),y&&oe(google.maps.event.addListener(e,"drag",y)),w&&le(google.maps.event.addListener(e,"center_changed",w)),b&&he(google.maps.event.addListener(e,"radius_changed",b)),I(e),_&&_(e),function(){null!==T&&google.maps.event.removeListener(T),null!==D&&google.maps.event.removeListener(D),null!==N&&google.maps.event.removeListener(N),null!==F&&google.maps.event.removeListener(F),null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==J&&google.maps.event.removeListener(J),null!==te&&google.maps.event.removeListener(te),null!==ae&&google.maps.event.removeListener(ae),null!==ce&&google.maps.event.removeListener(ce),E&&E(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={circle:null},t.setCircleCallback=function(){null!==t.state.circle&&t.props.onLoad&&t.props.onLoad(t.state.circle)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Circle(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:Ai,eventMap:Mi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.circle&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Ai,eventMap:Mi,prevProps:e,nextProps:this.props,instance:this.state.circle}))},t.prototype.componentWillUnmount=function(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ir(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Oi={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},Ri={add:function(e,t){e.add(t)},addgeojson:function(e,t,n){e.addGeoJson(t,n)},contains:function(e,t){e.contains(t)},foreach:function(e,t){e.forEach(t)},loadgeojson:function(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle:function(e,t,n){e.overrideStyle(t,n)},remove:function(e,t){e.remove(t)},revertstyle:function(e,t){e.revertStyle(t)},controlposition:function(e,t){e.setControlPosition(t)},controls:function(e,t){e.setControls(t)},drawingmode:function(e,t){e.setDrawingMode(t)},map:function(e,t){e.setMap(t)},style:function(e,t){e.setStyle(t)},togeojson:function(e,t){e.toGeoJson(t)}};(0,r.memo)((function(e){var t=e.options,n=e.onClick,i=e.onDblClick,o=e.onMouseDown,s=e.onMouseMove,a=e.onMouseOut,l=e.onMouseOver,u=e.onMouseUp,c=e.onRightClick,h=e.onAddFeature,d=e.onRemoveFeature,f=e.onRemoveProperty,p=e.onSetGeometry,g=e.onSetProperty,m=e.onLoad,v=e.onUnmount,y=(0,r.useContext)(er),w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],D=(0,r.useState)(null),M=D[0],A=D[1],N=(0,r.useState)(null),O=N[0],R=N[1],F=(0,r.useState)(null),U=F[0],V=F[1],z=(0,r.useState)(null),B=z[0],j=z[1],q=(0,r.useState)(null),W=q[0],K=q[1],G=(0,r.useState)(null),H=G[0],Q=G[1],Y=(0,r.useState)(null),X=Y[0],$=Y[1],J=(0,r.useState)(null),Z=J[0],ee=J[1],te=(0,r.useState)(null),ne=te[0],re=te[1],ie=(0,r.useState)(null),oe=ie[0],se=ie[1];return(0,r.useEffect)((function(){null!==b&&b.setMap(y)}),[y]),(0,r.useEffect)((function(){b&&i&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(b,"dblclick",i)))}),[i]),(0,r.useEffect)((function(){b&&o&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(b,"mousedown",o)))}),[o]),(0,r.useEffect)((function(){b&&s&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(b,"mousemove",s)))}),[s]),(0,r.useEffect)((function(){b&&a&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(b,"mouseout",a)))}),[a]),(0,r.useEffect)((function(){b&&l&&(null!==O&&google.maps.event.removeListener(O),R(google.maps.event.addListener(b,"mouseover",l)))}),[l]),(0,r.useEffect)((function(){b&&u&&(null!==U&&google.maps.event.removeListener(U),V(google.maps.event.addListener(b,"mouseup",u)))}),[u]),(0,r.useEffect)((function(){b&&c&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(b,"rightclick",c)))}),[c]),(0,r.useEffect)((function(){b&&n&&(null!==W&&google.maps.event.removeListener(W),K(google.maps.event.addListener(b,"click",n)))}),[n]),(0,r.useEffect)((function(){b&&h&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(b,"addfeature",h)))}),[h]),(0,r.useEffect)((function(){b&&d&&(null!==X&&google.maps.event.removeListener(X),$(google.maps.event.addListener(b,"removefeature",d)))}),[d]),(0,r.useEffect)((function(){b&&f&&(null!==Z&&google.maps.event.removeListener(Z),ee(google.maps.event.addListener(b,"removeproperty",f)))}),[f]),(0,r.useEffect)((function(){b&&p&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(b,"setgeometry",p)))}),[p]),(0,r.useEffect)((function(){b&&g&&(null!==oe&&google.maps.event.removeListener(oe),se(google.maps.event.addListener(b,"setproperty",g)))}),[g]),(0,r.useEffect)((function(){if(null!==y){var e=new google.maps.Data(Hn(Hn({},t||{}),{map:y}));i&&k(google.maps.event.addListener(e,"dblclick",i)),o&&x(google.maps.event.addListener(e,"mousedown",o)),s&&P(google.maps.event.addListener(e,"mousemove",s)),a&&A(google.maps.event.addListener(e,"mouseout",a)),l&&R(google.maps.event.addListener(e,"mouseover",l)),u&&V(google.maps.event.addListener(e,"mouseup",u)),c&&j(google.maps.event.addListener(e,"rightclick",c)),n&&K(google.maps.event.addListener(e,"click",n)),h&&Q(google.maps.event.addListener(e,"addfeature",h)),d&&$(google.maps.event.addListener(e,"removefeature",d)),f&&ee(google.maps.event.addListener(e,"removeproperty",f)),p&&re(google.maps.event.addListener(e,"setgeometry",p)),g&&se(google.maps.event.addListener(e,"setproperty",g)),_(e),m&&m(e)}return function(){b&&(null!==S&&google.maps.event.removeListener(S),null!==I&&google.maps.event.removeListener(I),null!==L&&google.maps.event.removeListener(L),null!==M&&google.maps.event.removeListener(M),null!==O&&google.maps.event.removeListener(O),null!==U&&google.maps.event.removeListener(U),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==H&&google.maps.event.removeListener(H),null!==X&&google.maps.event.removeListener(X),null!==Z&&google.maps.event.removeListener(Z),null!==ne&&google.maps.event.removeListener(ne),null!==oe&&google.maps.event.removeListener(oe),v&&v(b),b.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={data:null},t.setDataCallback=function(){null!==t.state.data&&t.props.onLoad&&t.props.onLoad(t.state.data)},t}Gn(t,e),t.prototype.componentDidMount=function(){if(null!==this.context){var e=new google.maps.Data(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=or({updaterMap:Ri,eventMap:Oi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{data:e}}),this.setDataCallback)}},t.prototype.componentDidUpdate=function(e){null!==this.state.data&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Ri,eventMap:Oi,prevProps:e,nextProps:this.props,instance:this.state.data}))},t.prototype.componentWillUnmount=function(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ir(this.registeredEvents),this.state.data&&this.state.data.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Fi={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},Ui={options:function(e,t){e.setOptions(t)},url:function(e,t){e.setUrl(t)},zIndex:function(e,t){e.setZIndex(t)}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={kmlLayer:null},t.setKmlLayerCallback=function(){null!==t.state.kmlLayer&&t.props.onLoad&&t.props.onLoad(t.state.kmlLayer)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.KmlLayer(Hn(Hn({},this.props.options),{map:this.context}));this.registeredEvents=or({updaterMap:Ui,eventMap:Fi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.kmlLayer&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Ui,eventMap:Fi,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))},t.prototype.componentWillUnmount=function(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ir(this.registeredEvents),this.state.kmlLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);function Vi(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function zi(e,t){return new t(e.lat,e.lng)}function Bi(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function ji(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),i=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-i.x-t.x,"px"),height:"".concat(i.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(i=n,o=google.maps.LatLngBounds,s=Bi,i instanceof o?i:s(i,o))):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var i=r.x,o=r.y;return{left:"".concat(i+t.x,"px"),top:"".concat(o+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,zi));var i,o,s}function qi(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function Wi(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}(0,r.memo)((function(e){var t=e.position,n=e.bounds,i=e.mapPaneName,o=e.zIndex,a=e.onLoad,l=e.onUnmount,u=e.getPixelPositionOffset,c=e.children,h=(0,r.useContext)(er),d=(0,r.useMemo)((function(){var e=document.createElement("div");return e.style.position="absolute",e}),[]),f=(0,r.useMemo)((function(){return function(e,t,n,r,i){var o=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.container=t,o.pane=n,o.position=r,o.bounds=i,o}return Gn(t,e),t.prototype.onAdd=function(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)},t.prototype.draw=function(){for(var e=ji(this.getProjection(),Hn({},this.container?Vi(this.container,i):{x:0,y:0}),this.bounds,this.position),t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],o=r[0],s=r[1];this.container.style[o]=s}},t.prototype.onRemove=function(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)},t}(google.maps.OverlayView);return new o(e,t,n,r)}(d,i,t,n,u)}),[d,i,t,n]);return(0,r.useEffect)((function(){return null===a||void 0===a||a(f),null===f||void 0===f||f.setMap(h),function(){null===l||void 0===l||l(f),null===f||void 0===f||f.setMap(null)}}),[h,f]),(0,r.useEffect)((function(){d.style.zIndex="".concat(o)}),[o,d]),s.createPortal(c,d)})),function(e){function t(t){var n=e.call(this,t)||this;n.state={paneEl:null,containerStyle:{position:"absolute"}},n.updatePane=function(){var e=n.props.mapPaneName,t=n.overlayView.getPanes();Zn(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?n.setState({paneEl:t[e]}):n.setState({paneEl:null})},n.onAdd=function(){var e,t;n.updatePane(),null===(t=(e=n.props).onLoad)||void 0===t||t.call(e,n.overlayView)},n.onPositionElement=function(){var e,t,r=ji(n.overlayView.getProjection(),Hn({x:0,y:0},n.containerRef.current?Vi(n.containerRef.current,n.props.getPixelPositionOffset):{}),n.props.bounds,n.props.position),i=n.state.containerStyle,o=i.left,s=i.top,a=i.width,l=i.height;t={left:o,top:s,width:a,height:l},((e=r).left!==t.left||e.top!==t.top||e.width!==t.height||e.height!==t.height)&&n.setState({containerStyle:{top:r.top||0,left:r.left||0,width:r.width||0,height:r.height||0,position:"absolute"}})},n.draw=function(){n.onPositionElement()},n.onRemove=function(){var e,t;n.setState((function(){return{paneEl:null}})),null===(t=(e=n.props).onUnmount)||void 0===t||t.call(e,n.overlayView)},n.containerRef=(0,r.createRef)();var i=new google.maps.OverlayView;return i.onAdd=n.onAdd,i.draw=n.draw,i.onRemove=n.onRemove,n.overlayView=i,n}Gn(t,e),t.prototype.componentDidMount=function(){this.overlayView.setMap(this.context)},t.prototype.componentDidUpdate=function(e){var t=qi(e.position),n=qi(this.props.position),r=Wi(e.bounds),i=Wi(this.props.bounds);t===n&&r===i||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()},t.prototype.componentWillUnmount=function(){this.overlayView.setMap(null)},t.prototype.render=function(){var e=this.state.paneEl;return e?s.createPortal((0,Wn.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:r.Children.only(this.props.children)}),e):null},t.FLOAT_PANE="floatPane",t.MAP_PANE="mapPane",t.MARKER_LAYER="markerLayer",t.OVERLAY_LAYER="overlayLayer",t.OVERLAY_MOUSE_TARGET="overlayMouseTarget",t.contextType=er}(r.PureComponent);function Ki(){}var Gi={onDblClick:"dblclick",onClick:"click"},Hi={opacity:function(e,t){e.setOpacity(t)}};(0,r.memo)((function(e){var t=e.url,n=e.bounds,i=e.options,o=e.visible,s=(0,r.useContext)(er),a=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),l=(0,r.useMemo)((function(){return new google.maps.GroundOverlay(t,a,Hn({},i))}),[]);return(0,r.useEffect)((function(){null!==l&&l.setMap(s)}),[s]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==l&&(l.set("url",t),l.setMap(s))}),[l,t]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==l&&l.setOpacity(o?1:0)}),[l,o]),(0,r.useEffect)((function(){var e=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));"undefined"!==typeof n&&null!==l&&(l.set("bounds",e),l.setMap(s))}),[l,n]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={groundOverlay:null},t.setGroundOverlayCallback=function(){null!==t.state.groundOverlay&&t.props.onLoad&&t.props.onLoad(t.state.groundOverlay)},t}Gn(t,e),t.prototype.componentDidMount=function(){Zn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Hn(Hn({},this.props.options),{map:this.context}));this.registeredEvents=or({updaterMap:Hi,eventMap:Gi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.groundOverlay&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Hi,eventMap:Gi,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))},t.prototype.componentWillUnmount=function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))},t.prototype.render=function(){return null},t.defaultProps={onLoad:Ki},t.contextType=er}(r.PureComponent);var Qi={},Yi={data:function(e,t){e.setData(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.data,n=e.onLoad,i=e.onUnmount,o=e.options,s=(0,r.useContext)(er),a=(0,r.useState)(null),l=a[0],u=a[1];return(0,r.useEffect)((function(){google.maps.visualization||Zn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,r.useEffect)((function(){Zn(!!t,"data property is required in HeatmapLayer %s",t)}),[t]),(0,r.useEffect)((function(){null!==l&&l.setMap(s)}),[s]),(0,r.useEffect)((function(){o&&null!==l&&l.setOptions(o)}),[l,o]),(0,r.useEffect)((function(){var e=new google.maps.visualization.HeatmapLayer(Hn(Hn({},o||{}),{data:t,map:s}));return u(e),n&&n(e),function(){null!==l&&(i&&i(l),l.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={heatmapLayer:null},t.setHeatmapLayerCallback=function(){null!==t.state.heatmapLayer&&t.props.onLoad&&t.props.onLoad(t.state.heatmapLayer)},t}Gn(t,e),t.prototype.componentDidMount=function(){Zn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Zn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Hn(Hn({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=or({updaterMap:Yi,eventMap:Qi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)},t.prototype.componentDidUpdate=function(e){ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Yi,eventMap:Qi,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})},t.prototype.componentWillUnmount=function(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ir(this.registeredEvents),this.state.heatmapLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Xi={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},$i={register:function(e,t,n){e.registerPanoProvider(t,n)},links:function(e,t){e.setLinks(t)},motionTracking:function(e,t){e.setMotionTracking(t)},options:function(e,t){e.setOptions(t)},pano:function(e,t){e.setPano(t)},position:function(e,t){e.setPosition(t)},pov:function(e,t){e.setPov(t)},visible:function(e,t){e.setVisible(t)},zoom:function(e,t){e.setZoom(t)}},Ji=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={streetViewPanorama:null},t.setStreetViewPanoramaCallback=function(){null!==t.state.streetViewPanorama&&t.props.onLoad&&t.props.onLoad(t.state.streetViewPanorama)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e,t,n=null!==(t=null===(e=this.context)||void 0===e?void 0:e.getStreetView())&&void 0!==t?t:null;this.registeredEvents=or({updaterMap:$i,eventMap:Xi,prevProps:{},nextProps:this.props,instance:n}),this.setState((function(){return{streetViewPanorama:n}}),this.setStreetViewPanoramaCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.streetViewPanorama&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:$i,eventMap:Xi,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))},t.prototype.componentWillUnmount=function(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ir(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={streetViewService:null},t.setStreetViewServiceCallback=function(){null!==t.state.streetViewService&&t.props.onLoad&&t.props.onLoad(t.state.streetViewService)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={directionsService:null},t.setDirectionsServiceCallback=function(){null!==t.state.directionsService&&t.props.onLoad&&t.props.onLoad(t.state.directionsService)},t}Gn(t,e),t.prototype.componentDidMount=function(){Zn(!!this.props.options,"DirectionsService expected options object as parameter, but got %s",this.props.options);var e=new google.maps.DirectionsService;this.setState((function(){return{directionsService:e}}),this.setDirectionsServiceCallback)},t.prototype.componentDidUpdate=function(){null!==this.state.directionsService&&this.state.directionsService.route(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){null!==this.state.directionsService&&this.props.onUnmount&&this.props.onUnmount(this.state.directionsService)},t.prototype.render=function(){return null}}(r.PureComponent),{onDirectionsChanged:"directions_changed"}),Zi={directions:function(e,t){e.setDirections(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},panel:function(e,t){e.setPanel(t)},routeIndex:function(e,t){e.setRouteIndex(t)}},eo=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={directionsRenderer:null},t.setDirectionsRendererCallback=function(){null!==t.state.directionsRenderer&&(t.state.directionsRenderer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.directionsRenderer))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=or({updaterMap:Zi,eventMap:Ji,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.directionsRenderer&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:Zi,eventMap:Ji,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))},t.prototype.componentWillUnmount=function(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ir(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))},t.prototype.render=function(){return(0,Wn.jsx)(Wn.Fragment,{})},t.contextType=er}(r.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={distanceMatrixService:null},t.setDistanceMatrixServiceCallback=function(){null!==t.state.distanceMatrixService&&t.props.onLoad&&t.props.onLoad(t.state.distanceMatrixService)},t}Gn(t,e),t.prototype.componentDidMount=function(){Zn(!!this.props.options,"DistanceMatrixService expected options object as parameter, but go %s",this.props.options);var e=new google.maps.DistanceMatrixService;this.setState((function(){return{distanceMatrixService:e}}),this.setDistanceMatrixServiceCallback)},t.prototype.componentDidUpdate=function(){null!==this.state.distanceMatrixService&&this.state.distanceMatrixService.getDistanceMatrix(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){null!==this.state.distanceMatrixService&&this.props.onUnmount&&this.props.onUnmount(this.state.distanceMatrixService)},t.prototype.render=function(){return null}}(r.PureComponent),{onPlacesChanged:"places_changed"}),to={bounds:function(e,t){e.setBounds(t)}},no=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=(0,r.createRef)(),t.state={searchBox:null},t.setSearchBoxCallback=function(){null!==t.state.searchBox&&t.props.onLoad&&t.props.onLoad(t.state.searchBox)},t}Gn(t,e),t.prototype.componentDidMount=function(){if(Zn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=or({updaterMap:to,eventMap:eo,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}},t.prototype.componentDidUpdate=function(e){null!==this.state.searchBox&&(ir(this.registeredEvents),this.registeredEvents=or({updaterMap:to,eventMap:eo,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))},t.prototype.componentWillUnmount=function(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ir(this.registeredEvents))},t.prototype.render=function(){return(0,Wn.jsx)("div",{ref:this.containerElement,children:r.Children.only(this.props.children)})},t.contextType=er}(r.PureComponent),{onPlaceChanged:"place_changed"}),ro={bounds:function(e,t){e.setBounds(t)},restrictions:function(e,t){e.setComponentRestrictions(t)},fields:function(e,t){e.setFields(t)},options:function(e,t){e.setOptions(t)},types:function(e,t){e.setTypes(t)}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=(0,r.createRef)(),t.state={autocomplete:null},t.setAutocompleteCallback=function(){null!==t.state.autocomplete&&t.props.onLoad&&t.props.onLoad(t.state.autocomplete)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e;Zn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var n=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=or({updaterMap:ro,eventMap:no,prevProps:{},nextProps:this.props,instance:n}),this.setState((function(){return{autocomplete:n}}),this.setAutocompleteCallback)}},t.prototype.componentDidUpdate=function(e){ir(this.registeredEvents),this.registeredEvents=or({updaterMap:ro,eventMap:no,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})},t.prototype.componentWillUnmount=function(){null!==this.state.autocomplete&&ir(this.registeredEvents)},t.prototype.render=function(){return(0,Wn.jsx)("div",{ref:this.containerElement,className:this.props.className,children:r.Children.only(this.props.children)})},t.defaultProps={className:""},t.contextType=er}(r.PureComponent);const io=["places"],oo={width:"50vw",height:"50vh",margin:"auto"},so={lat:0,lng:0},ao=e=>{let{markers:t,onMapClick:n,onMarkerDragEnd:r,onDeleteAllMarkers:i,deleteOneMarker:o}=e;const{isLoaded:s,loadError:a}=yr({googleMapsApiKey:"AIzaSyCaxLx9eKvm5uf-y_Ny6UquJsOLXDKcvvA",libraries:io});return a?(0,Wn.jsx)("div",{children:"Error loading maps"}):s?(0,Wn.jsx)(lr,{mapContainerStyle:oo,zoom:8,center:so,onClick:n,children:t.map(((e,t)=>(0,Wn.jsx)(Tr,{label:t.toString(),position:{lat:e.lat,lng:e.lng},draggable:!0,onDragEnd:e=>r(t,e),onClick:()=>o(t)},t)))}):(0,Wn.jsx)("div",{children:"Loading maps"})},lo=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(lo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new co;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class co extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ho=function(e){return function(e){const t=lo(e);return uo.encodeByteArray(t,!0)}(e).replace(/\./g,"")},fo=function(e){try{return uo.decodeString(e,!0)}catch($I){console.error("base64Decode failed: ",$I)}return null};function po(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=po(e[n],t[n]));return e}const go=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,mo=()=>{try{return go()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/google-maps-react-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyApqxmExbGqE8ejAxDlLA0rV7ccN7fUsdA",REACT_APP_APP_ID:"1:688383032028:web:82c59783c4b8791ea6d219",REACT_APP_AUTH_DOMAIN:"maps-react-app-84ddd.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"688383032028",REACT_APP_PROJECT_ID:"maps-react-app-84ddd",REACT_APP_STORAGE_BUCKET:"maps-react-app-84ddd.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch($I){return}const t=e&&fo(e[1]);return t&&JSON.parse(t)})()}catch($I){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat($I))}},vo=e=>{var t,n;return null===(n=null===(t=mo())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},yo=()=>{var e;return null===(e=mo())||void 0===e?void 0:e.config},wo=e=>{var t;return null===(t=mo())||void 0===t?void 0:t["_".concat(e)]};class bo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function _o(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Eo(){return!function(){var e;const t=null===(e=mo())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch($I){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function So(){try{return"object"===typeof indexedDB}catch($I){return!1}}class ko extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Co.prototype.create)}}class Co{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Io,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new ko(n,o,t)}}const Io=/\{\$([^}]+)}/g;function xo(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function To(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(Lo(n)&&Lo(o)){if(!To(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lo(e){return null!==e&&"object"===typeof e}function Po(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Do(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Mo(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ao(e,t){const n=new No(e,t);return n.subscribe.bind(n)}class No{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Oo),void 0===r.error&&(r.error=Oo),void 0===r.complete&&(r.complete=Oo);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch($I){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch($I){"undefined"!==typeof console&&console.error&&console.error($I)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Oo(){}function Ro(e){return e&&e._delegate?e._delegate:e}class Fo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Uo="[DEFAULT]";class Vo{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new bo;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch($I){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch($I){if(r)return null;throw $I}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Uo})}catch($I){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch($I){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uo;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uo;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uo;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Uo?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uo;return this.component?this.component.multipleInstances?e:Uo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class zo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Vo(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Bo=[];var jo;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(jo||(jo={}));const qo={debug:jo.DEBUG,verbose:jo.VERBOSE,info:jo.INFO,warn:jo.WARN,error:jo.ERROR,silent:jo.SILENT},Wo=jo.INFO,Ko={[jo.DEBUG]:"log",[jo.VERBOSE]:"log",[jo.INFO]:"info",[jo.WARN]:"warn",[jo.ERROR]:"error"},Go=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ko[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Ho{constructor(e){this.name=e,this._logLevel=Wo,this._logHandler=Go,this._userLogHandler=null,Bo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in jo))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?qo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jo.DEBUG,...t),this._logHandler(this,jo.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jo.VERBOSE,...t),this._logHandler(this,jo.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jo.INFO,...t),this._logHandler(this,jo.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jo.WARN,...t),this._logHandler(this,jo.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,jo.ERROR,...t),this._logHandler(this,jo.ERROR,...t)}}const Qo=(e,t)=>t.some((t=>e instanceof t));let Yo,Xo;const $o=new WeakMap,Jo=new WeakMap,Zo=new WeakMap,es=new WeakMap,ts=new WeakMap;let ns={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Jo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Zo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function rs(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Xo||(Xo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ss(this),n),os($o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return os(e.apply(ss(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(ss(this),t,...r);return Zo.set(o,t.sort?t.sort():[t]),os(o)}}function is(e){return"function"===typeof e?rs(e):(e instanceof IDBTransaction&&function(e){if(Jo.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Jo.set(e,t)}(e),Qo(e,Yo||(Yo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ns):e)}function os(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(os(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&$o.set(t,e)})).catch((()=>{})),ts.set(t,e),t}(e);if(es.has(e))return es.get(e);const t=is(e);return t!==e&&(es.set(e,t),ts.set(t,e)),t}const ss=e=>ts.get(e);const as=["get","getKey","getAll","getAllKeys","count"],ls=["put","add","delete","clear"],us=new Map;function cs(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(us.get(t))return us.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ls.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!as.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return us.set(t,o),o}ns=(e=>({...e,get:(t,n,r)=>cs(t,n)||e.get(t,n,r),has:(t,n)=>!!cs(t,n)||e.has(t,n)}))(ns);class hs{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ds="@firebase/app",fs="0.9.28",ps=new Ho("@firebase/app"),gs="[DEFAULT]",ms={[ds]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vs=new Map,ys=new Map;function ws(e,t){try{e.container.addComponent(t)}catch($I){ps.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),$I)}}function bs(e,t){e.container.addOrOverwriteComponent(t)}function _s(e){const t=e.name;if(ys.has(t))return ps.debug("There were multiple attempts to register component ".concat(t,".")),!1;ys.set(t,e);for(const n of vs.values())ws(n,e);return!0}function Es(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ss(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gs;Es(e,t).clearInstance(n)}function ks(){ys.clear()}const Cs=new Co("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Is{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Fo("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cs.create("app-deleted",{appName:this._name})}}const xs="10.8.1";function Ts(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:gs,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Cs.create("bad-app-name",{appName:String(i)});if(n||(n=yo()),!n)throw Cs.create("no-options");const o=vs.get(i);if(o){if(To(n,o.options)&&To(r,o.config))return o;throw Cs.create("duplicate-app",{appName:i})}const s=new zo(i);for(const l of ys.values())s.addComponent(l);const a=new Is(n,r,s);return vs.set(i,a),a}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gs;const t=vs.get(e);if(!t&&e===gs&&yo())return Ts();if(!t)throw Cs.create("no-app",{appName:e});return t}function Ps(){return Array.from(vs.values())}async function Ds(e){const t=e.name;vs.has(t)&&(vs.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Ms(e,t,n){var r;let i=null!==(r=ms[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ps.warn(e.join(" "))}_s(new Fo("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function As(e,t){if(null!==e&&"function"!==typeof e)throw Cs.create("invalid-log-argument");!function(e,t){for(const n of Bo){let r=null;t&&t.level&&(r=qo[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:jo[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function Ns(e){var t;t=e,Bo.forEach((e=>{e.setLogLevel(t)}))}const Os="firebase-heartbeat-database",Rs=1,Fs="firebase-heartbeat-store";let Us=null;function Vs(){return Us||(Us=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=os(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(os(s.result),e.oldVersion,e.newVersion,os(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Os,Rs,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Fs)}catch($I){console.warn($I)}}}).catch((e=>{throw Cs.create("idb-open",{originalErrorMessage:e.message})}))),Us}async function zs(e,t){try{const n=(await Vs()).transaction(Fs,"readwrite"),r=n.objectStore(Fs);await r.put(t,Bs(e)),await n.done}catch($I){if($I instanceof ko)ps.warn($I.message);else{const t=Cs.create("idb-set",{originalErrorMessage:null===$I||void 0===$I?void 0:$I.message});ps.warn(t.message)}}}function Bs(e){return"".concat(e.name,"!").concat(e.options.appId)}class js{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ws(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=qs();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=qs(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ks(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ks(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ho(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function qs(){return(new Date).toISOString().substring(0,10)}class Ws{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!So()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Vs()).transaction(Fs),n=await t.objectStore(Fs).get(Bs(e));return await t.done,n}catch($I){if($I instanceof ko)ps.warn($I.message);else{const t=Cs.create("idb-get",{originalErrorMessage:null===$I||void 0===$I?void 0:$I.message});ps.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return zs(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ks(e){return ho(JSON.stringify({version:2,heartbeats:e})).length}var Gs;Gs="",_s(new Fo("platform-logger",(e=>new hs(e)),"PRIVATE")),_s(new Fo("heartbeat",(e=>new js(e)),"PRIVATE")),Ms(ds,fs,Gs),Ms(ds,fs,"esm2017"),Ms("fire-js","");class Hs{constructor(e,t){this._delegate=e,this.firebase=t,ws(e,new Fo("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Ds(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gs;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gs;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ws(this._delegate,e)}_addOrOverwriteComponent(e){bs(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Qs=new Co("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ys=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Ts(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(xo(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Ms,setLogLevel:Ns,onLog:As,apps:null,SDK_VERSION:xs,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(_s(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw Qs.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&po(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!xo(n,e=e||gs))throw Qs.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Hs);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){po(n,e)},createSubscribe:Ao,ErrorFactory:Co,deepExtend:po}),n}(),Xs=new Ho("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Xs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Xs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const $s=Ys;!function(e){Ms("@firebase/app-compat","0.2.28",e)}();$s.registerVersion("firebase","10.8.1","app-compat");var Js,Zs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ea={},ta=ta||{},na=Zs||self;function ra(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ia(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var oa="closure_uid_"+(1e9*Math.random()>>>0),sa=0;function aa(e,t,n){return e.call.apply(e.bind,arguments)}function la(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ua(e,t,n){return(ua=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:la).apply(null,arguments)}function ca(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ha(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function da(){this.s=this.s,this.o=this.o}da.prototype.s=!1,da.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,oa)&&e[oa]||(e[oa]=++sa))},da.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fa=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function pa(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function ga(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(ra(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function ma(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}ma.prototype.h=function(){this.defaultPrevented=!0};var va=function(){if(!na.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};na.addEventListener("test",e,t),na.removeEventListener("test",e,t)}catch(n){}return e}();function ya(e){return/^[\s\xa0]*$/.test(e)}function wa(){var e=na.navigator;return e&&(e=e.userAgent)?e:""}function ba(e){return-1!=wa().indexOf(e)}function _a(e){return _a[" "](e),e}_a[" "]=function(){};var Ea,Sa,ka=ba("Opera"),Ca=ba("Trident")||ba("MSIE"),Ia=ba("Edge"),xa=Ia||Ca,Ta=ba("Gecko")&&!(-1!=wa().toLowerCase().indexOf("webkit")&&!ba("Edge"))&&!(ba("Trident")||ba("MSIE"))&&!ba("Edge"),La=-1!=wa().toLowerCase().indexOf("webkit")&&!ba("Edge");function Pa(){var e=na.document;return e?e.documentMode:void 0}e:{var Da="",Ma=function(){var e=wa();return Ta?/rv:([^\);]+)(\)|;)/.exec(e):Ia?/Edge\/([\d\.]+)/.exec(e):Ca?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):La?/WebKit\/(\S+)/.exec(e):ka?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ma&&(Da=Ma?Ma[1]:""),Ca){var Aa=Pa();if(null!=Aa&&Aa>parseFloat(Da)){Ea=String(Aa);break e}}Ea=Da}if(na.document&&Ca){var Na=Pa();Sa=Na||(parseInt(Ea,10)||void 0)}else Sa=void 0;var Oa=Sa;function Ra(e,t){if(ma.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ta){e:{try{_a(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ra.$.h.call(this)}}ha(Ra,ma);var Fa={2:"touch",3:"pen",4:"mouse"};Ra.prototype.h=function(){Ra.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ua="closure_listenable_"+(1e6*Math.random()|0),Va=0;function za(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Va,this.fa=this.ia=!1}function Ba(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ja(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function qa(e){const t={};for(const n in e)t[n]=e[n];return t}const Wa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ka(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Wa.length;t++)n=Wa[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ga(e){this.src=e,this.g={},this.h=0}function Ha(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=fa(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ba(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Qa(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}Ga.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=Qa(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new za(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var Ya="closure_lm_"+(1e6*Math.random()|0),Xa={};function $a(e,t,n,r,i){if(r&&r.once)return Za(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)$a(e,t[o],n,r,i);return null}return n=sl(n),e&&e[Ua]?e.O(t,n,ia(r)?!!r.capture:!!r,i):Ja(e,t,n,!1,r,i)}function Ja(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=ia(i)?!!i.capture:!!i,a=il(e);if(a||(e[Ya]=a=new Ga(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=rl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)va||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(nl(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Za(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Za(e,t[o],n,r,i);return null}return n=sl(n),e&&e[Ua]?e.P(t,n,ia(r)?!!r.capture:!!r,i):Ja(e,t,n,!0,r,i)}function el(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)el(e,t[o],n,r,i);else r=ia(r)?!!r.capture:!!r,n=sl(n),e&&e[Ua]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Qa(o=e.g[t],n,r,i))&&(Ba(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=il(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Qa(t,n,r,i)),(n=-1<e?t[e]:null)&&tl(n))}function tl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Ua])Ha(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(nl(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=il(t))?(Ha(n,e),0==n.h&&(n.src=null,t[Ya]=null)):Ba(e)}}}function nl(e){return e in Xa?Xa[e]:Xa[e]="on"+e}function rl(e,t){if(e.fa)e=!0;else{t=new Ra(t,this);var n=e.listener,r=e.la||e.src;e.ia&&tl(e),e=n.call(r,t)}return e}function il(e){return(e=e[Ya])instanceof Ga?e:null}var ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function sl(e){return"function"===typeof e?e:(e[ol]||(e[ol]=function(t){return e.handleEvent(t)}),e[ol])}function al(){da.call(this),this.i=new Ga(this),this.S=this,this.J=null}function ll(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new ma(t,e);else if(t instanceof ma)t.target=t.target||e;else{var i=t;Ka(t=new ma(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=ul(s,r,!0,t)&&i}if(i=ul(s=t.g=e,r,!0,t)&&i,i=ul(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ul(s=t.g=n[o],r,!1,t)&&i}function ul(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&Ha(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ha(al,da),al.prototype[Ua]=!0,al.prototype.removeEventListener=function(e,t,n,r){el(this,e,t,n,r)},al.prototype.N=function(){if(al.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ba(n[r]);delete t.g[e],t.h--}}this.J=null},al.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},al.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var cl=na.JSON.stringify;function hl(){var e=yl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var dl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new fl),(e=>e.reset()));class fl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function pl(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function gl(e){na.setTimeout((()=>{throw e}),0)}let ml,vl=!1,yl=new class{constructor(){this.h=this.g=null}add(e,t){const n=dl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},wl=()=>{const e=na.Promise.resolve(void 0);ml=()=>{e.then(bl)}};var bl=()=>{for(var e;e=hl();){try{e.h.call(e.g)}catch(n){gl(n)}var t=dl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}vl=!1};function _l(e,t){al.call(this),this.h=e||1,this.g=t||na,this.j=ua(this.qb,this),this.l=Date.now()}function El(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Sl(e,t,n){if("function"===typeof e)n&&(e=ua(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ua(e.handleEvent,e)}return 2147483647<Number(t)?-1:na.setTimeout(e,t||0)}function kl(e){e.g=Sl((()=>{e.g=null,e.i&&(e.i=!1,kl(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ha(_l,al),(Js=_l.prototype).ga=!1,Js.T=null,Js.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ll(this,"tick"),this.ga&&(El(this),this.start()))}},Js.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Js.N=function(){_l.$.N.call(this),El(this),delete this.g};class Cl extends da{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kl(this)}N(){super.N(),this.g&&(na.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Il(e){da.call(this),this.h=e,this.g={}}ha(Il,da);var xl=[];function Tl(e,t,n,r){Array.isArray(n)||(n&&(xl[0]=n.toString()),n=xl);for(var i=0;i<n.length;i++){var o=$a(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Ll(e){ja(e.g,(function(e,t){this.g.hasOwnProperty(t)&&tl(e)}),e),e.g={}}function Pl(){this.g=!0}function Dl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return cl(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Il.prototype.N=function(){Il.$.N.call(this),Ll(this)},Il.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pl.prototype.Ea=function(){this.g=!1},Pl.prototype.info=function(){};var Ml={},Al=null;function Nl(){return Al=Al||new al}function Ol(e){ma.call(this,Ml.Ta,e)}function Rl(e){const t=Nl();ll(t,new Ol(t))}function Fl(e,t){ma.call(this,Ml.STAT_EVENT,e),this.stat=t}function Ul(e){const t=Nl();ll(t,new Fl(t,e))}function Vl(e,t){ma.call(this,Ml.Ua,e),this.size=t}function zl(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return na.setTimeout((function(){e()}),t)}Ml.Ta="serverreachability",ha(Ol,ma),Ml.STAT_EVENT="statevent",ha(Fl,ma),Ml.Ua="timingevent",ha(Vl,ma);var Bl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ql(){}function Wl(e){return e.h||(e.h=e.i())}function Kl(){}ql.prototype.h=null;var Gl,Hl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ql(){ma.call(this,"d")}function Yl(){ma.call(this,"c")}function Xl(){}function $l(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Il(this),this.P=Zl,e=xa?125:void 0,this.V=new _l(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Jl}function Jl(){this.i=null,this.g="",this.h=!1}ha(Ql,ma),ha(Yl,ma),ha(Xl,ql),Xl.prototype.g=function(){return new XMLHttpRequest},Xl.prototype.i=function(){return{}},Gl=new Xl;var Zl=45e3,eu={},tu={};function nu(e,t,n){e.L=1,e.A=_u(mu(t)),e.u=n,e.S=!0,ru(e,null)}function ru(e,t){e.G=Date.now(),au(e),e.B=mu(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Nu(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Jl,e.g=Oc(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Cl(ua(e.Pa,e,e.g),e.O)),Tl(e.U,e.g,"readystatechange",e.nb),t=e.I?qa(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Rl(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");s=2<=h.length&&"type"==h[1]?s+(c+"=")+u+"&":s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function iu(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ou(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=su(e,n),r==tu){4==t&&(e.s=4,Ul(14),i=!1),Dl(e.j,e.m,null,"[Incomplete Response]");break}if(r==eu){e.s=4,Ul(15),Dl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Dl(e.j,e.m,r,null),du(e,r)}iu(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Ul(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),xc(t),t.M=!0,Ul(11))):(Dl(e.j,e.m,n,"[Invalid Chunked Response]"),hu(e),cu(e))}function su(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?tu:(n=Number(t.substring(n,r)),isNaN(n)?eu:(r+=1)+n>t.length?tu:(t=t.slice(r,r+n),e.o=r+n,t))}function au(e){e.Y=Date.now()+e.P,lu(e,e.P)}function lu(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=zl(ua(e.lb,e),t)}function uu(e){e.C&&(na.clearTimeout(e.C),e.C=null)}function cu(e){0==e.l.H||e.J||Pc(e.l,e)}function hu(e){uu(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,El(e.V),Ll(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function du(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Bu(n.i,e)))if(!e.K&&Bu(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Lc(n),wc(n)}Ic(n),Ul(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=zl(ua(n.ib,n),6e3));if(1>=zu(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else Mc(n,11)}else if((e.K||n.g==e)&&Lc(n),!ya(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(ju(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,bu(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Nc(r,r.J?r.pa:null,r.Y),s.K){qu(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(uu(a),au(a)),r.g=s}else Cc(r);0<n.j.length&&_c(n)}else"stop"!=u[0]&&"close"!=u[0]||Mc(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?Mc(n,7):yc(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}Rl()}catch(u){}}function fu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ra(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ra(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ra(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Js=$l.prototype).setTimeout=function(e){this.P=e},Js.nb=function(e){e=e.target;const t=this.M;t&&3==dc(e)?t.l():this.Pa(e)},Js.Pa=function(e){try{if(e==this.g)e:{const c=dc(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||xa||this.g&&(this.h.h||this.g.ja()||fc(this.g)))){this.J||4!=c||7==t||Rl(),uu(this);var n=this.g.da();this.ca=n;t:if(iu(this)){var r=fc(this.g);e="";var i=r.length,o=4==dc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){hu(this),cu(this);var s="";break t}this.h.i=new na.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ya(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,Ul(12),hu(this),cu(this);break e}Dl(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,du(this,n)}this.S?(ou(this,c,s),xa&&this.i&&3==c&&(Tl(this.U,this.V,"tick",this.mb),this.V.start())):(Dl(this.j,this.m,s,null),du(this,s)),4==c&&hu(this),this.i&&!this.J&&(4==c?Pc(this.l,this):(this.i=!1,au(this)))}else(function(e){const t={};e=(e.g&&2<=dc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(ya(e[r]))continue;var n=pl(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,Ul(12)):(this.s=0,Ul(13)),hu(this),cu(this)}}}catch(c){}},Js.mb=function(){if(this.g){var e=dc(this.g),t=this.g.ja();this.o<t.length&&(uu(this),ou(this,e,t),this.i&&4!=e&&au(this))}},Js.cancel=function(){this.J=!0,hu(this)},Js.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Rl(),Ul(17)),hu(this),this.s=2,cu(this)):lu(this,this.Y-e)};var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gu(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof gu){this.h=e.h,vu(this,e.j),this.s=e.s,this.g=e.g,yu(this,e.m),this.l=e.l;var t=e.i,n=new Pu;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wu(this,n),this.o=e.o}else e&&(t=String(e).match(pu))?(this.h=!1,vu(this,t[1]||"",!0),this.s=Eu(t[2]||""),this.g=Eu(t[3]||"",!0),yu(this,t[4]),this.l=Eu(t[5]||"",!0),wu(this,t[6]||"",!0),this.o=Eu(t[7]||"")):(this.h=!1,this.i=new Pu(null,this.h))}function mu(e){return new gu(e)}function vu(e,t,n){e.j=n?Eu(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wu(e,t,n){t instanceof Pu?(e.i=t,function(e,t){t&&!e.j&&(Du(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Mu(this,t),Nu(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Su(t,Tu)),e.i=new Pu(t,e.h))}function bu(e,t,n){e.i.set(t,n)}function _u(e){return bu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Eu(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Su(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ku),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ku(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}gu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Su(t,Cu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Su(t,Cu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Su(n,"/"==n.charAt(0)?xu:Iu,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Su(n,Lu)),e.join("")};var Cu=/[#\/\?@]/g,Iu=/[#\?:]/g,xu=/[#\?]/g,Tu=/[#\?@]/g,Lu=/#/g;function Pu(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Du(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Mu(e,t){Du(e),t=Ou(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Au(e,t){return Du(e),t=Ou(e,t),e.g.has(t)}function Nu(e,t,n){Mu(e,t),0<n.length&&(e.i=null,e.g.set(Ou(e,t),pa(n)),e.h+=n.length)}function Ou(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Js=Pu.prototype).add=function(e,t){Du(this),this.i=null,e=Ou(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Js.forEach=function(e,t){Du(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Js.ta=function(){Du(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Js.Z=function(e){Du(this);let t=[];if("string"===typeof e)Au(this,e)&&(t=t.concat(this.g.get(Ou(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Js.set=function(e,t){return Du(this),this.i=null,Au(this,e=Ou(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Js.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Js.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Ru=class{constructor(e,t){this.g=e,this.map=t}};function Fu(e){this.l=e||Uu,na.PerformanceNavigationTiming?e=0<(e=na.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(na.g&&na.g.Ka&&na.g.Ka()&&na.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Uu=10;function Vu(e){return!!e.h||!!e.g&&e.g.size>=e.j}function zu(e){return e.h?1:e.g?e.g.size:0}function Bu(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ju(e,t){e.g?e.g.add(t):e.h=t}function qu(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Wu(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return pa(e.i)}Fu.prototype.cancel=function(){if(this.i=Wu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ku,Gu=class{stringify(e){return na.JSON.stringify(e,void 0)}parse(e){return na.JSON.parse(e,void 0)}};function Hu(){this.g=new Gu}function Qu(e,t,n){const r=n||"";try{fu(e,(function(e,n){let i=e;ia(e)&&(i=cl(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch($I){throw t.push(r+"type="+encodeURIComponent("_badmap")),$I}}function Yu(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Xu(e){this.l=e.ec||null,this.j=e.ob||!1}function $u(e,t){al.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ju,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ha(Xu,ql),Xu.prototype.g=function(){return new $u(this.l,this.j)},Xu.prototype.i=(Ku={},function(){return Ku}),ha($u,al);var Ju=0;function Zu(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ec(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tc(e)}function tc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Js=$u.prototype).open=function(e,t){if(this.readyState!=Ju)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tc(this)},Js.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||na).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Js.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ec(this)),this.readyState=Ju},Js.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tc(this)),this.g&&(this.readyState=3,tc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof na.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zu(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Js.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ec(this):tc(this),3==this.readyState&&Zu(this)}},Js.Za=function(e){this.g&&(this.response=this.responseText=e,ec(this))},Js.Ya=function(e){this.g&&(this.response=e,ec(this))},Js.ka=function(){this.g&&ec(this)},Js.setRequestHeader=function(e,t){this.v.append(e,t)},Js.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Js.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($u.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nc=na.JSON.parse;function rc(e){al.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ic,this.L=this.M=!1}ha(rc,al);var ic="",oc=/^https?$/i,sc=["POST","PUT"];function ac(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,lc(e),cc(e)}function lc(e){e.F||(e.F=!0,ll(e,"complete"),ll(e,"error"))}function uc(e){if(e.h&&"undefined"!=typeof ta&&(!e.C[1]||4!=dc(e)||2!=e.da()))if(e.v&&4==dc(e))Sl(e.La,0,e);else if(ll(e,"readystatechange"),4==dc(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(pu)[1]||null;!i&&na.self&&na.self.location&&(i=na.self.location.protocol.slice(0,-1)),r=!oc.test(i?i.toLowerCase():"")}n=r}if(n)ll(e,"complete"),ll(e,"success");else{e.m=6;try{var o=2<dc(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",lc(e)}}finally{cc(e)}}}function cc(e,t){if(e.g){hc(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||ll(e,"ready");try{n.onreadystatechange=r}catch($I){}}}function hc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(na.clearTimeout(e.A),e.A=null)}function dc(e){return e.g?e.g.readyState:0}function fc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ic:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(bh){return null}}function pc(e){let t="";return ja(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function gc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=pc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bu(e,t,n))}function mc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vc(e){this.Ga=0,this.j=[],this.l=new Pl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=mc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=mc("baseRetryDelayMs",5e3,e),this.hb=mc("retryDelaySeedMs",1e4,e),this.eb=mc("forwardChannelMaxRetries",2,e),this.xa=mc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Fu(e&&e.concurrentRequestLimit),this.Ja=new Hu,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function yc(e){if(bc(e),3==e.H){var t=e.W++,n=mu(e.I);if(bu(n,"SID",e.K),bu(n,"RID",t),bu(n,"TYPE","terminate"),Sc(e,n),(t=new $l(e,e.l,t)).L=2,t.A=_u(mu(n)),n=!1,na.navigator&&na.navigator.sendBeacon)try{n=na.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&na.Image&&((new Image).src=t.A,n=!0),n||(t.g=Oc(t.l,null),t.g.ha(t.A)),t.G=Date.now(),au(t)}Ac(e)}function wc(e){e.g&&(xc(e),e.g.cancel(),e.g=null)}function bc(e){wc(e),e.u&&(na.clearTimeout(e.u),e.u=null),Lc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&na.clearTimeout(e.m),e.m=null)}function _c(e){if(!Vu(e.i)&&!e.m){e.m=!0;var t=e.Na;ml||wl(),vl||(ml(),vl=!0),yl.add(t,e),e.C=0}}function Ec(e,t){var n;n=t?t.m:e.W++;const r=mu(e.I);bu(r,"SID",e.K),bu(r,"RID",n),bu(r,"AID",e.V),Sc(e,r),e.o&&e.s&&gc(r,e.o,e.s),n=new $l(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=kc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ju(e.i,n),nu(n,r,t)}function Sc(e,t){e.na&&ja(e.na,(function(e,n){bu(t,n,e)})),e.h&&fu({},(function(e,n){bu(t,n,e)}))}function kc(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ua(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{Qu(a,e,"req"+n+"_")}catch(Fd){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Cc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ml||wl(),vl||(ml(),vl=!0),yl.add(t,e),e.A=0}}function Ic(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=zl(ua(e.Ma,e),Dc(e,e.A)),e.A++,!0)}function xc(e){null!=e.B&&(na.clearTimeout(e.B),e.B=null)}function Tc(e){e.g=new $l(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=mu(e.wa);bu(t,"RID","rpc"),bu(t,"SID",e.K),bu(t,"AID",e.V),bu(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&bu(t,"TO",e.qa),bu(t,"TYPE","xmlhttp"),Sc(e,t),e.o&&e.s&&gc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=_u(mu(t)),n.u=null,n.S=!0,ru(n,e)}function Lc(e){null!=e.v&&(na.clearTimeout(e.v),e.v=null)}function Pc(e,t){var n=null;if(e.g==t){Lc(e),xc(e),e.g=null;var r=2}else{if(!Bu(e.i,t))return;n=t.F,qu(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;ll(r=Nl(),new Vl(r,n)),_c(e)}else Cc(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(zu(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=zl(ua(e.Na,e,t),Dc(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ic(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Mc(e,5);break;case 4:Mc(e,10);break;case 3:Mc(e,6);break;default:Mc(e,2)}}function Dc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Mc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ua(e.pb,e);n||(n=new gu("//www.google.com/images/cleardot.gif"),na.location&&"http"==na.location.protocol||vu(n,"https"),_u(n)),function(e,t){const n=new Pl;if(na.Image){const r=new Image;r.onload=ca(Yu,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ca(Yu,n,r,"TestLoadImage: error",!1,t),r.onabort=ca(Yu,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ca(Yu,n,r,"TestLoadImage: timeout",!1,t),na.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ul(2);e.H=0,e.h&&e.h.za(t),Ac(e),bc(e)}function Ac(e){if(e.H=0,e.ma=[],e.h){const t=Wu(e.i);0==t.length&&0==e.j.length||(ga(e.ma,t),ga(e.ma,e.j),e.i.i.length=0,pa(e.j),e.j.length=0),e.h.ya()}}function Nc(e,t,n){var r=n instanceof gu?mu(n):new gu(n);if(""!=r.g)t&&(r.g=t+"."+r.g),yu(r,r.m);else{var i=na.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new gu(null);r&&vu(o,r),t&&(o.g=t),i&&yu(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&bu(r,n,t),bu(r,"VER",e.ra),Sc(e,r),r}function Oc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new rc(new Xu({ob:n})):new rc(e.va)).Oa(e.J),t}function Rc(){}function Fc(){if(Ca&&!(10<=Number(Oa)))throw Error("Environmental error: no available transport.")}function Uc(e,t){al.call(this),this.g=new vc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!ya(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ya(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Bc(this)}function Vc(e){Ql.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function zc(){Yl.call(this),this.status=1}function Bc(e){this.g=e}function jc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function qc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function Wc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Js=rc.prototype).Oa=function(e){this.M=e},Js.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Gl.g(),this.C=this.u?Wl(this.u):Wl(Gl),this.g.onreadystatechange=ua(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void ac(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=na.FormData&&e instanceof na.FormData,!(0<=fa(sc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{hc(this),0<this.B&&((this.L=function(e){return Ca&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ua(this.ua,this)):this.A=Sl(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){ac(this,o)}},Js.ua=function(){"undefined"!=typeof ta&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ll(this,"timeout"),this.abort(8))},Js.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ll(this,"complete"),ll(this,"abort"),cc(this))},Js.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cc(this,!0)),rc.$.N.call(this)},Js.La=function(){this.s||(this.G||this.v||this.l?uc(this):this.kb())},Js.kb=function(){uc(this)},Js.isActive=function(){return!!this.g},Js.da=function(){try{return 2<dc(this)?this.g.status:-1}catch(Ku){return-1}},Js.ja=function(){try{return this.g?this.g.responseText:""}catch(Ku){return""}},Js.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nc(t)}},Js.Ia=function(){return this.m},Js.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Js=vc.prototype).ra=8,Js.H=1,Js.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new $l(this,this.l,e);let o=this.s;if(this.U&&(o?(o=qa(o),Ka(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=kc(this,i,t),bu(n=mu(this.I),"RID",e),bu(n,"CVER",22),this.F&&bu(n,"X-HTTP-Session-Id",this.F),Sc(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(pc(o)))+"&"+t:this.o&&gc(n,this.o,o)),ju(this.i,i),this.bb&&bu(n,"TYPE","init"),this.P?(bu(n,"$req",t),bu(n,"SID","null"),i.aa=!0,nu(i,n,null)):nu(i,n,t),this.H=2}}else 3==this.H&&(e?Ec(this,e):0==this.j.length||Vu(this.i)||Ec(this))},Js.Ma=function(){if(this.u=null,Tc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=zl(ua(this.jb,this),e)}},Js.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ul(10),wc(this),Tc(this))},Js.ib=function(){null!=this.v&&(this.v=null,wc(this),Ic(this),Ul(19))},Js.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Ul(2)):(this.l.info("Failed to ping google.com"),Ul(1))},Js.isActive=function(){return!!this.h&&this.h.isActive(this)},(Js=Rc.prototype).Ba=function(){},Js.Aa=function(){},Js.za=function(){},Js.ya=function(){},Js.isActive=function(){return!0},Js.Va=function(){},Fc.prototype.g=function(e,t){return new Uc(e,t)},ha(Uc,al),Uc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Ul(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Nc(e,null,e.Y),_c(e)},Uc.prototype.close=function(){yc(this.g)},Uc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=cl(e),e=n);t.j.push(new Ru(t.fb++,e)),3==t.H&&_c(t)},Uc.prototype.N=function(){this.g.h=null,delete this.j,yc(this.g),delete this.g,Uc.$.N.call(this)},ha(Vc,Ql),ha(zc,Yl),ha(Bc,Rc),Bc.prototype.Ba=function(){ll(this.g,"a")},Bc.prototype.Aa=function(e){ll(this.g,new Vc(e))},Bc.prototype.za=function(e){ll(this.g,new zc)},Bc.prototype.ya=function(){ll(this.g,"b")},ha(jc,(function(){this.blockSize=-1})),jc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},jc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)qc(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){qc(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){qc(this,r),i=0;break}}this.h=i,this.i+=t},jc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Kc={};function Gc(e){return-128<=e&&128>e?function(e,t){var n=Kc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Wc([0|e],0>e?-1:0)})):new Wc([0|e],0>e?-1:0)}function Hc(e){if(isNaN(e)||!isFinite(e))return Yc;if(0>e)return eh(Hc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Qc;return new Wc(t,0)}var Qc=4294967296,Yc=Gc(0),Xc=Gc(1),$c=Gc(16777216);function Jc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Zc(e){return-1==e.h}function eh(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Wc(n,~e.h).add(Xc)}function th(e,t){return e.add(eh(t))}function nh(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function rh(e,t){this.g=e,this.h=t}function ih(e,t){if(Jc(t))throw Error("division by zero");if(Jc(e))return new rh(Yc,Yc);if(Zc(e))return t=ih(eh(e),t),new rh(eh(t.g),eh(t.h));if(Zc(t))return t=ih(e,eh(t)),new rh(eh(t.g),t.h);if(30<e.g.length){if(Zc(e)||Zc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Xc,r=t;0>=r.X(e);)n=oh(n),r=oh(r);var i=sh(n,1),o=sh(r,1);for(r=sh(r,2),n=sh(n,2);!Jc(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=sh(r,1),n=sh(n,1)}return t=th(e,i.R(t)),new rh(i,t)}for(i=Yc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Hc(n)).R(t);Zc(s)||0<s.X(e);)s=(o=Hc(n-=r)).R(t);Jc(o)&&(o=Xc),i=i.add(o),e=th(e,s)}return new rh(i,e)}function oh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Wc(n,e.h)}function sh(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new Wc(i,e.h)}(Js=Wc.prototype).ea=function(){if(Zc(this))return-eh(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Qc+r)*t,t*=Qc}return e},Js.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Jc(this))return"0";if(Zc(this))return"-"+eh(this).toString(e);for(var t=Hc(Math.pow(e,6)),n=this,r="";;){var i=ih(n,t).g,o=((0<(n=th(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Jc(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Js.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Js.X=function(e){return Zc(e=th(this,e))?-1:Jc(e)?0:1},Js.abs=function(){return Zc(this)?eh(this):this},Js.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Wc(n,-2147483648&n[n.length-1]?-1:0)},Js.R=function(e){if(Jc(this)||Jc(e))return Yc;if(Zc(this))return Zc(e)?eh(this).R(eh(e)):eh(eh(this).R(e));if(Zc(e))return eh(this.R(eh(e)));if(0>this.X($c)&&0>e.X($c))return Hc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,nh(n,2*r+2*i),n[2*r+2*i+1]+=o*l,nh(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,nh(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,nh(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Wc(n,0)},Js.gb=function(e){return ih(this,e).h},Js.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Wc(n,this.h&e.h)},Js.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Wc(n,this.h|e.h)},Js.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Wc(n,this.h^e.h)},Fc.prototype.createWebChannel=Fc.prototype.g,Uc.prototype.send=Uc.prototype.u,Uc.prototype.open=Uc.prototype.m,Uc.prototype.close=Uc.prototype.close,Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,jl.COMPLETE="complete",Kl.EventType=Hl,Hl.OPEN="a",Hl.CLOSE="b",Hl.ERROR="c",Hl.MESSAGE="d",al.prototype.listen=al.prototype.O,rc.prototype.listenOnce=rc.prototype.P,rc.prototype.getLastError=rc.prototype.Sa,rc.prototype.getLastErrorCode=rc.prototype.Ia,rc.prototype.getStatus=rc.prototype.da,rc.prototype.getResponseJson=rc.prototype.Wa,rc.prototype.getResponseText=rc.prototype.ja,rc.prototype.send=rc.prototype.ha,rc.prototype.setWithCredentials=rc.prototype.Oa,jc.prototype.digest=jc.prototype.l,jc.prototype.reset=jc.prototype.reset,jc.prototype.update=jc.prototype.j,Wc.prototype.add=Wc.prototype.add,Wc.prototype.multiply=Wc.prototype.R,Wc.prototype.modulo=Wc.prototype.gb,Wc.prototype.compare=Wc.prototype.X,Wc.prototype.toNumber=Wc.prototype.ea,Wc.prototype.toString=Wc.prototype.toString,Wc.prototype.getBits=Wc.prototype.D,Wc.fromNumber=Hc,Wc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return eh(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Hc(Math.pow(n,8)),i=Yc,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=Hc(Math.pow(n,s)),i=i.R(s).add(Hc(a))):i=(i=i.R(r)).add(Hc(a))}return i};var ah=ea.createWebChannelTransport=function(){return new Fc},lh=ea.getStatEventTarget=function(){return Nl()},uh=ea.ErrorCode=Bl,ch=ea.EventType=jl,hh=ea.Event=Ml,dh=ea.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fh=(ea.FetchXmlHttpFactory=Xu,ea.WebChannel=Kl),ph=ea.XhrIo=rc,gh=ea.Md5=jc,mh=ea.Integer=Wc;const vh="@firebase/firestore";class yh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yh.UNAUTHENTICATED=new yh(null),yh.GOOGLE_CREDENTIALS=new yh("google-credentials-uid"),yh.FIRST_PARTY=new yh("first-party-uid"),yh.MOCK_USER=new yh("mock-user");let wh="10.8.1";const bh=new Ho("@firebase/firestore");function _h(){return bh.logLevel}function Eh(e){if(bh.logLevel<=jo.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ch);bh.debug("Firestore (".concat(wh,"): ").concat(e),...i)}}function Sh(e){if(bh.logLevel<=jo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ch);bh.error("Firestore (".concat(wh,"): ").concat(e),...i)}}function kh(e){if(bh.logLevel<=jo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ch);bh.warn("Firestore (".concat(wh,"): ").concat(e),...i)}}function Ch(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(wh,") INTERNAL ASSERTION FAILED: ")+e;throw Sh(t),new Error(t)}function xh(e,t){e||Ih()}function Th(e,t){return e}const Lh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ph extends ko{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Dh{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Mh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ah{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yh.UNAUTHENTICATED)))}shutdown(){}}class Nh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Oh{constructor(e){this.t=e,this.currentUser=yh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Dh;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Dh,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Eh("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Eh("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dh)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Eh("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(xh("string"==typeof t.accessToken),new Mh(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return xh(null===e||"string"==typeof e),new yh(e)}}class Rh{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=yh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Fh{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Rh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(yh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Uh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vh{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Eh("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Eh("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Eh("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Eh("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(xh("string"==typeof e.token),this.R=e.token,new Uh(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zh(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Bh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=zh(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function jh(e,t){return e<t?-1:e>t?1:0}function qh(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Wh(e){return e+"\0"}class Kh{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ph(Lh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ph(Lh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ph(Lh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ph(Lh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kh.fromMillis(Date.now())}static fromDate(e){return Kh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Kh(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jh(this.nanoseconds,e.nanoseconds):jh(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Gh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Gh(e)}static min(){return new Gh(new Kh(0,0))}static max(){return new Gh(new Kh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hh{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ih(),void 0===n?n=e.length-t:n>e.length-t&&Ih(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Hh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hh?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qh extends Hh{construct(e,t,n){return new Qh(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new Qh(e)}static emptyPath(){return new Qh([])}}const Yh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xh extends Hh{construct(e,t,n){return new Xh(e,t,n)}static isValidIdentifier(e){return Yh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xh.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xh(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ph(Lh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ph(Lh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Ph(Lh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xh(t)}static emptyPath(){return new Xh([])}}class $h{constructor(e){this.path=e}static fromPath(e){return new $h(Qh.fromString(e))}static fromName(e){return new $h(Qh.fromString(e).popFirst(5))}static empty(){return new $h(Qh.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qh.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qh.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $h(new Qh(e.slice()))}}class Jh{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Zh(e){return e.fields.find((e=>2===e.kind))}function ed(e){return e.fields.filter((e=>2!==e.kind))}Jh.UNKNOWN_ID=-1;class td{constructor(e,t){this.fieldPath=e,this.kind=t}}class nd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new nd(0,od.min())}}function rd(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Gh.fromTimestamp(1e9===r?new Kh(n+1,0):new Kh(n,r));return new od(i,$h.empty(),t)}function id(e){return new od(e.readTime,e.key,-1)}class od{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new od(Gh.min(),$h.empty(),-1)}static max(){return new od(Gh.max(),$h.empty(),-1)}}function sd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=$h.comparator(e.documentKey,t.documentKey),0!==n?n:jh(e.largestBatchId,t.largestBatchId))}const ad="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ld{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ud(e){if(e.code!==Lh.FAILED_PRECONDITION||e.message!==ad)throw e;Eh("LocalStore","Unexpectedly lost primary lease")}class cd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ih(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new cd(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof cd?t:cd.resolve(t)}catch(e){return cd.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):cd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):cd.reject(t)}static resolve(e){return new cd(((t,n)=>{t(e)}))}static reject(e){return new cd(((t,n)=>{n(e)}))}static waitFor(e){return new cd(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=cd.resolve(!1);for(const n of e)t=t.next((e=>e?cd.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new cd(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new cd(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class hd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Dh,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new pd(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=wd(t.target.error);this.V.reject(new pd(e,n))}}static open(e,t,n,r){try{return new hd(t,e.transaction(r,n))}catch(e){throw new pd(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Eh("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new md(t)}}class dd{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===dd.S(_o())&&Sh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Eh("SimpleDb","Removing database:",e),vd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!So())return!1;if(dd.C())return!0;const e=_o(),t=dd.S(e),n=0<t&&t<10,r=dd.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Eh("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new pd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Ph(Lh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Ph(Lh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new pd(e,r))},r.onupgradeneeded=e=>{Eh("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Eh("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=hd.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),cd.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Eh("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class fd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return vd(this.k.delete())}}class pd extends Ph{constructor(e,t){super(Lh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function gd(e){return"IndexedDbTransactionError"===e.name}class md{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Eh("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Eh("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vd(n)}add(e){return Eh("SimpleDb","ADD",this.store.name,e,e),vd(this.store.add(e))}get(e){return vd(this.store.get(e)).next((t=>(void 0===t&&(t=null),Eh("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Eh("SimpleDb","DELETE",this.store.name,e),vd(this.store.delete(e))}count(){return Eh("SimpleDb","COUNT",this.store.name),vd(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new cd(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new cd(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Eh("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new cd(((n,r)=>{t.onerror=e=>{const t=wd(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new cd(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new fd(i),s=t(i.primaryKey,i.value,o);if(s instanceof cd){const e=s.catch((e=>(o.done(),cd.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>cd.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function vd(e){return new cd(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=wd(e.target.error);n(t)}}))}let yd=!1;function wd(e){const t=dd.S(_o());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Ph("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return yd||(yd=!0,setTimeout((()=>{throw e}),0)),e}}return e}class bd{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Eh("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Eh("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){gd(e)?Eh("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ud(e)}await this.ee(6e4)}))}}class _d{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return cd.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Eh("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Eh("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=id(t);sd(r,n)>0&&(n=r)})),new od(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ed{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Sd(e){return null==e}function kd(e){return 0===e&&1/e==-1/0}function Cd(e){return"number"==typeof e&&Number.isInteger(e)&&!kd(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Id(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Td(t)),t=xd(e.get(n),t);return Td(t)}function xd(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Td(e){return e+"\x01\x01"}function Ld(e){const t=e.length;if(xh(t>=2),2===t)return xh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qh.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Ih(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Ih()}o=t+2}return new Qh(r)}Ed._e=-1;const Pd=["userId","batchId"];function Dd(e,t){return[e,Id(t)]}function Md(e,t,n){return[e,Id(t),n]}const Ad={},Nd=["prefixPath","collectionGroup","readTime","documentId"],Od=["prefixPath","collectionGroup","documentId"],Rd=["collectionGroup","readTime","prefixPath","documentId"],Fd=["canonicalId","targetId"],Ud=["targetId","path"],Vd=["path","targetId"],zd=["collectionId","parent"],Bd=["indexId","uid"],jd=["uid","sequenceNumber"],qd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wd=["indexId","uid","orderedDocumentKey"],Kd=["userId","collectionPath","documentId"],Gd=["userId","collectionPath","largestBatchId"],Hd=["userId","collectionGroup","largestBatchId"],Qd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Yd=[...Qd,"documentOverlays"],Xd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$d=Xd,Jd=[...$d,"indexConfiguration","indexState","indexEntries"];class Zd extends ld{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function ef(e,t){const n=Th(e);return dd.M(n.ae,t)}function tf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class of{constructor(e,t){this.comparator=e,this.root=t||af.EMPTY}insert(e,t){return new of(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,af.BLACK,null,null))}remove(e){return new of(this.comparator,this.root.remove(e,this.comparator).copy(null,null,af.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class af{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:af.RED,this.left=null!=r?r:af.EMPTY,this.right=null!=i?i:af.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new af(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return af.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return af.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,af.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,af.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ih();if(this.right.isRed())throw Ih();const e=this.left.check();if(e!==this.right.check())throw Ih();return e+(this.isRed()?0:1)}}af.EMPTY=null,af.RED=!0,af.BLACK=!1,af.EMPTY=new class{constructor(){this.size=0}get key(){throw Ih()}get value(){throw Ih()}get color(){throw Ih()}get left(){throw Ih()}get right(){throw Ih()}copy(e,t,n,r,i){return this}insert(e,t,n){return new af(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class lf{constructor(e){this.comparator=e,this.data=new of(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uf(this.data.getIterator())}getIteratorFrom(e){return new uf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof lf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new lf(this.comparator);return t.data=e,t}}class uf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cf(e){return e.hasNext()?e.getNext():void 0}class hf{constructor(e){this.fields=e,e.sort(Xh.comparator)}static empty(){return new hf([])}unionWith(e){let t=new lf(Xh.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new hf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qh(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class df extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ff{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new df("Invalid base64 string: "+e):e}}(e);return new ff(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ff(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jh(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ff.EMPTY_BYTE_STRING=new ff("");const pf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gf(e){if(xh(!!e),"string"==typeof e){let t=0;const n=pf.exec(e);if(xh(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:mf(e.seconds),nanos:mf(e.nanos)}}function mf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function vf(e){return"string"==typeof e?ff.fromBase64String(e):ff.fromUint8Array(e)}function yf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wf(e){const t=e.mapValue.fields.__previous_value__;return yf(t)?wf(t):t}function bf(e){const t=gf(e.mapValue.fields.__local_write_time__.timestampValue);return new Kh(t.seconds,t.nanos)}class _f{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class Ef{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ef("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ef&&e.projectId===this.projectId&&e.database===this.database}}const Sf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},kf={nullValue:"NULL_VALUE"};function Cf(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?yf(e)?4:Vf(e)?9007199254740991:10:Ih()}function If(e,t){if(e===t)return!0;const n=Cf(e);if(n!==Cf(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bf(e).isEqual(bf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=gf(e.timestampValue),r=gf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return vf(e.bytesValue).isEqual(vf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mf(e.geoPointValue.latitude)===mf(t.geoPointValue.latitude)&&mf(e.geoPointValue.longitude)===mf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mf(e.integerValue)===mf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=mf(e.doubleValue),r=mf(t.doubleValue);return n===r?kd(n)===kd(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qh(e.arrayValue.values||[],t.arrayValue.values||[],If);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tf(n)!==tf(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!If(n[i],r[i])))return!1;return!0}(e,t);default:return Ih()}}function xf(e,t){return void 0!==(e.values||[]).find((e=>If(e,t)))}function Tf(e,t){if(e===t)return 0;const n=Cf(e),r=Cf(t);if(n!==r)return jh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return jh(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=mf(e.integerValue||e.doubleValue),r=mf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Lf(e.timestampValue,t.timestampValue);case 4:return Lf(bf(e),bf(t));case 5:return jh(e.stringValue,t.stringValue);case 6:return function(e,t){const n=vf(e),r=vf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=jh(n[i],r[i]);if(0!==e)return e}return jh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=jh(mf(e.latitude),mf(t.latitude));return 0!==n?n:jh(mf(e.longitude),mf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Tf(n[i],r[i]);if(e)return e}return jh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Sf.mapValue&&t===Sf.mapValue)return 0;if(e===Sf.mapValue)return 1;if(t===Sf.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=jh(r[s],o[s]);if(0!==e)return e;const t=Tf(n[r[s]],i[o[s]]);if(0!==t)return t}return jh(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ih()}}function Lf(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jh(e,t);const n=gf(e),r=gf(t),i=jh(n.seconds,r.seconds);return 0!==i?i:jh(n.nanos,r.nanos)}function Pf(e){return Df(e)}function Df(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=gf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return vf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return $h.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Df(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Df(e.fields[i]));return n+"}"}(e.mapValue):Ih()}function Mf(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Af(e){return!!e&&"integerValue"in e}function Nf(e){return!!e&&"arrayValue"in e}function Of(e){return!!e&&"nullValue"in e}function Rf(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ff(e){return!!e&&"mapValue"in e}function Uf(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Uf(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Uf(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Vf(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function zf(e){return"nullValue"in e?kf:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Mf(Ef.empty(),$h.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ih()}function Bf(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Mf(Ef.empty(),$h.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Sf:Ih()}function jf(e,t){const n=Tf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function qf(e,t){const n=Tf(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Wf{constructor(e){this.value=e}static empty(){return new Wf({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uf(t)}setAll(e){let t=Xh.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Uf(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return If(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ff(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Wf(Uf(this.value))}}function Kf(e){const t=[];return nf(e.fields,((e,n)=>{const r=new Xh([e]);if(Ff(n)){const e=Kf(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new hf(t)}class Gf{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Gf(e,0,Gh.min(),Gh.min(),Gh.min(),Wf.empty(),0)}static newFoundDocument(e,t,n,r){return new Gf(e,1,t,Gh.min(),n,r,0)}static newNoDocument(e,t){return new Gf(e,2,t,Gh.min(),Gh.min(),Wf.empty(),0)}static newUnknownDocument(e,t){return new Gf(e,3,t,Gh.min(),Gh.min(),Wf.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Gh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wf.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Gh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Hf{constructor(e,t){this.position=e,this.inclusive=t}}function Qf(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?$h.comparator($h.fromName(s.referenceValue),n.key):Tf(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Yf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!If(e.position[n],t.position[n]))return!1;return!0}class Xf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function $f(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Jf{}class Zf extends Jf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new up(e,t,n):"array-contains"===t?new fp(e,n):"in"===t?new pp(e,n):"not-in"===t?new gp(e,n):"array-contains-any"===t?new mp(e,n):new Zf(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new cp(e,n):new hp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tf(t,this.value)):null!==t&&Cf(this.value)===Cf(t)&&this.matchesComparison(Tf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ih()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ep extends Jf{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ep(e,t)}matches(e){return tp(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function tp(e){return"and"===e.op}function np(e){return"or"===e.op}function rp(e){return ip(e)&&tp(e)}function ip(e){for(const t of e.filters)if(t instanceof ep)return!1;return!0}function op(e){if(e instanceof Zf)return e.field.canonicalString()+e.op.toString()+Pf(e.value);if(rp(e))return e.filters.map((e=>op(e))).join(",");{const t=e.filters.map((e=>op(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function sp(e,t){return e instanceof Zf?function(e,t){return t instanceof Zf&&e.op===t.op&&e.field.isEqual(t.field)&&If(e.value,t.value)}(e,t):e instanceof ep?function(e,t){return t instanceof ep&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&sp(n,t.filters[r])),!0)}(e,t):void Ih()}function ap(e,t){const n=e.filters.concat(t);return ep.create(n,e.op)}function lp(e){return e instanceof Zf?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Pf(e.value))}(e):e instanceof ep?function(e){return e.op.toString()+" {"+e.getFilters().map(lp).join(" ,")+"}"}(e):"Filter"}class up extends Zf{constructor(e,t,n){super(e,t,n),this.key=$h.fromName(n.referenceValue)}matches(e){const t=$h.comparator(e.key,this.key);return this.matchesComparison(t)}}class cp extends Zf{constructor(e,t){super(e,"in",t),this.keys=dp("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class hp extends Zf{constructor(e,t){super(e,"not-in",t),this.keys=dp("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function dp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>$h.fromName(e.referenceValue)))}class fp extends Zf{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&xf(t.arrayValue,this.value)}}class pp extends Zf{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xf(this.value.arrayValue,t)}}class gp extends Zf{constructor(e,t){super(e,"not-in",t)}matches(e){if(xf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xf(this.value.arrayValue,t)}}class mp extends Zf{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>xf(this.value.arrayValue,e)))}}class vp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function yp(e){return new vp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function wp(e){const t=Th(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>op(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Sd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Pf(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Pf(e))).join(",")),t.ce=e}return t.ce}function bp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$f(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!sp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yf(e.startAt,t.startAt)&&Yf(e.endAt,t.endAt)}function _p(e){return $h.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ep(e,t){return e.filters.filter((e=>e instanceof Zf&&e.field.isEqual(t)))}function Sp(e,t,n){let r=kf,i=!0;for(const o of Ep(e,t)){let e=kf,t=!0;switch(o.op){case"<":case"<=":e=zf(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=kf}jf({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];jf({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function kp(e,t,n){let r=Sf,i=!0;for(const o of Ep(e,t)){let e=Sf,t=!0;switch(o.op){case">=":case">":e=Bf(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Sf}qf({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];qf({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Cp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Ip(e,t,n,r,i,o,s,a){return new Cp(e,t,n,r,i,o,s,a)}function xp(e){return new Cp(e)}function Tp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Lp(e){return null!==e.collectionGroup}function Pp(e){const t=Th(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new lf(Xh.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Xf(r,n))})),e.has(Xh.keyField().canonicalString())||t.le.push(new Xf(Xh.keyField(),n))}return t.le}function Dp(e){const t=Th(e);return t.he||(t.he=Mp(t,Pp(e))),t.he}function Mp(e,t){if("F"===e.limitType)return yp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Xf(e.field,t)}));const n=e.endAt?new Hf(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hf(e.startAt.position,e.startAt.inclusive):null;return yp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ap(e,t){const n=e.filters.concat([t]);return new Cp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Np(e,t,n){return new Cp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Op(e,t){return bp(Dp(e),Dp(t))&&e.limitType===t.limitType}function Rp(e){return"".concat(wp(Dp(e)),"|lt:").concat(e.limitType)}function Fp(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>lp(e))).join(", "),"]")),Sd(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Pf(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Pf(e))).join(",")),"Target(".concat(t,")")}(Dp(e)),"; limitType=").concat(e.limitType,")")}function Up(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):$h.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Pp(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Qf(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Pp(e),t))&&!(e.endAt&&!function(e,t,n){const r=Qf(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Pp(e),t))}(e,t)}function Vp(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zp(e){return(t,n)=>{let r=!1;for(const i of Pp(e)){const e=Bp(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Bp(e,t,n){const r=e.field.isKeyField()?$h.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tf(r,i):Ih()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ih()}}class jp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return rf(this.inner)}size(){return this.innerSize}}const qp=new of($h.comparator);function Wp(){return qp}const Kp=new of($h.comparator);function Gp(){let e=Kp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Hp(e){let t=Kp;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Qp(){return Xp()}function Yp(){return Xp()}function Xp(){return new jp((e=>e.toString()),((e,t)=>e.isEqual(t)))}const $p=new of($h.comparator),Jp=new lf($h.comparator);function Zp(){let e=Jp;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const eg=new lf(jh);function tg(){return eg}function ng(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(t)?"-0":t}}function rg(e){return{integerValue:""+e}}function ig(e,t){return Cd(t)?rg(t):ng(e,t)}class og{constructor(){this._=void 0}}function sg(e,t,n){return e instanceof ug?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&yf(t)&&(t=wf(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof cg?hg(e,t):e instanceof dg?fg(e,t):function(e,t){const n=lg(e,t),r=gg(n)+gg(e.Ie);return Af(n)&&Af(e.Ie)?rg(r):ng(e.serializer,r)}(e,t)}function ag(e,t,n){return e instanceof cg?hg(e,t):e instanceof dg?fg(e,t):n}function lg(e,t){return e instanceof pg?function(e){return Af(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ug extends og{}class cg extends og{constructor(e){super(),this.elements=e}}function hg(e,t){const n=mg(t);for(const r of e.elements)n.some((e=>If(e,r)))||n.push(r);return{arrayValue:{values:n}}}class dg extends og{constructor(e){super(),this.elements=e}}function fg(e,t){let n=mg(t);for(const r of e.elements)n=n.filter((e=>!If(e,r)));return{arrayValue:{values:n}}}class pg extends og{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function gg(e){return mf(e.integerValue||e.doubleValue)}function mg(e){return Nf(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class vg{constructor(e,t){this.field=e,this.transform=t}}class yg{constructor(e,t){this.version=e,this.transformResults=t}}class wg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wg}static exists(e){return new wg(void 0,e)}static updateTime(e){return new wg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class _g{}function Eg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Mg(e.key,wg.none()):new xg(e.key,e.data,wg.none());{const n=e.data,r=Wf.empty();let i=new lf(Xh.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Tg(e.key,r,new hf(i.toArray()),wg.none())}}function Sg(e,t,n){e instanceof xg?function(e,t,n){const r=e.value.clone(),i=Pg(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Tg?function(e,t,n){if(!bg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Pg(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lg(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function kg(e,t,n,r){return e instanceof xg?function(e,t,n,r){if(!bg(e.precondition,t))return n;const i=e.value.clone(),o=Dg(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Tg?function(e,t,n,r){if(!bg(e.precondition,t))return n;const i=Dg(e.fieldTransforms,r,t),o=t.data;return o.setAll(Lg(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return bg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Cg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=lg(r.transform,e||null);null!=i&&(null===n&&(n=Wf.empty()),n.set(r.field,i))}return n||null}function Ig(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qh(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof cg&&t instanceof cg||e instanceof dg&&t instanceof dg?qh(e.elements,t.elements,If):e instanceof pg&&t instanceof pg?If(e.Ie,t.Ie):e instanceof ug&&t instanceof ug}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xg extends _g{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Tg extends _g{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lg(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Pg(e,t,n){const r=new Map;xh(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,ag(s,a,n[i]))}return r}function Dg(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,sg(e,o,t))}return r}class Mg extends _g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ag extends _g{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ng{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Sg(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=kg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=kg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Yp();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Eg(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(Gh.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Zp())}isEqual(e){return this.batchId===e.batchId&&qh(this.mutations,e.mutations,((e,t)=>Ig(e,t)))&&qh(this.baseMutations,e.baseMutations,((e,t)=>Ig(e,t)))}}class Og{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){xh(e.mutations.length===n.length);let r=$p;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new Og(e,t,n,r)}}class Rg{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Fg{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ug,Vg;function zg(e){switch(e){default:return Ih();case Lh.CANCELLED:case Lh.UNKNOWN:case Lh.DEADLINE_EXCEEDED:case Lh.RESOURCE_EXHAUSTED:case Lh.INTERNAL:case Lh.UNAVAILABLE:case Lh.UNAUTHENTICATED:return!1;case Lh.INVALID_ARGUMENT:case Lh.NOT_FOUND:case Lh.ALREADY_EXISTS:case Lh.PERMISSION_DENIED:case Lh.FAILED_PRECONDITION:case Lh.ABORTED:case Lh.OUT_OF_RANGE:case Lh.UNIMPLEMENTED:case Lh.DATA_LOSS:return!0}}function Bg(e){if(void 0===e)return Sh("GRPC error has no .code"),Lh.UNKNOWN;switch(e){case Ug.OK:return Lh.OK;case Ug.CANCELLED:return Lh.CANCELLED;case Ug.UNKNOWN:return Lh.UNKNOWN;case Ug.DEADLINE_EXCEEDED:return Lh.DEADLINE_EXCEEDED;case Ug.RESOURCE_EXHAUSTED:return Lh.RESOURCE_EXHAUSTED;case Ug.INTERNAL:return Lh.INTERNAL;case Ug.UNAVAILABLE:return Lh.UNAVAILABLE;case Ug.UNAUTHENTICATED:return Lh.UNAUTHENTICATED;case Ug.INVALID_ARGUMENT:return Lh.INVALID_ARGUMENT;case Ug.NOT_FOUND:return Lh.NOT_FOUND;case Ug.ALREADY_EXISTS:return Lh.ALREADY_EXISTS;case Ug.PERMISSION_DENIED:return Lh.PERMISSION_DENIED;case Ug.FAILED_PRECONDITION:return Lh.FAILED_PRECONDITION;case Ug.ABORTED:return Lh.ABORTED;case Ug.OUT_OF_RANGE:return Lh.OUT_OF_RANGE;case Ug.UNIMPLEMENTED:return Lh.UNIMPLEMENTED;case Ug.DATA_LOSS:return Lh.DATA_LOSS;default:return Ih()}}(Vg=Ug||(Ug={}))[Vg.OK=0]="OK",Vg[Vg.CANCELLED=1]="CANCELLED",Vg[Vg.UNKNOWN=2]="UNKNOWN",Vg[Vg.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Vg[Vg.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Vg[Vg.NOT_FOUND=5]="NOT_FOUND",Vg[Vg.ALREADY_EXISTS=6]="ALREADY_EXISTS",Vg[Vg.PERMISSION_DENIED=7]="PERMISSION_DENIED",Vg[Vg.UNAUTHENTICATED=16]="UNAUTHENTICATED",Vg[Vg.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Vg[Vg.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Vg[Vg.ABORTED=10]="ABORTED",Vg[Vg.OUT_OF_RANGE=11]="OUT_OF_RANGE",Vg[Vg.UNIMPLEMENTED=12]="UNIMPLEMENTED",Vg[Vg.INTERNAL=13]="INTERNAL",Vg[Vg.UNAVAILABLE=14]="UNAVAILABLE",Vg[Vg.DATA_LOSS=15]="DATA_LOSS";let jg=null;function qg(){return new TextEncoder}const Wg=new mh([4294967295,4294967295],0);function Kg(e){const t=qg().encode(e),n=new gh;return n.update(t),new Uint8Array(n.digest())}function Gg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new mh([n,r],0),new mh([i,o],0)]}class Hg{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Qg("Invalid padding: ".concat(t));if(n<0)throw new Qg("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new Qg("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new Qg("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=mh.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(mh.fromNumber(n)));return 1===r.compare(Wg)&&(r=new mh([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Kg(e),[n,r]=Gg(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hg(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=Kg(e),[n,r]=Gg(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Qg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yg{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Xg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Yg(Gh.min(),r,new of(jh),Wp(),Zp())}}class Xg{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Xg(n,t,Zp(),Zp(),Zp())}}class $g{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Jg{constructor(e,t){this.targetId=e,this.fe=t}}class Zg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ff.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class em{constructor(){this.ge=0,this.pe=rm(),this.ye=ff.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Zp(),t=Zp(),n=Zp();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ih()}})),new Xg(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=rm()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,xh(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class tm{constructor(e){this.Le=e,this.ke=new Map,this.qe=Wp(),this.Qe=nm(),this.Ke=new of(jh)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Ih()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(_p(i))if(0===n){const e=new $h(i.path);this.We(t,e,Gf.newNoDocument(e,Gh.min()))}else xh(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==jg||jg.tt(function(e,t,n,r,i){var o,s,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=vf(n).toUint8Array()}catch(e){if(e instanceof df)return kh("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new Hg(o,r,i)}catch(e){return kh(e instanceof Qg?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&_p(i.target)){const t=new $h(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Gf.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Zp();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Yg(e,t,this.Ke,this.qe,n);return this.qe=Wp(),this.Qe=nm(),this.Ke=new of(jh),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new em,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new lf(jh),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Eh("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new em),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function nm(){return new of($h.comparator)}function rm(){return new of($h.comparator)}const im={asc:"ASCENDING",desc:"DESCENDING"},om={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sm={and:"AND",or:"OR"};class am{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function lm(e,t){return e.useProto3Json||Sd(t)?t:{value:t}}function um(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function cm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function hm(e,t){return um(e,t.toTimestamp())}function dm(e){return xh(!!e),Gh.fromTimestamp(function(e){const t=gf(e);return new Kh(t.seconds,t.nanos)}(e))}function fm(e,t){return pm(e,t).canonicalString()}function pm(e,t){const n=function(e){return new Qh(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function gm(e){const t=Qh.fromString(e);return xh(Fm(t)),t}function mm(e,t){return fm(e.databaseId,t.path)}function vm(e,t){const n=gm(t);if(n.get(1)!==e.databaseId.projectId)throw new Ph(Lh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ph(Lh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new $h(_m(n))}function ym(e,t){return fm(e.databaseId,t)}function wm(e){const t=gm(e);return 4===t.length?Qh.emptyPath():_m(t)}function bm(e){return new Qh(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _m(e){return xh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Em(e,t,n){return{name:mm(e,t),fields:n.value.mapValue.fields}}function Sm(e,t,n){const r=vm(e,t.name),i=dm(t.updateTime),o=t.createTime?dm(t.createTime):Gh.min(),s=new Wf({mapValue:{fields:t.fields}}),a=Gf.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function km(e,t){let n;if(t instanceof xg)n={update:Em(e,t.key,t.value)};else if(t instanceof Mg)n={delete:mm(e,t.key)};else if(t instanceof Tg)n={update:Em(e,t.key,t.data),updateMask:Rm(t.fieldMask)};else{if(!(t instanceof Ag))return Ih();n={verify:mm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof ug)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof cg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof dg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof pg)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ih()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:hm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ih()}(e,t.precondition)),n}function Cm(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?wg.updateTime(dm(e.updateTime)):void 0!==e.exists?wg.exists(e.exists):wg.none()}(t.currentDocument):wg.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)xh("REQUEST_TIME"===t.setToServerValue),n=new ug;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new cg(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new dg(e)}else"increment"in t?n=new pg(e,t.increment):Ih();const r=Xh.fromServerFormat(t.fieldPath);return new vg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=vm(e,t.update.name),o=new Wf({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new hf(t.map((e=>Xh.fromServerFormat(e))))}(t.updateMask);return new Tg(i,o,e,n,r)}return new xg(i,o,n,r)}if(t.delete){const r=vm(e,t.delete);return new Mg(r,n)}if(t.verify){const r=vm(e,t.verify);return new Ag(r,n)}return Ih()}function Im(e,t){return{documents:[ym(e,t.path)]}}function xm(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ym(e,i);const o=function(e){if(0!==e.length)return Om(ep.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Am(e.field),direction:Pm(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=lm(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Tm(e){let t=wm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){xh(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Lm(e);return t instanceof ep&&rp(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Xf(Nm(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Sd(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Hf(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Hf(n,t)}(n.endAt)),Ip(t,i,s,o,a,"F",l,u)}function Lm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Nm(e.unaryFilter.field);return Zf.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Nm(e.unaryFilter.field);return Zf.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nm(e.unaryFilter.field);return Zf.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nm(e.unaryFilter.field);return Zf.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ih()}}(e):void 0!==e.fieldFilter?function(e){return Zf.create(Nm(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ih()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ep.create(e.compositeFilter.filters.map((e=>Lm(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ih()}}(e.compositeFilter.op))}(e):Ih()}function Pm(e){return im[e]}function Dm(e){return om[e]}function Mm(e){return sm[e]}function Am(e){return{fieldPath:e.canonicalString()}}function Nm(e){return Xh.fromServerFormat(e.fieldPath)}function Om(e){return e instanceof Zf?function(e){if("=="===e.op){if(Rf(e.value))return{unaryFilter:{field:Am(e.field),op:"IS_NAN"}};if(Of(e.value))return{unaryFilter:{field:Am(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Rf(e.value))return{unaryFilter:{field:Am(e.field),op:"IS_NOT_NAN"}};if(Of(e.value))return{unaryFilter:{field:Am(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Am(e.field),op:Dm(e.op),value:e.value}}}(e):e instanceof ep?function(e){const t=e.getFilters().map((e=>Om(e)));return 1===t.length?t[0]:{compositeFilter:{op:Mm(e.op),filters:t}}}(e):Ih()}function Rm(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Fm(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Um{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gh.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Gh.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ff.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Um(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Um(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Um(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Um(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Vm{constructor(e){this.ct=e}}function zm(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Bm(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:mm(e,t.key),fields:t.data.value.mapValue.fields,updateTime:um(e,t.version.toTimestamp()),createTime:um(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:jm(t.version)};else{if(!t.isUnknownDocument())return Ih();r.unknownDocument={path:n.path.toArray(),version:jm(t.version)}}return r}function Bm(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function jm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function qm(e){const t=new Kh(e.seconds,e.nanoseconds);return Gh.fromTimestamp(t)}function Wm(e,t){const n=(t.baseMutations||[]).map((t=>Cm(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Cm(e.ct,t))),i=Kh.fromMillis(t.localWriteTimeMs);return new Ng(t.batchId,i,n,r)}function Km(e){const t=qm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?qm(e.lastLimboFreeSnapshotVersion):Gh.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return xh(1===e.documents.length),Dp(xp(wm(e.documents[0])))}(e.query):function(e){return Dp(Tm(e))}(e.query),new Um(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ff.fromBase64String(e.resumeToken))}function Gm(e,t){const n=jm(t.snapshotVersion),r=jm(t.lastLimboFreeSnapshotVersion);let i;i=_p(t.target)?Im(e.ct,t.target):xm(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:wp(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hm(e){const t=Tm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Np(t,t.limit,"L"):t}function Qm(e,t){return new Rg(t.largestBatchId,Cm(e.ct,t.overlayMutation))}function Ym(e,t){const n=t.path.lastSegment();return[e,Id(t.path.popLast()),n]}function Xm(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:jm(r.readTime),documentKey:Id(r.documentKey.path),largestBatchId:r.largestBatchId}}class $m{getBundleMetadata(e,t){return Jm(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:qm(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Jm(e).put(function(e){return{bundleId:e.id,createTime:jm(dm(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Zm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Hm(e.bundledQuery),readTime:qm(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Zm(e).put(function(e){return{name:e.name,readTime:jm(dm(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Jm(e){return ef(e,"bundles")}function Zm(e){return ef(e,"namedQueries")}class ev{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new ev(e,n)}getOverlay(e,t){return tv(e).get(Ym(this.userId,t)).next((e=>e?Qm(this.serializer,e):null))}getOverlays(e,t){const n=Qp();return cd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Rg(t,i);r.push(this.ht(e,o))})),cd.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Id(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(tv(e).H("collectionPathOverlayIndex",r))})),cd.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Qp(),i=Id(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return tv(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=Qm(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=Qp();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tv(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=Qm(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return tv(e).put(function(e,t,n){const[r,i,o]=Ym(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:km(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function tv(e){return ef(e,"documentOverlays")}class nv{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(mf(e.integerValue));else if("doubleValue"in e){const n=mf(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),kd(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(vf(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Vf(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ih()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),$h.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function rv(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function iv(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=rv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}nv.bt=new nv;class ov{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=iv(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=iv(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class sv{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class av{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class lv{constructor(){this.Gt=new ov,this.zt=new sv(this.Gt),this.jt=new av(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class uv{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new uv(this.indexId,this.documentKey,this.arrayValue,n)}}function cv(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=hv(e.arrayValue,t.arrayValue),0!==n?n:(n=hv(e.directionalValue,t.directionalValue),0!==n?n:$h.comparator(e.documentKey,t.documentKey)))}function hv(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class dv{constructor(e){this.Yt=new lf(((e,t)=>Xh.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(xh(e.collectionGroup===this.collectionId),this.en)return!1;const t=Zh(e);if(void 0!==t&&!this.nn(t))return!1;const n=ed(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new lf(Xh.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new td(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new td(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new td(n.field,"asc"===n.dir?0:1)));return new Jh(Jh.UNKNOWN_ID,this.collectionId,t,nd.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fv(e){var t,n;if(xh(e instanceof Zf||e instanceof ep),e instanceof Zf){if(e instanceof pp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Zf.create(e.field,"==",t))))||[];return ep.create(r,"or")}return e}const r=e.filters.map((e=>fv(e)));return ep.create(r,e.op)}function pv(e){if(0===e.getFilters().length)return[];const t=yv(fv(e));return xh(vv(t)),gv(t)||mv(t)?[t]:t.getFilters()}function gv(e){return e instanceof Zf}function mv(e){return e instanceof ep&&rp(e)}function vv(e){return gv(e)||mv(e)||function(e){if(e instanceof ep&&np(e)){for(const t of e.getFilters())if(!gv(t)&&!mv(t))return!1;return!0}return!1}(e)}function yv(e){if(xh(e instanceof Zf||e instanceof ep),e instanceof Zf)return e;if(1===e.filters.length)return yv(e.filters[0]);const t=e.filters.map((e=>yv(e)));let n=ep.create(t,e.op);return n=_v(n),vv(n)?n:(xh(n instanceof ep),xh(tp(n)),xh(n.filters.length>1),n.filters.reduce(((e,t)=>wv(e,t))))}function wv(e,t){let n;return xh(e instanceof Zf||e instanceof ep),xh(t instanceof Zf||t instanceof ep),n=e instanceof Zf?t instanceof Zf?function(e,t){return ep.create([e,t],"and")}(e,t):bv(e,t):t instanceof Zf?bv(t,e):function(e,t){if(xh(e.filters.length>0&&t.filters.length>0),tp(e)&&tp(t))return ap(e,t.getFilters());const n=np(e)?e:t,r=np(e)?t:e,i=n.filters.map((e=>wv(e,r)));return ep.create(i,"or")}(e,t),_v(n)}function bv(e,t){if(tp(t))return ap(t,e.getFilters());{const n=t.filters.map((t=>wv(e,t)));return ep.create(n,"or")}}function _v(e){if(xh(e instanceof Zf||e instanceof ep),e instanceof Zf)return e;const t=e.getFilters();if(1===t.length)return _v(t[0]);if(ip(e))return e;const n=t.map((e=>_v(e))),r=[];return n.forEach((t=>{t instanceof Zf?r.push(t):t instanceof ep&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ep.create(r,e.op)}class Ev{constructor(){this._n=new Sv}addToCollectionParentIndex(e,t){return this._n.add(t),cd.resolve()}getCollectionParents(e,t){return cd.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return cd.resolve()}deleteFieldIndex(e,t){return cd.resolve()}deleteAllFieldIndexes(e){return cd.resolve()}createTargetIndexes(e,t){return cd.resolve()}getDocumentsMatchingTarget(e,t){return cd.resolve(null)}getIndexType(e,t){return cd.resolve(0)}getFieldIndexes(e,t){return cd.resolve([])}getNextCollectionGroupToUpdate(e){return cd.resolve(null)}getMinOffset(e,t){return cd.resolve(od.min())}getMinOffsetFromCollectionGroup(e,t){return cd.resolve(od.min())}updateCollectionGroup(e,t,n){return cd.resolve()}updateIndexEntries(e,t){return cd.resolve()}}class Sv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lf(Qh.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new lf(Qh.comparator)).toArray()}}const kv=new Uint8Array(0);class Cv{constructor(e,t){this.databaseId=t,this.an=new Sv,this.un=new jp((e=>wp(e)),((e,t)=>bp(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Id(r)};return Iv(e).put(i)}return cd.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Wh(t),""],!1,!0);return Iv(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ld(r.parent))}return n}))}addFieldIndex(e,t){const n=Tv(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Lv(e);return i.next((e=>{n.put(Xm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=Tv(e),r=Lv(e),i=xv(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Tv(e),n=xv(e),r=Lv(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return cd.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new dv(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=xv(e);let r=!0;const i=new Map;return cd.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Zp();const r=[];return cd.forEach(i,((i,o)=>{Eh("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(wp(t)));const s=function(e,t){const n=Zh(t);if(void 0===n)return null;for(const r of Ep(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of ed(t))for(const t of Ep(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of ed(t)){const t=0===i.kind?Sp(e,i.fieldPath,e.startAt):kp(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Hf(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of ed(t)){const t=0===i.kind?kp(e,i.fieldPath,e.endAt):Sp(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Hf(n,r)}(o,i),c=this.hn(i,o,l),h=this.hn(i,o,u),d=this.Pn(i,o,a),f=this.In(i.indexId,s,c,l.inclusive,h,u.inclusive,d);return cd.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=$h.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return cd.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:pv(ep.create(e.filters,"and")).map((t=>yp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):kv,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],o),f=s.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new uv(e,$h.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new uv(e,$h.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new dv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return cd.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new lf(Xh.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new lv;for(const r of ed(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);nv.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new lv;return nv.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new lv;return nv.bt.Pt(Mf(this.databaseId,t),n.Ht(function(e){const t=ed(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new lv);let i=0;for(const o of ed(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&Nf(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);nv.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new lv;n.seed(e.Wt()),nv.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Zf&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=Tv(e),r=Lv(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return cd.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new nd(t.sequenceNumber,new od(qm(t.readTime),new $h(Ld(t.documentKey)),t.largestBatchId)):nd.empty(),r=e.fields.map((e=>{let[t,n]=e;return new td(Xh.fromServerFormat(t),n)}));return new Jh(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:jh(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=Tv(e),i=Lv(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>cd.forEach(t,(t=>i.put(Xm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return cd.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?cd.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),cd.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?cd.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return xv(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return xv(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=xv(e);let i=new lf(cv);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new uv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new lf(cv);const r=this.An(t,e);if(null==r)return n;const i=Zh(t);if(null!=i){const o=e.data.field(i.fieldPath);if(Nf(o))for(const i of o.arrayValue.values||[])n=n.add(new uv(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new uv(t.indexId,e.key,kv,r));return n}wn(e,t,n,r,i){Eh("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=cf(o),l=cf(s);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=cf(s)):t?(i(a),a=cf(o)):(a=cf(o),l=cf(s))}}(r,i,cv,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),cd.waitFor(o)}gn(e){let t=1;return Lv(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>cv(e,t))).filter(((e,t,n)=>!t||0!==cv(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=cv(o,e),i=cv(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,kv,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,kv,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return cv(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Pv)}getMinOffset(e,t){return cd.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Ih())))).next(Pv)}}function Iv(e){return ef(e,"collectionParents")}function xv(e){return ef(e,"indexEntries")}function Tv(e){return ef(e,"indexConfiguration")}function Lv(e){return ef(e,"indexState")}function Pv(e){xh(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;sd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new od(t.readTime,t.documentKey,n)}const Dv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Mv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Mv(e,Mv.DEFAULT_COLLECTION_PERCENTILE,Mv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Av(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(l.next((()=>{xh(1===a)})));const u=[];for(const c of n.mutations){const e=Md(t,c.key.path,n.batchId);o.push(i.delete(e)),u.push(c.key)}return cd.waitFor(o).next((()=>u))}function Nv(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ih();t=e.noDocument}return JSON.stringify(t).length}Mv.DEFAULT_COLLECTION_PERCENTILE=10,Mv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mv.DEFAULT=new Mv(41943040,Mv.DEFAULT_COLLECTION_PERCENTILE,Mv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mv.DISABLED=new Mv(-1,0,0);class Ov{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){xh(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Ov(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fv(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Uv(e),o=Fv(e);return o.add({}).next((s=>{xh("number"==typeof s);const a=new Ng(s,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>km(e.ct,t))),i=n.mutations.map((t=>km(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new lf(((e,t)=>jh(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Md(this.userId,e.key.path,s);c=c.add(e.key.path.popLast()),u.push(o.put(l)),u.push(i.put(t,Ad))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),cd.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return Fv(e).get(t).next((e=>e?(xh(e.userId===this.userId),Wm(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?cd.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Fv(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(xh(t.batchId>=n),i=Wm(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Fv(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fv(e).W("userMutationsIndex",t).next((e=>e.map((e=>Wm(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Dd(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Uv(e).Y({range:r},((n,r,o)=>{const[s,a,l]=n,u=Ld(a);if(s===this.userId&&t.path.isEqual(u))return Fv(e).get(l).next((e=>{if(!e)throw Ih();xh(e.userId===this.userId),i.push(Wm(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lf(jh);const r=[];return t.forEach((t=>{const i=Dd(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Uv(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,l=Ld(s);o===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(s)})),cd.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Dd(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new lf(jh);return Uv(e).Y({range:o},((e,t,i)=>{const[o,a,l]=e,u=Ld(a);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(s=s.add(l)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(Fv(e).get(t).next((e=>{if(null===e)throw Ih();xh(e.userId===this.userId),n.push(Wm(this.serializer,e))})))})),cd.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return Av(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),cd.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return cd.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Uv(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ld(e[1]);r.push(t)}else n.done()})).next((()=>{xh(0===r.length)}))}))}containsKey(e,t){return Rv(e,this.userId,t)}xn(e){return Vv(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Rv(e,t,n){const r=Dd(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Uv(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,l]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function Fv(e){return ef(e,"mutations")}function Uv(e){return ef(e,"documentMutations")}function Vv(e){return ef(e,"mutationQueues")}class zv{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new zv(0)}static Bn(){return new zv(-1)}}class Bv{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new zv(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Gh.fromTimestamp(new Kh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>jv(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(xh(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return jv(e).Y(((o,s)=>{const a=Km(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>cd.waitFor(i))).next((()=>r))}forEachTarget(e,t){return jv(e).Y(((e,n)=>{const r=Km(n);t(r)}))}Ln(e){return qv(e).get("targetGlobalKey").next((e=>(xh(null!==e),e)))}kn(e,t){return qv(e).put("targetGlobalKey",t)}qn(e,t){return jv(e).put(Gm(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=wp(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return jv(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=Km(n);bp(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Wv(e);return t.forEach((t=>{const o=Id(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),cd.waitFor(r)}removeMatchingKeys(e,t,n){const r=Wv(e);return cd.forEach(t,(t=>{const i=Id(t.path);return cd.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Wv(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wv(e);let i=Zp();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ld(e[1]),o=new $h(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Id(t.path),r=IDBKeyRange.bound([n],[Wh(n)],!1,!0);let i=0;return Wv(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return jv(e).get(t).next((e=>e?Km(e):null))}}function jv(e){return ef(e,"targets")}function qv(e){return ef(e,"targetGlobal")}function Wv(e){return ef(e,"targetDocuments")}function Kv(e,t){let[n,r]=e,[i,o]=t;const s=jh(n,i);return 0===s?jh(r,o):s}class Gv{constructor(e){this.Kn=e,this.buffer=new lf(Kv),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Kv(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hv{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Eh("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){gd(e)?Eh("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ud(e)}await this.zn(3e5)}))}}class Qv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return cd.resolve(Ed._e);const n=new Gv(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Eh("LruGarbageCollector","Garbage collection skipped; disabled"),cd.resolve(Dv)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Eh("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Dv):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Eh("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),_h()<=jo.DEBUG&&Eh("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),cd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Yv(e,t){return new Qv(e,t)}class Xv{constructor(e,t){this.db=e,this.garbageCollector=Yv(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return $v(e,n)}removeReference(e,t,n){return $v(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return $v(e,t)}er(e,t){return function(e,t){let n=!1;return Vv(e).Z((r=>Rv(e,r,t).next((e=>(e&&(n=!0),cd.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,Gh.min()),Wv(e).delete(function(e){return[0,Id(e.path)]}(o)))))}));r.push(t)}})).next((()=>cd.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return $v(e,t)}Xn(e,t){const n=Wv(e);let r,i=Ed._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:l}=n;0===o?(i!==Ed._e&&t(new $h(Ld(r)),i),i=l,r=a):i=Ed._e})).next((()=>{i!==Ed._e&&t(new $h(Ld(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $v(e,t){return Wv(e).put(function(e,t){return{targetId:0,path:Id(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Jv{constructor(){this.changes=new jp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?cd.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Zv{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return ry(e).put(n)}removeEntry(e,t,n){return ry(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Bm(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Gf.newInvalidDocument(t);return ry(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(iy(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Gf.newInvalidDocument(t)};return ry(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(iy(t))},((e,r)=>{n={document:this.nr(t,r),size:Nv(r)}})).next((()=>n))}getEntries(e,t){let n=Wp();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Wp(),r=new of($h.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Nv(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return cd.resolve();let r=new lf(sy);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(iy(r.first()),iy(r.last())),o=r.getIterator();let s=o.getNext();return ry(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=$h.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&sy(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(iy(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Bm(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ry(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Wp();for(const i of e){const e=this.nr($h.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Up(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Wp();const o=oy(t,n),s=oy(t,od.max());return ry(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr($h.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new ty(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return ny(e).get("remoteDocumentGlobalKey").next((e=>(xh(!!e),e)))}tr(e,t){return ny(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Sm(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=$h.fromSegments(t.noDocument.path),r=qm(t.noDocument.readTime);n=Gf.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ih();{const e=$h.fromSegments(t.unknownDocument.path),r=qm(t.unknownDocument.version);n=Gf.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Kh(e[0],e[1]);return Gh.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Gh.min()))return e}return Gf.newInvalidDocument(e)}}function ey(e){return new Zv(e)}class ty extends Jv{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new jp((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new lf(((e,t)=>jh(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=zm(this.ar.serializer,o);r=r.add(i.path.popLast());const l=Nv(a);n+=l-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=zm(this.ar.serializer,o.convertToNoDocument(Gh.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),cd.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function ny(e){return ef(e,"remoteDocumentGlobal")}function ry(e){return ef(e,"remoteDocumentsV14")}function iy(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function oy(e,t){const n=t.documentKey.path.toArray();return[e,Bm(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function sy(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=jh(n[o],r[o]),i)return i;return i=jh(n.length,r.length),i||(i=jh(n[n.length-2],r[r.length-2]),i||jh(n[n.length-1],r[r.length-1]))}class ay{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ly{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&kg(n.mutation,e,hf.empty(),Kh.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Zp()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zp();const r=Qp();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Gp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Qp();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Zp())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Wp();const o=Xp(),s=Xp();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Tg)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),kg(s.mutation,t,s.mutation.getFieldMask(),Kh.now())):o.set(t.key,hf.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new ay(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Xp();let r=new of(((e,t)=>e-t)),i=Zp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||hf.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Zp()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,u=Yp();l.forEach((e=>{if(!i.has(e)){const r=Eg(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,u))}return cd.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return $h.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Lp(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):cd.resolve(Qp());let s=-1,a=i;return o.next((t=>cd.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?cd.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Zp()))).next((e=>({batchId:s,changes:Hp(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $h(t)).next((e=>{let t=Gp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Gp();return this.indexManager.getCollectionParents(e,i).next((s=>cd.forEach(s,(s=>{const a=function(e,t){return new Cp(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Gf.newInvalidDocument(r)))}));let n=Gp();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&kg(o.mutation,r,hf.empty(),Kh.now()),Up(t,r)&&(n=n.insert(e,r))})),n}))}}class uy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return cd.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:dm(e.createTime)}}(t)),cd.resolve()}getNamedQuery(e,t){return cd.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Hm(e.bundledQuery),readTime:dm(e.readTime)}}(t)),cd.resolve()}}class cy{constructor(){this.overlays=new of($h.comparator),this.hr=new Map}getOverlay(e,t){return cd.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Qp();return cd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),cd.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),cd.resolve()}getOverlaysForCollection(e,t,n){const r=Qp(),i=t.length+1,o=new $h(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return cd.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new of(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Qp(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=Qp(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return cd.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Rg(t,n));let i=this.hr.get(t);void 0===i&&(i=Zp(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class hy{constructor(){this.Pr=new lf(dy.Ir),this.Tr=new lf(dy.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new dy(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new dy(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new $h(new Qh([])),n=new dy(t,e),r=new dy(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new $h(new Qh([])),n=new dy(t,e),r=new dy(t,e+1);let i=Zp();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new dy(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class dy{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return $h.comparator(e.key,t.key)||jh(e.pr,t.pr)}static Er(e,t){return jh(e.pr,t.pr)||$h.comparator(e.key,t.key)}}class fy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new lf(dy.Ir)}checkEmpty(e){return cd.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Ng(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new dy(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return cd.resolve(o)}lookupMutationBatch(e,t){return cd.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return cd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return cd.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return cd.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new dy(t,0),r=new dy(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),cd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new lf(jh);return t.forEach((e=>{const t=new dy(e,0),r=new dy(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),cd.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;$h.isDocumentKey(i)||(i=i.child(""));const o=new dy(new $h(i),0);let s=new lf(jh);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),cd.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){xh(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return cd.forEach(t.mutations,(r=>{const i=new dy(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new dy(t,0),r=this.wr.firstAfterOrEqual(n);return cd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,cd.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class py{constructor(e){this.vr=e,this.docs=new of($h.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return cd.resolve(n?n.document.mutableCopy():Gf.newInvalidDocument(t))}getEntries(e,t){let n=Wp();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Gf.newInvalidDocument(e))})),cd.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Wp();const o=t.path,s=new $h(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||sd(id(s),n)<=0||(r.has(s.key)||Up(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return cd.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ih()}Fr(e,t){return cd.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new gy(this)}getSize(e){return cd.resolve(this.size)}}class gy extends Jv{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),cd.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class my{constructor(e){this.persistence=e,this.Mr=new jp((e=>wp(e)),bp),this.lastRemoteSnapshotVersion=Gh.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hy,this.targetCount=0,this.Br=zv.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),cd.resolve()}getLastRemoteSnapshotVersion(e){return cd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return cd.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),cd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),cd.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new zv(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,cd.resolve()}updateTargetData(e,t){return this.qn(t),cd.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,cd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),cd.waitFor(i).next((()=>r))}getTargetCount(e){return cd.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return cd.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),cd.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),cd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),cd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return cd.resolve(n)}containsKey(e,t){return cd.resolve(this.Nr.containsKey(t))}}class vy{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ed(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new my(this),this.indexManager=new Ev,this.remoteDocumentCache=function(e){return new py(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Vm(t),this.$r=new uy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new fy(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Eh("MemoryPersistence","Starting transaction:",e);const r=new yy(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return cd.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class yy extends ld{constructor(e){super(),this.currentSequenceNumber=e}}class wy{constructor(e){this.persistence=e,this.zr=new hy,this.jr=null}static Hr(e){return new wy(e)}get Jr(){if(this.jr)return this.jr;throw Ih()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),cd.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),cd.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),cd.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return cd.forEach(this.Jr,(n=>{const r=$h.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Gh.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return cd.or([()=>cd.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class by{constructor(e){this.serializer=e}N(e,t,n,r){const i=new hd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pd,{unique:!0}),e.createObjectStore("documentMutations")}(e),_y(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=cd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),_y(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pd,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return cd.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Kd});t.createIndex("collectionPathOverlayIndex",Gd,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Hd,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Nd});t.createIndex("documentKeyIndex",Od),t.createIndex("collectionGroupIndex",Rd)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Bd}).createIndex("sequenceNumberIndex",jd,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:qd}).createIndex("documentKeyIndex",Wd,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Nv(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>cd.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>cd.forEach(n,(n=>{xh(n.userId===t.userId);const r=Wm(this.serializer,n);return Av(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new Qh(n),s=function(e){return[0,Id(e)]}(o);r.push(t.get(s).next((n=>n?cd.resolve():(n=>t.put({targetId:0,path:Id(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>cd.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:zd});const n=t.store("collectionParents"),r=new Sv,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Id(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new Qh(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=Ld(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Km(n),i=Gm(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new $h(Qh.fromString(e.document.name).popFirst(5)):e.noDocument?$h.fromSegments(e.noDocument.path):e.unknownDocument?$h.fromSegments(e.unknownDocument.path):Ih()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>cd.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=ey(this.serializer),i=new vy(wy.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Zp();Wm(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),cd.forEach(n,((e,n)=>{const o=new yh(n),s=ev.lt(this.serializer,o),a=i.getIndexManager(o),l=Ov.lt(o,this.serializer,a,i.referenceDelegate);return new ly(r,l,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Zd(t,Ed._e),e).next()}))}))}}function _y(e){e.createObjectStore("targetDocuments",{keyPath:Ud}).createIndex("documentTargetsIndex",Vd,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fd,{unique:!0}),e.createObjectStore("targetGlobal")}const Ey="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sy{constructor(e,t,n,r,i,o,s,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Sy.D())throw new Ph(Lh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xv(this,r),this.Ti=t+"main",this.serializer=new Vm(a),this.Ei=new dd(this.Ti,this.ui,new by(this.serializer)),this.Qr=new Bv(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ey(this.serializer),this.$r=new $m,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&Sh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ph(Lh.FAILED_PRECONDITION,Ey);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Ed(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Cy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(gd(e))return Eh("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Eh("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return ky(e).get("owner").next((e=>cd.resolve(this.Si(e))))}bi(e){return Cy(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=ef(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return cd.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?cd.resolve(!0):ky(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ph(Lh.FAILED_PRECONDITION,Ey);return!1}}return!(!this.networkEnabled||!this.inForeground)||Cy(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Eh("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Zd(e,Ed._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Cy(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Ov.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Cv(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ev.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Eh("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Jd:14===e?$d:13===e?Xd:12===e?Yd:11===e?Qd:void Ih()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new Zd(r,this.kr?this.kr.next():Ed._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw Sh("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Ph(Lh.FAILED_PRECONDITION,ad);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return ky(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ph(Lh.FAILED_PRECONDITION,Ey)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ky(e).put("owner",t)}static D(){return dd.D()}yi(e){const t=ky(e);return t.get("owner").next((e=>this.Si(e)?(Eh("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):cd.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Sh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Eo()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Eh("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Sh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch($I){Sh("Failed to set zombie client id.",$I)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch($I){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function ky(e){return ef(e,"owner")}function Cy(e){return ef(e,"clientMetadata")}function Iy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class xy{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Zp(),r=Zp();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new xy(e,t.fromCache,n,r)}}class Ty{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ly{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Eo()?8:dd.v(_o())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ty;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(_h()<=jo.DEBUG&&Eh("QueryEngine","SDK will not create cache indexes for query:",Fp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),cd.resolve()):(_h()<=jo.DEBUG&&Eh("QueryEngine","Query:",Fp(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(_h()<=jo.DEBUG&&Eh("QueryEngine","The SDK decides to create cache indexes for query:",Fp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dp(t))):cd.resolve())}ji(e,t){if(Tp(t))return cd.resolve(null);let n=Dp(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Np(t,null,"F"),n=Dp(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Zp(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,Np(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return Tp(t)||r.isEqual(Gh.min())?cd.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?cd.resolve(null):(_h()<=jo.DEBUG&&Eh("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fp(t)),this.es(e,o,t,rd(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new lf(zp(e));return t.forEach(((t,r)=>{Up(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return _h()<=jo.DEBUG&&Eh("QueryEngine","Using full collection scan to execute query:",Fp(t)),this.zi.getDocumentsMatchingQuery(e,t,od.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Py{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new of(jh),this.rs=new jp((e=>wp(e)),bp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ly(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Dy(e,t,n,r){return new Py(e,t,n,r)}async function My(e,t){const n=Th(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Zp();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Ay(e){const t=Th(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Ny(e,t,n){let r=Zp(),i=Zp();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Wp();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Gh.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Eh("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function Oy(e,t){const n=Th(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ry(e,t){const n=Th(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,cd.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Um(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Fy(e,t,n){const r=Th(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!gd(e))throw e;Eh("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Uy(e,t,n){const r=Th(e);let i=Gh.min(),o=Zp();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Th(e),i=r.rs.get(n);return void 0!==i?cd.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Dp(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Gh.min(),n?o:Zp()))).next((e=>(By(r,Vp(t),e),{documents:e,hs:o})))))}function Vy(e,t){const n=Th(e),r=Th(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function zy(e,t){const n=Th(e),r=n.ss.get(t)||Gh.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,rd(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(By(n,t,e),e)))}function By(e,t,n){let r=e.ss.get(t)||Gh.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function jy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zp();const r=await Ry(e,Dp(Hm(t.bundledQuery))),i=Th(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=dm(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(ff.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function qy(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Wy(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ky(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Gy{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Ph(r.error.code,r.error.message))),o?new Gy(e,t,r.state,i):(Sh("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hy{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Ph(n.error.code,n.error.message))),i?new Hy(e,n.state,r):(Sh("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=tg();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Cd(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Qy(e,i):(Sh("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Yy{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Yy(t.clientId,t.onlineState):(Sh("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Xy{constructor(){this.activeTargetIds=tg()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $y{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new of(jh),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=qy(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Xy),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(qy(this.persistenceKey,n));if(e){const t=Qy.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Ky(this.persistenceKey,e));if(n){const r=Hy.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ky(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Eh("SharedClientState","READ",e,t),t}setItem(e,t){Eh("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Eh("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Eh("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Sh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Ed._e;if(null!=e)try{const n=JSON.parse(e);xh("number"==typeof n),t=n}catch(e){Sh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ed._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Gy(this.currentUser,e,t,n),i=Wy(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Wy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Ky(this.persistenceKey,e),i=new Hy(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Qy.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gy.Es(new yh(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Hy.Es(r,t)}xs(e){return Yy.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Eh("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=tg();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Jy{constructor(){this.no=new Xy,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Xy,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zy{io(e){}shutdown(){}}class ew{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Eh("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Eh("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let tw=null;function nw(){return null===tw?tw=268435456+Math.round(2147483648*Math.random()):tw++,"0x"+tw.toString(16)}const rw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iw{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const ow="WebChannelConnection";class sw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=nw(),s=this.bo(e,t.toUriEncodedString());Eh("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(Eh("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw kh("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+wh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=rw[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=nw();return new Promise(((o,s)=>{const a=new ph;a.setWithCredentials(!0),a.listenOnce(ch.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case uh.NO_ERROR:const t=a.getResponseJson();Eh(ow,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case uh.TIMEOUT:Eh(ow,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Ph(Lh.DEADLINE_EXCEEDED,"Request time out"));break;case uh.HTTP_ERROR:const n=a.getStatus();if(Eh(ow,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Lh).indexOf(t)>=0?t:Lh.UNKNOWN}(t.status);s(new Ph(e,t.message))}else s(new Ph(Lh.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Ph(Lh.UNAVAILABLE,"Connection failed."));break;default:Ih()}}finally{Eh(ow,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Eh(ow,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=nw(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ah(),s=lh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");Eh(ow,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=o.createWebChannel(u,a);let h=!1,d=!1;const f=new iw({lo:t=>{d?Eh(ow,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Eh(ow,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),Eh(ow,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,fh.EventType.OPEN,(()=>{d||Eh(ow,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,fh.EventType.CLOSE,(()=>{d||(d=!0,Eh(ow,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,fh.EventType.ERROR,(t=>{d||(d=!0,kh(ow,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Ph(Lh.UNAVAILABLE,"The operation could not be completed")))})),p(c,fh.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];xh(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Eh(ow,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Ug[e];if(void 0!==t)return Bg(t)}(t),i=s.message;void 0===n&&(n=Lh.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Vo(new Ph(n,i)),c.close()}else Eh(ow,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(s,hh.STAT_EVENT,(t=>{t.stat===dh.PROXY?Eh(ow,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===dh.NOPROXY&&Eh(ow,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function aw(){return"undefined"!=typeof window?window:null}function lw(){return"undefined"!=typeof document?document:null}function uw(e){return new am(e,!0)}class cw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Eh("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class hw{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new cw(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Lh.RESOURCE_EXHAUSTED?(Sh(t.toString()),Sh("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Lh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Ph(Lh.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Eh("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Eh("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dw extends hw{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ih()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(xh(void 0===t||"string"==typeof t),ff.fromBase64String(t||"")):(xh(void 0===t||t instanceof Uint8Array),ff.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Lh.UNKNOWN:Bg(e.code);return new Ph(t,e.message||"")}(s);n=new Zg(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=vm(e,r.document.name),o=dm(r.document.updateTime),s=r.document.createTime?dm(r.document.createTime):Gh.min(),a=new Wf({mapValue:{fields:r.document.fields}}),l=Gf.newFoundDocument(i,o,s,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new $g(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=vm(e,r.document),o=r.readTime?dm(r.readTime):Gh.min(),s=Gf.newNoDocument(i,o),a=r.removedTargetIds||[];n=new $g([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=vm(e,r.document),o=r.removedTargetIds||[];n=new $g([],o,i,null)}else{if(!("filter"in t))return Ih();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Fg(r,i),s=e.targetId;n=new Jg(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Gh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Gh.min():t.readTime?dm(t.readTime):Gh.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=bm(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=_p(r)?{documents:Im(e,r)}:{query:xm(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=cm(e,t.resumeToken);const r=lm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Gh.min())>0){n.readTime=um(e,t.snapshotVersion.toTimestamp());const r=lm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ih()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=bm(this.serializer),t.removeTarget=e,this.t_(t)}}class fw extends hw{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(xh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(xh(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?dm(e.updateTime):dm(t);return n.isEqual(Gh.min())&&(n=dm(t)),new yg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=dm(e.commitTime);return this.listener.T_(n,t)}return xh(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=bm(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>km(this.serializer,e)))};this.t_(t)}}class pw extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Ph(Lh.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,pm(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ph(Lh.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,pm(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Lh.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ph(Lh.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class gw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Sh(t),this.g_=!1):Eh("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class mw{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Cw(this)&&(Eh("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Th(e);t.v_.add(4),await yw(t),t.x_.set("Unknown"),t.v_.delete(4),await vw(t)}(this))}))})),this.x_=new gw(n,r)}}async function vw(e){if(Cw(e))for(const t of e.F_)await t(!0)}async function yw(e){for(const t of e.F_)await t(!1)}function ww(e,t){const n=Th(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),kw(n)?Sw(n):qw(n).Jo()&&_w(n,t))}function bw(e,t){const n=Th(e),r=qw(n);n.C_.delete(t),r.Jo()&&Ew(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Cw(n)&&n.x_.set("Unknown"))}function _w(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}qw(e).c_(t)}function Ew(e,t){e.O_.Oe(t),qw(e).l_(t)}function Sw(e){e.O_=new tm({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),qw(e).start(),e.x_.p_()}function kw(e){return Cw(e)&&!qw(e).Ho()&&e.C_.size>0}function Cw(e){return 0===Th(e).v_.size}function Iw(e){e.O_=void 0}async function xw(e){e.C_.forEach(((t,n)=>{_w(e,t)}))}async function Tw(e,t){Iw(e),kw(e)?(e.x_.S_(t),Sw(e)):e.x_.set("Unknown")}async function Lw(e,t,n){if(e.x_.set("Online"),t instanceof Zg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Eh("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Pw(e,n)}else if(t instanceof $g?e.O_.$e(t):t instanceof Jg?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Gh.min()))try{const t=await Ay(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(ff.EMPTY_BYTE_STRING,r.snapshotVersion)),Ew(e,t);const i=new Um(r.target,t,n,r.sequenceNumber);_w(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Eh("RemoteStore","Failed to raise snapshot:",t),await Pw(e,t)}}async function Pw(e,t,n){if(!gd(t))throw t;e.v_.add(1),await yw(e),e.x_.set("Offline"),n||(n=()=>Ay(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Eh("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await vw(e)}))}function Dw(e,t){return t().catch((n=>Pw(e,n,t)))}async function Mw(e){const t=Th(e),n=Ww(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Aw(t);)try{const e=await Oy(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Nw(t,e)}catch(e){await Pw(t,e)}Ow(t)&&Rw(t)}function Aw(e){return Cw(e)&&e.D_.length<10}function Nw(e,t){e.D_.push(t);const n=Ww(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Ow(e){return Cw(e)&&!Ww(e).Ho()&&e.D_.length>0}function Rw(e){Ww(e).start()}async function Fw(e){Ww(e).d_()}async function Uw(e){const t=Ww(e);for(const n of e.D_)t.I_(n.mutations)}async function Vw(e,t,n){const r=e.D_.shift(),i=Og.from(r,t,n);await Dw(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Mw(e)}async function zw(e,t){t&&Ww(e).P_&&await async function(e,t){if(function(e){return zg(e)&&e!==Lh.ABORTED}(t.code)){const n=e.D_.shift();Ww(e).Zo(),await Dw(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Mw(e)}}(e,t),Ow(e)&&Rw(e)}async function Bw(e,t){const n=Th(e);n.asyncQueue.verifyOperationInProgress(),Eh("RemoteStore","RemoteStore received new credentials");const r=Cw(n);n.v_.add(3),await yw(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await vw(n)}async function jw(e,t){const n=Th(e);t?(n.v_.delete(2),await vw(n)):t||(n.v_.add(2),await yw(n),n.x_.set("Unknown"))}function qw(e){return e.N_||(e.N_=function(e,t,n){const r=Th(e);return r.R_(),new dw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:xw.bind(null,e),To:Tw.bind(null,e),u_:Lw.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),kw(e)?Sw(e):e.x_.set("Unknown")):(await e.N_.stop(),Iw(e))}))),e.N_}function Ww(e){return e.B_||(e.B_=function(e,t,n){const r=Th(e);return r.R_(),new fw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Fw.bind(null,e),To:zw.bind(null,e),E_:Uw.bind(null,e),T_:Vw.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await Mw(e)):(await e.B_.stop(),e.D_.length>0&&(Eh("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class Kw{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Dh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Kw(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ph(Lh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gw(e,t){if(Sh("AsyncQueue","".concat(t,": ").concat(e)),gd(e))return new Ph(Lh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Hw{constructor(e){this.comparator=e?(t,n)=>e(t,n)||$h.comparator(t.key,n.key):(e,t)=>$h.comparator(e.key,t.key),this.keyedMap=Gp(),this.sortedSet=new of(this.comparator)}static emptySet(e){return new Hw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Hw))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Hw;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Qw{constructor(){this.L_=new of($h.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ih():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Yw{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Yw(e,t,Hw.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xw{constructor(){this.q_=void 0,this.Q_=[]}}class $w{constructor(){this.queries=new jp((e=>Rp(e)),Op),this.onlineState="Unknown",this.K_=new Set}}async function Jw(e,t){const n=Th(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Xw),i)try{o.q_=await n.onListen(r)}catch(e){const n=Gw(e,"Initialization of query '".concat(Fp(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.Q_.push(t),t.U_(n.onlineState),o.q_&&t.W_(o.q_)&&nb(n)}async function Zw(e,t){const n=Th(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),i=0===o.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function eb(e,t){const n=Th(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&nb(n)}function tb(e,t,n){const r=Th(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function nb(e){e.K_.forEach((e=>{e.next()}))}class rb{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Yw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Yw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class ib{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class ob{constructor(e){this.serializer=e}Ps(e){return vm(this.serializer,e)}Is(e){return e.metadata.exists?Sm(this.serializer,e.document,!1):Gf.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return dm(e)}}class sb{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ab(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=Qh.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new ob(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Zp()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Th(e);let o=Zp(),s=Wp();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(o=o.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await Ry(i,function(e){return Dp(xp(Qh.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Ny(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new ob(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await jy(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function ab(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class lb{constructor(e){this.key=e}}class ub{constructor(e){this.key=e}}class cb{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Zp(),this.mutatedKeys=Zp(),this.ua=zp(e),this.ca=new Hw(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Qw,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=Up(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(s=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(s=!0)),f&&(c?(o=o.add(c),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:o,Pa:n,Xi:s,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ih()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const s=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==o.length||l?{snapshot:new Yw(this.query,e.ca,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:s}:{da:s}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Qw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Zp(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new ub(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new lb(n))})),t}Ra(e){this.oa=e.hs,this.aa=Zp();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Yw.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class hb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class db{constructor(e){this.key=e,this.ma=!1}}class fb{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new jp((e=>Rp(e)),Op),this.pa=new Map,this.ya=new Set,this.wa=new of($h.comparator),this.Sa=new Map,this.ba=new hy,this.Da={},this.Ca=new Map,this.va=zv.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function pb(e,t){const n=zb(e);let r,i;const o=n.ga.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const e=await Ry(n.localStore,Dp(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await gb(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&ww(n.remoteStore,e)}return i}async function gb(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Uy(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Ib(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const o=await Uy(e.localStore,t,!0),s=new cb(t,o.hs),a=s.ha(o.documents),l=Xg.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=s.applyChanges(a,e.isPrimaryClient,l);Ib(e,n,u.da);const c=new hb(t,n,s);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function mb(e,t){const n=Th(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!Op(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Fy(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),bw(n.remoteStore,r.targetId),kb(n,r.targetId)})).catch(ud)):(kb(n,r.targetId),await Fy(n.localStore,r.targetId,!0))}async function vb(e,t){const n=Th(e);try{const e=await function(e,t){const n=Th(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(ff.EMPTY_BYTE_STRING,Gh.min()).withLastLimboFreeSnapshotVersion(Gh.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&s.push(n.Qr.updateTargetData(e,u))}));let a=Wp(),l=Zp();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Ny(e,o,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Gh.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return cd.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(xh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?xh(r.ma):e.removedDocuments.size>0&&(xh(r.ma),r.ma=!1))})),await Lb(n,e,t)}catch(e){await ud(e)}}function yb(e,t,n){const r=Th(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Th(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&nb(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function wb(e,t,n){const r=Th(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),o=i&&i.key;if(o){let e=new of($h.comparator);e=e.insert(o,Gf.newNoDocument(o,Gh.min()));const n=Zp().add(o),i=new Yg(Gh.min(),new Map,new of(jh),e,n);await vb(r,i),r.wa=r.wa.remove(o),r.Sa.delete(t),Tb(r)}else await Fy(r.localStore,t,!1).then((()=>kb(r,t,n))).catch(ud)}async function bb(e,t){const n=Th(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Th(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=cd.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);xh(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Zp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Sb(n,r,null),Eb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lb(n,e)}catch(e){await ud(e)}}async function _b(e,t,n){const r=Th(e);try{const e=await function(e,t){const n=Th(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(xh(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Sb(r,t,n),Eb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Lb(r,e)}catch(n){await ud(n)}}function Eb(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Sb(e,t,n){const r=Th(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function kb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Cb(e,t)}))}function Cb(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(bw(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Tb(e))}function Ib(e,t,n){for(const r of n)r instanceof lb?(e.ba.addReference(r.key,t),xb(e,r)):r instanceof ub?(Eh("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Cb(e,r.key)):Ih()}function xb(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Eh("SyncEngine","New document in limbo: "+n),e.ya.add(r),Tb(e))}function Tb(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new $h(Qh.fromString(t)),r=e.va.next();e.Sa.set(r,new db(n)),e.wa=e.wa.insert(n,r),ww(e.remoteStore,new Um(Dp(xp(n.path)),r,"TargetPurposeLimboResolution",Ed._e))}}async function Lb(e,t,n){const r=Th(e),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{s.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=xy.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.fa.u_(i),await async function(e,t){const n=Th(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>cd.forEach(t,(t=>cd.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>cd.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!gd(e))throw e;Eh("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function Pb(e,t){const n=Th(e);if(!n.currentUser.isEqual(t)){Eh("SyncEngine","User change. New user:",t.toKey());const e=await My(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Ph(Lh.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Lb(n,e.us)}}function Db(e,t){const n=Th(e),r=n.Sa.get(t);if(r&&r.ma)return Zp().add(r.key);{let e=Zp();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function Mb(e,t){const n=Th(e),r=await Uy(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Ib(n,t.targetId,i.da),i}async function Ab(e,t){const n=Th(e);return zy(n.localStore,t).then((e=>Lb(n,e)))}async function Nb(e,t,n,r){const i=Th(e),o=await function(e,t){const n=Th(e),r=Th(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):cd.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await Mw(i.remoteStore):"acknowledged"===n||"rejected"===n?(Sb(i,t,r||null),Eb(i,t),function(e,t){Th(Th(e).mutationQueue).Mn(t)}(i.localStore,t)):Ih(),await Lb(i,o)):Eh("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Ob(e,t,n){const r=Th(e),i=[],o=[];for(const s of t){let e;const t=r.pa.get(s);if(t&&0!==t.length){e=await Ry(r.localStore,Dp(t[0]));for(const e of t){const t=r.ga.get(e),n=await Mb(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Vy(r.localStore,s);e=await Ry(r.localStore,t),await gb(r,Rb(t),s,!1,e.resumeToken)}i.push(e)}return r.fa.u_(o),i}function Rb(e){return Ip(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Fb(e){return function(e){return Th(Th(e).persistence).Li()}(Th(e).localStore)}async function Ub(e,t,n,r){const i=Th(e);if(i.Fa)return void Eh("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await zy(i.localStore,Vp(o[0])),r=Yg.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ff.EMPTY_BYTE_STRING);await Lb(i,e,r);break}case"rejected":await Fy(i.localStore,t,!0),kb(i,t,r);break;default:Ih()}}async function Vb(e,t,n){const r=zb(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Eh("SyncEngine","Adding an already active target "+e);continue}const t=await Vy(r.localStore,e),n=await Ry(r.localStore,t);await gb(r,Rb(t),n.targetId,!1,n.resumeToken),ww(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Fy(r.localStore,e,!1).then((()=>{bw(r.remoteStore,e),kb(r,e)})).catch(ud)}}function zb(e){const t=Th(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Db.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=wb.bind(null,t),t.fa.u_=eb.bind(null,t.eventManager),t.fa.xa=tb.bind(null,t.eventManager),t}function Bb(e){const t=Th(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_b.bind(null,t),t}class jb{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=uw(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Dy(this.persistence,new Ly,e.initialUser,this.serializer)}createPersistence(e){return new vy(wy.Hr,this.serializer)}createSharedClientState(e){return new Jy}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qb extends jb{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Bb(this.Na.syncEngine),await Mw(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Dy(this.persistence,new Ly,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Hv(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new _d(t,this.persistence);return new bd(e.asyncQueue,n)}createPersistence(e){const t=Iy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Mv.withCacheSize(this.cacheSizeBytes):Mv.DEFAULT;return new Sy(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,aw(),lw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jy}}class Wb extends qb{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof $y&&(this.sharedClientState.syncEngine={Zs:Nb.bind(null,t),Xs:Ub.bind(null,t),eo:Vb.bind(null,t),Li:Fb.bind(null,t),Ys:Ab.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Th(e);if(zb(n),Bb(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Ob(n,e.toArray());n.Fa=!0,await jw(n.remoteStore,!0);for(const r of t)ww(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(kb(n,i),Fy(n.localStore,i,!0)))),bw(n.remoteStore,i)})),await t,await Ob(n,e),function(e){const t=Th(e);t.Sa.forEach(((e,n)=>{bw(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new of($h.comparator)}(n),n.Fa=!1,await jw(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=aw();if(!$y.D(t))throw new Ph(Lh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Iy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new $y(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Kb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>yb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pb.bind(null,this.syncEngine),await jw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $w}createDatastore(e){const t=uw(e.databaseInfo.databaseId),n=function(e){return new sw(e)}(e.databaseInfo);return function(e,t,n,r){return new pw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new mw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>yb(this.syncEngine,e,0)),ew.D()?new ew:new Zy)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new fb(e,t,n,r,i,o);return s&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Th(e);Eh("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await yw(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Gb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Sh("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Qb{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Dh,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new ib(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Yb{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ph(Lh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Th(e),r={documents:t.map((e=>mm(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,Qh.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){xh(!!t.found),t.found.name,t.found.updateTime;const n=vm(e,t.found.name),r=dm(t.found.updateTime),i=t.found.createTime?dm(t.found.createTime):Gh.min(),o=new Wf({mapValue:{fields:t.found.fields}});return Gf.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){xh(!!t.missing),xh(!!t.readTime);const n=vm(e,t.missing),r=dm(t.readTime);return Gf.newNoDocument(n,r)}(e,t):Ih()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());xh(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=$h.fromPath(t);this.mutations.push(new Ag(n,this.precondition(n)))})),await async function(e,t){const n=Th(e),r={writes:t.map((e=>km(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,Qh.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ih();t=Gh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ph(Lh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gh.min())?wg.exists(!1):wg.updateTime(t):wg.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gh.min()))throw new Ph(Lh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wg.updateTime(t)}return wg.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Xb{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new cw(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new Yb(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Sd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zg(t)}return!1}}class $b{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=yh.UNAUTHENTICATED,this.clientId=Bh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Eh("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Eh("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ph(Lh.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gw(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Jb(e,t){e.asyncQueue.verifyOperationInProgress(),Eh("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await My(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Zb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await t_(e);Eh("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Bw(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Bw(t.remoteStore,n))),e._onlineComponents=t}function e_(e){return"FirebaseError"===e.name?e.code===Lh.FAILED_PRECONDITION||e.code===Lh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function t_(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Eh("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jb(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!e_(n))throw n;kh("Error using user provided cache. Falling back to memory cache: "+n),await Jb(e,new jb)}}else Eh("FirestoreClient","Using default OfflineComponentProvider"),await Jb(e,new jb);return e._offlineComponents}async function n_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Eh("FirestoreClient","Using user provided OnlineComponentProvider"),await Zb(e,e._uninitializedComponentsProvider._online)):(Eh("FirestoreClient","Using default OnlineComponentProvider"),await Zb(e,new Kb))),e._onlineComponents}function r_(e){return t_(e).then((e=>e.persistence))}function i_(e){return t_(e).then((e=>e.localStore))}function o_(e){return n_(e).then((e=>e.remoteStore))}function s_(e){return n_(e).then((e=>e.syncEngine))}function a_(e){return n_(e).then((e=>e.datastore))}async function l_(e){const t=await n_(e),n=t.eventManager;return n.onListen=pb.bind(null,t.syncEngine),n.onUnlisten=mb.bind(null,t.syncEngine),n}function u_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Dh;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Hb({next:o=>{t.enqueueAndForget((()=>Zw(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ph(Lh.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ph(Lh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new rb(xp(n.path),o,{includeMetadataChanges:!0,Z_:!0});return Jw(e,s)}(await l_(e),e.asyncQueue,t,n,r))),r.promise}function c_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Dh;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Hb({next:n=>{t.enqueueAndForget((()=>Zw(e,s))),n.fromCache&&"server"===r.source?i.reject(new Ph(Lh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new rb(n,o,{includeMetadataChanges:!0,Z_:!0});return Jw(e,s)}(await l_(e),e.asyncQueue,t,n,r))),r.promise}function h_(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?qg().encode(e):e,function(e,t){return new Qb(e,t)}(function(e,t){if(e instanceof Uint8Array)return Gb(e,t);if(e instanceof ArrayBuffer)return Gb(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,uw(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Th(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Th(e),r=dm(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(ab(r));const i=new sb(r,e.localStore,t.serializer);let o=await t.Oa();for(;o;){const e=await i.na(o);e&&n._updateProgress(e),o=await t.Oa()}const s=await i.complete();return await Lb(e,s.sa,void 0),await function(e,t){const n=Th(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ia)}catch(e){return kh("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await s_(e),i,r)}))}function d_(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const f_=new Map;function p_(e,t,n){if(!n)throw new Ph(Lh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function g_(e,t,n,r){if(!0===t&&!0===r)throw new Ph(Lh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function m_(e){if(!$h.isDocumentKey(e))throw new Ph(Lh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function v_(e){if($h.isDocumentKey(e))throw new Ph(Lh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function y_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ih()}function w_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ph(Lh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=y_(e);throw new Ph(Lh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function b_(e,t){if(t<=0)throw new Ph(Lh.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class __{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ph(Lh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ph(Lh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d_(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ph(Lh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ph(Lh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ph(Lh.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E_{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new __({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ph(Lh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ph(Lh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new __(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ah;switch(e.type){case"firstParty":return new Fh(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ph(Lh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=f_.get(e);t&&(Eh("ComponentProvider","Removing Datastore"),f_.delete(e),t.terminate())}(this),Promise.resolve()}}function S_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=w_(e,E_))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&kh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=yh.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ho(JSON.stringify({alg:"none",type:"JWT"})),ho(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Ph(Lh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new yh(o)}e._authCredentials=new Nh(new Mh(t,n))}}class k_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new k_(this.firestore,e,this._query)}}class C_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new I_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new C_(this.firestore,e,this._key)}}class I_ extends k_{constructor(e,t,n){super(e,t,xp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new C_(this.firestore,null,new $h(e))}withConverter(e){return new I_(this.firestore,e,this._path)}}function x_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ro(e),p_("collection","path",t),e instanceof E_){const n=Qh.fromString(t,...r);return v_(n),new I_(e,null,n)}{if(!(e instanceof C_||e instanceof I_))throw new Ph(Lh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qh.fromString(t,...r));return v_(n),new I_(e.firestore,null,n)}}function T_(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ro(e),1===arguments.length&&(t=Bh.newId()),p_("doc","path",t),e instanceof E_){const n=Qh.fromString(t,...r);return m_(n),new C_(e,null,new $h(n))}{if(!(e instanceof C_||e instanceof I_))throw new Ph(Lh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Qh.fromString(t,...r));return m_(n),new C_(e.firestore,e instanceof I_?e.converter:null,new $h(n))}}function L_(e,t){return e=Ro(e),t=Ro(t),(e instanceof C_||e instanceof I_)&&(t instanceof C_||t instanceof I_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function P_(e,t){return e=Ro(e),t=Ro(t),e instanceof k_&&t instanceof k_&&e.firestore===t.firestore&&Op(e._query,t._query)&&e.converter===t.converter}class D_{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new cw(this,"async_queue_retry"),this._u=()=>{const e=lw();e&&Eh("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=lw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=lw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new Dh;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch($I){if(!gd($I))throw $I;Eh("AsyncQueue","Operation failed with retryable error: "+$I)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Sh("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=Kw.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Ih()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function M_(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class A_{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class N_ extends E_{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new D_,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||R_(this),this._firestoreClient.terminate()}}function O_(e){return e._firestoreClient||R_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function R_(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new _f(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,d_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new $b(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function F_(e,t,n){const r=new Dh;return e.asyncQueue.enqueue((async()=>{try{await Jb(e,n),await Zb(e,t),r.resolve()}catch(e){const n=e;if(!e_(n))throw n;kh("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function U_(e){return function(e){const t=new Dh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Th(e);Cw(n.remoteStore)||Eh("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Th(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=Gw(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await s_(e),t))),t.promise}(O_(e=w_(e,N_)))}function V_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await r_(e),n=await o_(e);return t.setNetworkEnabled(!0),function(e){const t=Th(e);return t.v_.delete(0),vw(t)}(n)}))}(O_(e=w_(e,N_)))}function z_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await r_(e),n=await o_(e);return t.setNetworkEnabled(!1),async function(e){const t=Th(e);t.v_.add(0),await yw(t),t.x_.set("Offline")}(n)}))}(O_(e=w_(e,N_)))}function B_(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Th(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await i_(e),t)))}(O_(e=w_(e,N_)),t).then((t=>t?new k_(e,null,t.query):null))}function j_(e){if(e._initialized||e._terminated)throw new Ph(Lh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class q_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new q_(ff.fromBase64String(e))}catch(e){throw new Ph(Lh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new q_(ff.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class W_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xh(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class K_{constructor(e){this._methodName=e}}class G_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ph(Lh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ph(Lh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jh(this._lat,e._lat)||jh(this._long,e._long)}}const H_=/^__.*__$/;class Q_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Tg(e,this.data,this.fieldMask,t,this.fieldTransforms):new xg(e,this.data,t,this.fieldTransforms)}}class Y_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Tg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function X_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ih()}}class $_{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new $_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return vE(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(X_(this.du)&&H_.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class J_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||uw(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $_({du:e,methodName:t,wu:n,path:Xh.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z_(e){const t=e._freezeSettings(),n=uw(e._databaseId);return new J_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function eE(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Su(o.merge||o.mergeFields?2:0,t,n,i);fE("Data must be an object, but it was:",s,r);const a=hE(r,s);let l,u;if(o.merge)l=new hf(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=pE(t,r,n);if(!s.contains(i))throw new Ph(Lh.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));yE(e,i)||e.push(i)}l=new hf(e),u=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=s.fieldTransforms;return new Q_(new Wf(a),l,u)}class tE extends K_{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tE}}function nE(e,t,n){return new $_({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class rE extends K_{_toFieldTransform(e){return new vg(e.path,new ug)}isEqual(e){return e instanceof rE}}class iE extends K_{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=nE(this,e,!0),n=this.bu.map((e=>cE(e,t))),r=new cg(n);return new vg(e.path,r)}isEqual(e){return e instanceof iE&&To(this.bu,e.bu)}}class oE extends K_{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=nE(this,e,!0),n=this.bu.map((e=>cE(e,t))),r=new dg(n);return new vg(e.path,r)}isEqual(e){return e instanceof oE&&To(this.bu,e.bu)}}class sE extends K_{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new pg(e.serializer,ig(e.serializer,this.Du));return new vg(e.path,t)}isEqual(e){return e instanceof sE&&this.Du===e.Du}}function aE(e,t,n,r){const i=e.Su(1,t,n);fE("Data must be an object, but it was:",i,r);const o=[],s=Wf.empty();nf(r,((e,r)=>{const a=mE(t,e,n);r=Ro(r);const l=i.fu(a);if(r instanceof tE)o.push(a);else{const e=cE(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new hf(o);return new Y_(s,a,i.fieldTransforms)}function lE(e,t,n,r,i,o){const s=e.Su(1,t,n),a=[pE(t,r,n)],l=[i];if(o.length%2!=0)throw new Ph(Lh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(pE(t,o[d])),l.push(o[d+1]);const u=[],c=Wf.empty();for(let d=a.length-1;d>=0;--d)if(!yE(u,a[d])){const e=a[d];let t=l[d];t=Ro(t);const n=s.fu(e);if(t instanceof tE)u.push(e);else{const r=cE(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new hf(u);return new Y_(c,h,s.fieldTransforms)}function uE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return cE(n,e.Su(r?4:3,t))}function cE(e,t){if(dE(e=Ro(e)))return fE("Unsupported field value:",t,e),hE(e,t);if(e instanceof K_)return function(e,t){if(!X_(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=cE(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Ro(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ig(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Kh.fromDate(e);return{timestampValue:um(t.serializer,n)}}if(e instanceof Kh){const n=new Kh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:um(t.serializer,n)}}if(e instanceof G_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof q_)return{bytesValue:cm(t.serializer,e._byteString)};if(e instanceof C_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:fm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(y_(e)))}(e,t)}function hE(e,t){const n={};return rf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nf(e,((e,r)=>{const i=cE(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function dE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Kh||e instanceof G_||e instanceof q_||e instanceof C_||e instanceof K_)}function fE(e,t,n){if(!dE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=y_(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function pE(e,t,n){if((t=Ro(t))instanceof W_)return t._internalPath;if("string"==typeof t)return mE(e,t);throw vE("Field path arguments must be of type string or ",e,!1,void 0,n)}const gE=new RegExp("[~\\*/\\[\\]]");function mE(e,t,n){if(t.search(gE)>=0)throw vE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new W_(...t.split("."))._internalPath}catch(ha){throw vE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function vE(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new Ph(Lh.INVALID_ARGUMENT,a+e+l)}function yE(e,t){return e.some((e=>e.isEqual(t)))}class wE{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new C_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new bE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_E("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class bE extends wE{data(){return super.data()}}function _E(e,t){return"string"==typeof t?mE(e,t):t instanceof W_?t._internalPath:t._delegate._internalPath}function EE(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ph(Lh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SE{}class kE extends SE{}function CE(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof SE&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof xE)).length,n=e.filter((e=>e instanceof IE)).length;if(t>1||t>0&&n>0)throw new Ph(Lh.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class IE extends kE{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new IE(e,t,n)}_apply(e){const t=this._parse(e);return OE(e._query,t),new k_(e.firestore,e.converter,Ap(e._query,t))}_parse(e){const t=Z_(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){NE(s,o);const t=[];for(const n of s)t.push(AE(r,e,n));a={arrayValue:{values:t}}}else a=AE(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||NE(s,o),a=uE(n,t,s,"in"===o||"not-in"===o);return Zf.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class xE extends SE{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xE(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ep.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)OE(n,i),n=Ap(n,i)}(e._query,t),new k_(e.firestore,e.converter,Ap(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class TE extends kE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new TE(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xf(t,n)}(e._query,this._field,this._direction);return new k_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Cp(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class LE extends kE{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new LE(e,t,n)}_apply(e){return new k_(e.firestore,e.converter,Np(e._query,this._limit,this._limitType))}}class PE extends kE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new PE(e,t,n)}_apply(e){const t=ME(e,this.type,this._docOrFields,this._inclusive);return new k_(e.firestore,e.converter,function(e,t){return new Cp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class DE extends kE{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new DE(e,t,n)}_apply(e){const t=ME(e,this.type,this._docOrFields,this._inclusive);return new k_(e.firestore,e.converter,function(e,t){return new Cp(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function ME(e,t,n,r){if(n[0]=Ro(n[0]),n[0]instanceof wE)return function(e,t,n,r,i){if(!r)throw new Ph(Lh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Pp(e))if(s.field.isKeyField())o.push(Mf(t,r.key));else{const e=r.data.field(s.field);if(yf(e))throw new Ph(Lh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Hf(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Z_(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new Ph(Lh.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const o=i[l];if(s[l].field.isKeyField()){if("string"!=typeof o)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Lp(e)&&-1!==o.indexOf("/"))throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(Qh.fromString(o));if(!$h.isDocumentKey(n))throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new $h(n);a.push(Mf(t,i))}else{const e=uE(n,r,o);a.push(e)}}return new Hf(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function AE(e,t,n){if("string"==typeof(n=Ro(n))){if(""===n)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lp(t)&&-1!==n.indexOf("/"))throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(Qh.fromString(n));if(!$h.isDocumentKey(r))throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Mf(e,new $h(r))}if(n instanceof C_)return Mf(e,n._key);throw new Ph(Lh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(y_(n),"."))}function NE(e,t){if(!Array.isArray(e)||0===e.length)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function OE(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ph(Lh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ph(Lh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class RE{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Cf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ih()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return nf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new G_(mf(e.latitude),mf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=wf(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(bf(e));default:return null}}convertTimestamp(e){const t=gf(e);return new Kh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qh.fromString(e);xh(Fm(n));const r=new Ef(n.get(1),n.get(3)),i=new $h(n.popFirst(5));return r.isEqual(t)||Sh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function FE(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class UE extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new q_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new C_(this.firestore,null,t)}}class VE{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zE extends wE{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new BE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(_E("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class BE extends zE{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class jE{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new VE(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new BE(this._firestore,this._userDataWriter,n.key,n,new VE(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ph(Lh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new BE(e._firestore,e._userDataWriter,n.doc.key,n.doc,new VE(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new BE(e._firestore,e._userDataWriter,t.doc.key,t.doc,new VE(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:qE(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function qE(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ih()}}function WE(e,t){return e instanceof zE&&t instanceof zE?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof jE&&t instanceof jE&&e._firestore===t._firestore&&P_(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class KE extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new q_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new C_(this.firestore,null,t)}}function GE(e){e=w_(e,C_);const t=w_(e.firestore,N_),n=O_(t),r=new KE(t);return function(e,t){const n=new Dh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Th(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Ph(Lh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Gw(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await i_(e),t,n))),n.promise}(n,e._key).then((n=>new zE(t,r,e._key,n,new VE(null!==n&&n.hasLocalMutations,!0),e.converter)))}function HE(e){e=w_(e,k_);const t=w_(e.firestore,N_),n=O_(t),r=new KE(t);return function(e,t){const n=new Dh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Uy(e,t,!0),i=new cb(t,r.hs),o=i.ha(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=Gw(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await i_(e),t,n))),n.promise}(n,e._query).then((n=>new jE(t,r,e,n)))}function QE(e,t,n){e=w_(e,C_);const r=w_(e.firestore,N_),i=FE(e.converter,t,n);return JE(r,[eE(Z_(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,wg.none())])}function YE(e,t,n){e=w_(e,C_);const r=w_(e.firestore,N_),i=Z_(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=Ro(t))||t instanceof W_?lE(i,"updateDoc",e._key,t,n,a):aE(i,"updateDoc",e._key,t),JE(r,[o.toMutation(e._key,wg.exists(!0))])}function XE(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=Ro(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||M_(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(M_(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let c,h,d;if(e instanceof C_)h=w_(e.firestore,N_),d=xp(e._key.path),c={next:t=>{n[l]&&n[l](ZE(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=w_(e,k_);h=w_(t.firestore,N_),d=t._query;const r=new KE(h);c={next:e=>{n[l]&&n[l](new jE(h,r,t,e))},error:n[l+1],complete:n[l+2]},EE(e._query)}return function(e,t,n,r){const i=new Hb(r),o=new rb(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Jw(await l_(e),o))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Zw(await l_(e),o)))}}(O_(h),d,u,c)}function $E(e,t){return function(e,t){const n=new Hb(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Th(e).K_.add(t),t.next()}(await l_(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Th(e).K_.delete(t)}(await l_(e),n)))}}(O_(e=w_(e,N_)),M_(t)?t:{next:t})}function JE(e,t){return function(e,t){const n=new Dh;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Bb(e);try{const e=await function(e,t){const n=Th(e),r=Kh.now(),i=t.reduce(((e,t)=>e.add(t.key)),Zp());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Wp(),l=Zp();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Cg(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Tg(e.key,t,Kf(t.value.mapValue),wg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Hp(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new of(jh)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Lb(r,e.changes),await Mw(r.remoteStore)}catch(e){const t=Gw(e,"Failed to persist write");n.reject(t)}}(await s_(e),t,n))),n.promise}(O_(e),t)}function ZE(e,t,n){const r=n.docs.get(t._key),i=new KE(e);return new zE(e,i,t._key,r,new VE(n.hasPendingWrites,n.fromCache),t.converter)}const eS={maxAttempts:5};class tS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Z_(e)}set(e,t,n){this._verifyNotCommitted();const r=nS(e,this._firestore),i=FE(r.converter,t,n),o=eE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,wg.none())),this}update(e,t,n){this._verifyNotCommitted();const r=nS(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=Ro(t))||t instanceof W_?lE(this._dataReader,"WriteBatch.update",r._key,t,n,s):aE(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,wg.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nS(e,this._firestore);return this._mutations=this._mutations.concat(new Mg(t._key,wg.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ph(Lh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nS(e,t){if((e=Ro(e)).firestore!==t)throw new Ph(Lh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class rS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Z_(e)}get(e){const t=nS(e,this._firestore),n=new UE(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ih();const r=e[0];if(r.isFoundDocument())return new wE(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new wE(this._firestore,n,t._key,null,t.converter);throw Ih()}))}set(e,t,n){const r=nS(e,this._firestore),i=FE(r.converter,t,n),o=eE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=nS(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=Ro(t))||t instanceof W_?lE(this._dataReader,"Transaction.update",r._key,t,n,s):aE(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=nS(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nS(e,this._firestore),n=new KE(this._firestore);return super.get(e).then((e=>new zE(this._firestore,n,t._key,e._document,new VE(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){wh=e}(xs),_s(new Fo("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new N_(new Oh(e.getProvider("auth-internal")),new Vh(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ph(Lh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ef(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Ms(vh,"4.4.3",e),Ms(vh,"4.4.3","esm2017")}();function iS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ph("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function oS(){if("undefined"===typeof Uint8Array)throw new Ph("unimplemented","Uint8Arrays are not available in this environment.")}function sS(){if("undefined"==typeof atob)throw new Ph("unimplemented","Blobs are unavailable in Firestore in this environment.")}class aS{constructor(e){this._delegate=e}static fromBase64String(e){return sS(),new aS(q_.fromBase64String(e))}static fromUint8Array(e){return oS(),new aS(q_.fromUint8Array(e))}toBase64(){return sS(),this._delegate.toBase64()}toUint8Array(){return oS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class uS{enableIndexedDbPersistence(e,t){return function(e,t){j_(e=w_(e,N_));const n=O_(e);if(n._uninitializedComponentsProvider)throw new Ph(Lh.FAILED_PRECONDITION,"SDK cache is already specified.");kh("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Kb;return F_(n,i,new qb(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){j_(e=w_(e,N_));const t=O_(e);if(t._uninitializedComponentsProvider)throw new Ph(Lh.FAILED_PRECONDITION,"SDK cache is already specified.");kh("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Kb;return F_(t,r,new Wb(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Ph(Lh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Dh;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!dd.D())return Promise.resolve();const t=e+"main";await dd.delete(t)}(Iy(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class cS{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ef||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||kh("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S_(this._delegate,e,t,n)}enableNetwork(){return V_(this._delegate)}disableNetwork(){return z_(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,g_("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return U_(this._delegate)}onSnapshotsInSync(e){return $E(this._delegate,e)}get app(){if(!this._appCompat)throw new Ph("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new kS(this,x_(this._delegate,e))}catch($I){throw mS($I,"collection()","Firestore.collection()")}}doc(e){try{return new gS(this,T_(this._delegate,e))}catch($I){throw mS($I,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new _S(this,function(e,t){if(e=w_(e,E_),p_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ph(Lh.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new k_(e,null,function(e){return new Cp(Qh.emptyPath(),e)}(t))}(this._delegate,e))}catch($I){throw mS($I,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=w_(e,N_);const r=Object.assign(Object.assign({},eS),n);return function(e){if(e.maxAttempts<1)throw new Ph(Lh.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Dh;return e.asyncQueue.enqueueAndForget((async()=>{const i=await a_(e);new Xb(e.asyncQueue,i,n,t,r).ja()})),r.promise}(O_(e),(n=>t(new rS(e,n))),r)}(this._delegate,(t=>e(new dS(this,t))))}batch(){return O_(this._delegate),new fS(new tS(this._delegate,(e=>JE(this._delegate,e))))}loadBundle(e){return function(e,t){const n=O_(e=w_(e,N_)),r=new A_;return h_(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return B_(this._delegate,e).then((e=>e?new _S(this,e):null))}}class hS extends RE{constructor(e){super(),this.firestore=e}convertBytes(e){return new aS(new q_(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return gS.forKey(t,this.firestore,null)}}class dS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hS(e)}get(e){const t=CS(e);return this._delegate.get(t).then((e=>new wS(this._firestore,new zE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=CS(e);return n?(iS("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=CS(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=CS(e);return this._delegate.delete(t),this}}class fS{constructor(e){this._delegate=e}set(e,t,n){const r=CS(e);return n?(iS("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=CS(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=CS(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class pS{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new BE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bS(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=pS.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new pS(e,new hS(e),t),r.set(t,i)),i}}pS.INSTANCES=new WeakMap;class gS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hS(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Ph("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new gS(t,new C_(t._delegate,n,new $h(e)))}static forKey(e,t,n){return new gS(t,new C_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new kS(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new kS(this.firestore,x_(this._delegate,e))}catch($I){throw mS($I,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Ro(e))instanceof C_&&L_(this._delegate,e)}set(e,t){t=iS("DocumentReference.set",t);try{return t?QE(this._delegate,e,t):QE(this._delegate,e)}catch($I){throw mS($I,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?YE(this._delegate,e):YE(this._delegate,e,t,...r)}catch($I){throw mS($I,"updateDoc()","DocumentReference.update()")}}delete(){return JE(w_((e=this._delegate).firestore,N_),[new Mg(e._key,wg.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=vS(t),i=yS(t,(e=>new wS(this.firestore,new zE(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return XE(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?GE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=w_(e,C_);const t=w_(e.firestore,N_);return u_(O_(t),e._key,{source:"server"}).then((n=>ZE(t,e,n)))}(this._delegate):function(e){e=w_(e,C_);const t=w_(e.firestore,N_);return u_(O_(t),e._key).then((n=>ZE(t,e,n)))}(this._delegate),t.then((e=>new wS(this.firestore,new zE(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new gS(this.firestore,e?this._delegate.withConverter(pS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function mS(e,t,n){return e.message=e.message.replace(t,n),e}function vS(e){for(const t of e)if("object"===typeof t&&!lS(t))return t;return{}}function yS(e,t){var n,r;let i;return i=lS(e[0])?e[0]:lS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class wS{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new gS(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return WE(this._delegate,e._delegate)}}class bS extends wS{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Ih(),t}}class _S{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hS(e)}where(e,t,n){try{return new _S(this.firestore,CE(this._delegate,function(e,t,n){const r=t,i=_E("where",e);return IE._create(i,r,n)}(e,t,n)))}catch($I){throw mS($I,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new _S(this.firestore,CE(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=_E("orderBy",e);return TE._create(n,t)}(e,t)))}catch($I){throw mS($I,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new _S(this.firestore,CE(this._delegate,(b_("limit",t=e),LE._create("limit",t,"F"))))}catch(t){throw mS(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new _S(this.firestore,CE(this._delegate,(b_("limitToLast",t=e),LE._create("limitToLast",t,"L"))))}catch(t){throw mS(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new _S(this.firestore,CE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PE._create("startAt",t,!0)}(...arguments)))}catch($I){throw mS($I,"startAt()","Query.startAt()")}}startAfter(){try{return new _S(this.firestore,CE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return PE._create("startAfter",t,!1)}(...arguments)))}catch($I){throw mS($I,"startAfter()","Query.startAfter()")}}endBefore(){try{return new _S(this.firestore,CE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return DE._create("endBefore",t,!1)}(...arguments)))}catch($I){throw mS($I,"endBefore()","Query.endBefore()")}}endAt(){try{return new _S(this.firestore,CE(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return DE._create("endAt",t,!0)}(...arguments)))}catch($I){throw mS($I,"endAt()","Query.endAt()")}}isEqual(e){return P_(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?HE(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=w_(e,k_);const t=w_(e.firestore,N_),n=O_(t),r=new KE(t);return c_(n,e._query,{source:"server"}).then((n=>new jE(t,r,e,n)))}(this._delegate):function(e){e=w_(e,k_);const t=w_(e.firestore,N_),n=O_(t),r=new KE(t);return EE(e._query),c_(n,e._query).then((n=>new jE(t,r,e,n)))}(this._delegate),t.then((e=>new SS(this.firestore,new jE(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=vS(t),i=yS(t,(e=>new SS(this.firestore,new jE(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return XE(this._delegate,r,i)}withConverter(e){return new _S(this.firestore,e?this._delegate.withConverter(pS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class ES{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class SS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new _S(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new bS(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new ES(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new bS(this._firestore,n))}))}isEqual(e){return WE(this._delegate,e._delegate)}}class kS extends _S{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new gS(this.firestore,e):null}doc(e){try{return new gS(this.firestore,void 0===e?T_(this._delegate):T_(this._delegate,e))}catch($I){throw mS($I,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=w_(e.firestore,N_),r=T_(e),i=FE(e.converter,t);return JE(n,[eE(Z_(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,wg.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new gS(this.firestore,e)))}isEqual(e){return L_(this._delegate,e._delegate)}withConverter(e){return new kS(this.firestore,e?this._delegate.withConverter(pS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function CS(e){return w_(e,C_)}class IS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new W_(...t)}static documentId(){return new IS(Xh.keyField().canonicalString())}isEqual(e){return(e=Ro(e))instanceof W_&&this._delegate._internalPath.isEqual(e._internalPath)}}class xS{constructor(e){this._delegate=e}static serverTimestamp(){const e=new rE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new xS(e)}static delete(){const e=new tE("deleteField");return e._methodName="FieldValue.delete",new xS(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iE("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new xS(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new oE("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new xS(e)}static increment(e){const t=new sE("increment",e);return t._methodName="FieldValue.increment",new xS(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TS={Firestore:cS,GeoPoint:G_,Timestamp:Kh,Blob:aS,Transaction:dS,WriteBatch:fS,DocumentReference:gS,DocumentSnapshot:wS,Query:_S,QueryDocumentSnapshot:bS,QuerySnapshot:SS,CollectionReference:kS,FieldPath:IS,FieldValue:xS,setLogLevel:function(e){var t;t=e,bh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var LS;(function(e,t){e.INTERNAL.registerComponent(new Fo("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},TS)))})(LS=$s,((e,t)=>new cS(e,t,new uS))),LS.registerVersion("@firebase/firestore-compat","0.3.26");$s.initializeApp({apiKey:"AIzaSyApqxmExbGqE8ejAxDlLA0rV7ccN7fUsdA",authDomain:"maps-react-app-84ddd.firebaseapp.com",projectId:"maps-react-app-84ddd",storageBucket:"maps-react-app-84ddd.appspot.com",messagingSenderId:"688383032028",appId:"1:688383032028:web:82c59783c4b8791ea6d219"});const PS=$s.firestore(),DS=()=>{const e=$e(),{isAuth:t,email:n}=function(){const{email:e,token:t,id:n}=Je((e=>e.user));return{isAuth:!!e,email:e,token:t,id:n}}(),[i,o]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=PS.collection("quests").onSnapshot((e=>{const t=e.docs.map((e=>({id:e.id,lat:e.data().lat||0,lng:e.data().lng||0})));o(t)}));return()=>e()}),[]);const s=()=>{i.forEach((e=>{PS.collection("quests").doc(e.id).delete().then((()=>{console.log("Marker deleted from Firestore")})).catch((e=>{console.error("Error deleting marker from Firestore: ",e)}))})),o([])};return t?(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("h1",{children:"Welcome"}),(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("h1",{children:"Map App"}),(0,Wn.jsx)(ao,{markers:i,onMapClick:e=>{const t=e.latLng;if(t){const e={lat:t.lat(),lng:t.lng()};PS.collection("quests").add({location:e,timestamp:(new Date).toISOString()}).then((e=>{console.log("New quest added with ID: ",e.id)})).catch((e=>{console.error("Error adding new quest: ",e)}))}},onMarkerDragEnd:(e,t)=>{const n=t.latLng;if(n){const t=i.map(((t,r)=>r===e?{id:"",lat:n.lat(),lng:n.lng()}:t));o(t)}},onDeleteAllMarkers:s,deleteOneMarker:e=>{const t=[...i];t.splice(e,1),o(t)}})]}),(0,Wn.jsx)("button",{onClick:s,children:"Delete all markers"}),(0,Wn.jsxs)("button",{onClick:()=>e(jn()),children:["Log out from ",n]})]}):(0,Wn.jsxs)(Wn.Fragment,{children:[(0,Wn.jsx)("h1",{children:"Home"}),(0,Wn.jsx)(Ce,{to:"/login",children:"login"})]})};function MS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function AS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NS=AS,OS=new Co("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),RS=new Ho("@firebase/auth");function FS(e){if(RS.logLevel<=jo.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];RS.error("Auth (".concat(xs,"): ").concat(e),...n)}}function US(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw BS(e,...n)}function VS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return BS(e,...n)}function zS(e,t,n){const r=Object.assign(Object.assign({},NS()),{[t]:n});return new Co("auth","Firebase",r).create(t,{appName:e.name})}function BS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return OS.create(e,...n)}function jS(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw BS(t,...r)}}function qS(e){const t="INTERNAL ASSERTION FAILED: "+e;throw FS(t),new Error(t)}function WS(e,t){e||qS(t)}function KS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function GS(){return"http:"===HS()||"https:"===HS()}function HS(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function QS(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(GS()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class YS{constructor(e,t){this.shortDelay=e,this.longDelay=t,WS(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_o())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return QS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function XS(e,t){WS(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class $S{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void qS("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void qS("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void qS("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const JS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ZS=new YS(3e4,6e4);function ek(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function tk(e,t,n,r){return nk(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=Po(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),$S.fetch()(ik(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function nk(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},JS),t);try{const t=new sk(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw ak(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw ak(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw ak(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw ak(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw zS(e,a,s);US(e,a)}}catch($I){if($I instanceof ko)throw $I;US(e,"network-request-failed",{message:String($I)})}}async function rk(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await tk(e,t,n,r,i);return"mfaPendingCredential"in o&&US(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ik(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?XS(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function ok(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(VS(this.auth,"network-request-failed"))),ZS.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function ak(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=VS(e,t,r);return i.customData._tokenResponse=n,i}function lk(e){return void 0!==e&&void 0!==e.enterprise}class uk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ok(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function ck(e,t){return tk(e,"GET","/v2/recaptchaConfig",ek(e,t))}function hk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch($I){}}function dk(e){return 1e3*Number(e)}function fk(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return FS("JWT malformed, contained fewer than 3 sections"),null;try{const e=fo(n);return e?JSON.parse(e):(FS("Failed to decode base64 JWT payload"),null)}catch($I){return FS("Caught error parsing JWT payload as JSON",null===$I||void 0===$I?void 0:$I.toString()),null}}async function pk(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch($I){throw $I instanceof ko&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}($I)&&e.auth.currentUser===e&&await e.auth.signOut(),$I}}class gk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch($I){return void((null===$I||void 0===$I?void 0:$I.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class mk{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=hk(this.lastLoginAt),this.creationTime=hk(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function vk(e){var t;const n=e.auth,r=await e.getIdToken(),i=await pk(e,async function(e,t){return tk(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));jS(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=MS(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,s),l=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),c=!!l&&u,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new mk(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(e,h)}class yk{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jS(e.idToken,"internal-error"),jS("undefined"!==typeof e.idToken,"internal-error"),jS("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=fk(e);return jS(t,"internal-error"),jS("undefined"!==typeof t.exp,"internal-error"),jS("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return jS(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await nk(e,{},(async()=>{const n=Po({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=ik(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",$S.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new yk;return n&&(jS("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(jS("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(jS("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new yk,this.toJSON())}_performRefresh(){return qS("not implemented")}}function wk(e,t){jS("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class bk{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=MS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mk(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pk(this,this.stsTokenManager.getToken(this.auth,e));return jS(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Ro(e),r=await n.getIdToken(t),i=fk(r);jS(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:hk(dk(i.auth_time)),issuedAtTime:hk(dk(i.iat)),expirationTime:hk(dk(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Ro(e);await vk(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(jS(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bk(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jS(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vk(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await pk(this,async function(e,t){return tk(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;jS(y&&E,e,"internal-error");const S=yk.fromJSON(this.name,E);jS("string"===typeof y,e,"internal-error"),wk(c,e.name),wk(h,e.name),jS("boolean"===typeof w,e,"internal-error"),jS("boolean"===typeof b,e,"internal-error"),wk(d,e.name),wk(f,e.name),wk(p,e.name),wk(g,e.name),wk(m,e.name),wk(v,e.name);const k=new bk({uid:y,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new yk;r.updateFromServerResponse(t);const i=new bk({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await vk(i),i}}const _k=new Map;function Ek(e){WS(e instanceof Function,"Expected a class definition");let t=_k.get(e);return t?(WS(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,_k.set(e,t),t)}class Sk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sk.type="NONE";const kk=Sk;function Ck(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ik{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ck(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ck("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?bk._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ik(Ek(kk),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Ek(kk);const o=Ck(n,e.config.apiKey,e.name);let s=null;for(const u of t)try{const t=await u._get(o);if(t){const n=bk._fromJSON(e,t);u!==i&&(s=n),i=u;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new Ik(i,e,n)):new Ik(i,e,n)}}function xk(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Dk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Tk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ak(t))return"Blackberry";if(Nk(t))return"Webos";if(Lk(t))return"Safari";if((t.includes("chrome/")||Pk(t))&&!t.includes("edge/"))return"Chrome";if(Mk(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Tk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/firefox\//i.test(e)}function Lk(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Pk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/crios\//i.test(e)}function Dk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/iemobile/i.test(e)}function Mk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/android/i.test(e)}function Ak(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/blackberry/i.test(e)}function Nk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/webos/i.test(e)}function Ok(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rk(){return function(){const e=_o();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Fk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o();return Ok(e)||Mk(e)||Nk(e)||Ak(e)||/windows phone/i.test(e)||Dk(e)}function Uk(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xk(_o());break;case"Worker":t="".concat(xk(_o()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(xs,"/").concat(r)}class Vk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch($I){r($I)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch($I){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===$I||void 0===$I?void 0:$I.message})}}}class zk{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Bk{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qk(this),this.idTokenSubscription=new qk(this),this.beforeStateQueue=new Vk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ek(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ik.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch($I){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch($I){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject($I)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jS(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch($I){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vk(e)}catch($I){if((null===$I||void 0===$I?void 0:$I.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Ro(e):null;return t&&jS(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&jS(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Ek(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return tk(e,"GET","/v2/passwordPolicy",ek(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new zk(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Co("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return tk(e,"POST","/v2/accounts:revokeToken",ek(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ek(e)||this._popupRedirectResolver;jS(t,this,"argument-error"),this.redirectPersistenceManager=await Ik.create(this,[Ek(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(jS(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jS(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Uk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(RS.logLevel<=jo.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];RS.warn("Auth (".concat(xs,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function jk(e){return Ro(e)}class qk{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ao((e=>this.observer=e))}get next(){return jS(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wk={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Kk(e){return Wk.loadJS(e)}function Gk(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Hk{constructor(e){this.type="recaptcha-enterprise",this.auth=jk(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;lk(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{ck(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new uk(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&lk(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Wk.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Kk(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Qk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Hk(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Yk(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qk(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Qk(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Xk(e,t,n){const r=jk(e);jS(r._canInitEmulator,r,"emulator-config-failed"),jS(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=$k(t),{host:s,port:a}=function(e){const t=$k(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Jk(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Jk(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $k(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Jk(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Zk{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qS("not implemented")}_getIdTokenResponse(e){return qS("not implemented")}_linkToIdToken(e,t){return qS("not implemented")}_getReauthenticationResolver(e){return qS("not implemented")}}async function eC(e,t){return tk(e,"POST","/v1/accounts:signUp",t)}async function tC(e,t){return rk(e,"POST","/v1/accounts:signInWithPassword",ek(e,t))}class nC extends Zk{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new nC(e,t,"password")}static _fromEmailAndCode(e,t){return new nC(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Yk(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",tC);case"emailLink":return async function(e,t){return rk(e,"POST","/v1/accounts:signInWithEmailLink",ek(e,t))}(e,{email:this._email,oobCode:this._password});default:US(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Yk(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eC);case"emailLink":return async function(e,t){return rk(e,"POST","/v1/accounts:signInWithEmailLink",ek(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:US(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function rC(e,t){return rk(e,"POST","/v1/accounts:signInWithIdp",ek(e,t))}class iC extends Zk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new iC(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):US("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=MS(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new iC(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return rC(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,rC(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,rC(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Po(t)}return e}}const oC={USER_NOT_FOUND:"user-not-found"};class sC extends Zk{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new sC({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new sC({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return rk(e,"POST","/v1/accounts:signInWithPhoneNumber",ek(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await rk(e,"POST","/v1/accounts:signInWithPhoneNumber",ek(e,t));if(n.temporaryProof)throw ak(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return rk(e,"POST","/v1/accounts:signInWithPhoneNumber",ek(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),oC)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new sC({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class aC{constructor(e){var t,n,r,i,o,s;const a=Do(Mo(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);jS(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=Do(Mo(e)).link,n=t?Do(Mo(t)).deep_link_id:null,r=Do(Mo(e)).deep_link_id;return(r?Do(Mo(r)).link:null)||r||n||t||e}(e);try{return new aC(t)}catch(n){return null}}}class lC{constructor(){this.providerId=lC.PROVIDER_ID}static credential(e,t){return nC._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=aC.parseLink(t);return jS(n,"argument-error"),nC._fromEmailAndCode(e,n.code,n.tenantId)}}lC.PROVIDER_ID="password",lC.EMAIL_PASSWORD_SIGN_IN_METHOD="password",lC.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class uC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class cC extends uC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hC extends cC{constructor(){super("facebook.com")}static credential(e){return iC._fromParams({providerId:hC.PROVIDER_ID,signInMethod:hC.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hC.credentialFromTaggedObject(e)}static credentialFromError(e){return hC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return hC.credential(t.oauthAccessToken)}catch(n){return null}}}hC.FACEBOOK_SIGN_IN_METHOD="facebook.com",hC.PROVIDER_ID="facebook.com";class dC extends cC{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return iC._fromParams({providerId:dC.PROVIDER_ID,signInMethod:dC.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dC.credentialFromTaggedObject(e)}static credentialFromError(e){return dC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return dC.credential(n,r)}catch(i){return null}}}dC.GOOGLE_SIGN_IN_METHOD="google.com",dC.PROVIDER_ID="google.com";class fC extends cC{constructor(){super("github.com")}static credential(e){return iC._fromParams({providerId:fC.PROVIDER_ID,signInMethod:fC.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fC.credentialFromTaggedObject(e)}static credentialFromError(e){return fC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fC.credential(t.oauthAccessToken)}catch(n){return null}}}fC.GITHUB_SIGN_IN_METHOD="github.com",fC.PROVIDER_ID="github.com";class pC extends cC{constructor(){super("twitter.com")}static credential(e,t){return iC._fromParams({providerId:pC.PROVIDER_ID,signInMethod:pC.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return pC.credentialFromTaggedObject(e)}static credentialFromError(e){return pC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return pC.credential(n,r)}catch(i){return null}}}async function gC(e,t){return rk(e,"POST","/v1/accounts:signUp",ek(e,t))}pC.TWITTER_SIGN_IN_METHOD="twitter.com",pC.PROVIDER_ID="twitter.com";class mC{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await bk._fromIdTokenResponse(e,n,r),o=vC(n);return new mC({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=vC(n);return new mC({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function vC(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class yC extends ko{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,yC.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new yC(e,t,n,r)}}function wC(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw yC._fromErrorAndOperation(e,n,t,r);throw n}))}async function bC(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await pk(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return mC._forOperation(e,"link",r)}async function _C(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await pk(e,wC(r,i,t,e),n);jS(o.idToken,r,"internal-error");const s=fk(o.idToken);jS(s,r,"internal-error");const{sub:a}=s;return jS(e.uid===a,r,"user-mismatch"),mC._forOperation(e,i,o)}catch($I){throw(null===$I||void 0===$I?void 0:$I.code)==="auth/".concat("user-not-found")&&US(r,"user-mismatch"),$I}}async function EC(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await wC(e,r,t),o=await mC._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function SC(e,t){return EC(jk(e),t)}async function kC(e){const t=jk(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const CC="__sak";class IC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(CC,"1"),this.storage.removeItem(CC),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xC extends IC{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=_o();return Lk(e)||Ok(e)}()&&function(){try{return!(!window||window===window.top)}catch($I){return!1}}(),this.fallbackToPolling=Fk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Rk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xC.type="LOCAL";const TC=xC;class LC extends IC{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}LC.type="SESSION";const PC=LC;class DC{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new DC(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function MC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}DC.receivers=[];class AC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=MC("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function NC(){return window}function OC(){return"undefined"!==typeof NC().WorkerGlobalScope&&"function"===typeof NC().importScripts}const RC="firebaseLocalStorageDb",FC="firebaseLocalStorage",UC="fbase_key";class VC{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zC(e,t){return e.transaction([FC],t?"readwrite":"readonly").objectStore(FC)}function BC(){const e=indexedDB.open(RC,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(FC,{keyPath:UC})}catch($I){n($I)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(FC)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(RC);return new VC(e).toPromise()}(),t(await BC()))}))}))}async function jC(e,t,n){const r=zC(e,!0).put({[UC]:t,value:n});return new VC(r).toPromise()}function qC(e,t){const n=zC(e,!0).delete(t);return new VC(n).toPromise()}class WC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await BC()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch($I){if(t++>3)throw $I;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=DC._getInstance(OC()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new AC(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await BC();return await jC(e,CC,"1"),await qC(e,CC),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>jC(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zC(e,!1).get(t),r=await new VC(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>qC(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zC(e,!1).getAll();return new VC(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}WC.type="LOCAL";const KC=WC;Gk("rcb"),new YS(3e4,6e4);const GC="recaptcha";async function HC(e,t,n){var r;const i=await n.verify();try{let o;if(jS("string"===typeof i,e,"argument-error"),jS(n.type===GC,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){jS("enroll"===t.type,e,"internal-error");const n=await function(e,t){return tk(e,"POST","/v2/accounts/mfaEnrollment:start",ek(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{jS("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;jS(n,e,"missing-multi-factor-info");const s=await function(e,t){return tk(e,"POST","/v2/accounts/mfaSignIn:start",ek(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return tk(e,"POST","/v1/accounts:sendVerificationCode",ek(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class QC{constructor(e){this.providerId=QC.PROVIDER_ID,this.auth=jk(e)}verifyPhoneNumber(e,t){return HC(this.auth,e,Ro(t))}static credential(e,t){return sC._fromVerification(e,t)}static credentialFromResult(e){const t=e;return QC.credentialFromTaggedObject(t)}static credentialFromError(e){return QC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?sC._fromTokenResponse(n,r):null}}function YC(e,t){return t?Ek(t):(jS(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}QC.PROVIDER_ID="phone",QC.PHONE_SIGN_IN_METHOD="phone";class XC extends Zk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return rC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return rC(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $C(e){return EC(e.auth,new XC(e),e.bypassAuthState)}function JC(e){const{auth:t,user:n}=e;return jS(n,t,"internal-error"),_C(n,new XC(e),e.bypassAuthState)}async function ZC(e){const{auth:t,user:n}=e;return jS(n,t,"internal-error"),bC(n,new XC(e),e.bypassAuthState)}class eI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch($I){this.reject($I)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch($I){this.reject($I)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $C;case"linkViaPopup":case"linkViaRedirect":return ZC;case"reauthViaPopup":case"reauthViaRedirect":return JC;default:US(this.auth,"internal-error")}}resolve(e){WS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){WS(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tI=new YS(2e3,1e4);class nI extends eI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,nI.currentPopupAction&&nI.currentPopupAction.cancel(),nI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jS(e,this.auth,"internal-error"),e}async onExecution(){WS(1===this.filter.length,"Popup operations only handle one event");const e=MC();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(VS(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(VS(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(VS(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,tI.get())};e()}}nI.currentPopupAction=null;const rI="pendingRedirect",iI=new Map;class oI extends eI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=iI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=lI(t),r=aI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch($I){e=()=>Promise.reject($I)}iI.set(this.auth._key(),e)}return this.bypassAuthState||iI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sI(e,t){iI.set(e._key(),t)}function aI(e){return Ek(e._redirectPersistence)}function lI(e){return Ck(rI,e.config.apiKey,e.name)}async function uI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=jk(e),i=YC(r,t),o=new oI(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class cI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!dI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(VS(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hI(e))}saveEventToCache(e){this.cachedEventUids.add(hI(e)),this.lastProcessedEventTime=Date.now()}}function hI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function dI(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const fI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pI=/^https?/;async function gI(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return tk(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(mI(r))return}catch(n){}US(e,"unauthorized-domain")}function mI(e){const t=KS(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!pI.test(n))return!1;if(fI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const vI=new YS(3e4,6e4);function yI(){const e=NC().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function wI(e){return new Promise(((t,n)=>{var r,i,o;function s(){yI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yI(),n(VS(e,"network-request-failed"))},timeout:vI.get()})}if(null===(i=null===(r=NC().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=NC().gapi)||void 0===o?void 0:o.load)){const t=Gk("iframefcb");return NC()[t]=()=>{gapi.load?s():n(VS(e,"network-request-failed"))},Kk("".concat(Wk.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw bI=null,e}))}let bI=null;const _I=new YS(5e3,15e3),EI="__/auth/iframe",SI="emulator/auth/iframe",kI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function II(e){const t=e.config;jS(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?XS(t,SI):"https://".concat(e.config.authDomain,"/").concat(EI),r={apiKey:t.apiKey,appName:e.name,v:xs},i=CI.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Po(r).slice(1))}async function xI(e){const t=await function(e){return bI=bI||wI(e),bI}(e),n=NC().gapi;return jS(n,e,"internal-error"),t.open({where:document.body,url:II(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kI,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=VS(e,"network-request-failed"),o=NC().setTimeout((()=>{r(i)}),_I.get());function s(){NC().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const TI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class LI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch($I){}}}function PI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},TI),{width:r.toString(),height:i.toString(),top:o,left:s}),u=_o().toLowerCase();n&&(a=Pk(u)?"_blank":n),Tk(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Ok(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_o())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new LI(null);const h=window.open(t||"",a,c);jS(h,e,"popup-blocked");try{h.focus()}catch($I){}return new LI(h)}const DI="__/auth/handler",MI="emulator/auth/handler",AI=encodeURIComponent("fac");async function NI(e,t,n,r,i,o){jS(e.config.authDomain,e,"auth-domain-config-required"),jS(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:xs,eventId:i};if(t instanceof uC){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof cC){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?"#".concat(AI,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(DI);return XS(t,MI)}(e),"?").concat(Po(a).slice(1)).concat(u)}const OI="webStorageSupport";const RI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PC,this._completeRedirectFn=uI,this._overrideRedirectResult=sI}async _openPopup(e,t,n,r){var i;WS(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return PI(e,await NI(e,t,n,KS(),r),MC())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){NC().location.href=e}(await NI(e,t,n,KS(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(WS(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await xI(e),n=new cI(e);return t.register("authEvent",(t=>{jS(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(OI,{type:OI},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[OI];void 0!==i&&t(!!i),US(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fk()||Lk()||Ok()}};var FI="@firebase/auth",UI="1.6.1";class VI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jS(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const zI=wo("authIdTokenMaxAge")||300;let BI=null;function jI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ls();const t=Es(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Es(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(To(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;US(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:RI,persistence:[KC,TC,PC]}),r=wo("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>zI)return;const r=null===t||void 0===t?void 0:t.token;BI!==r&&(BI=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Ro(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){Ro(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const o=vo("auth");return o&&Xk(n,"http://".concat(o)),n}var qI;!function(e){Wk=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=VS("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),qI="Browser",_s(new Fo("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;jS(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:qI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uk(qI)},u=new Bk(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ek);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),_s(new Fo("auth-internal",(e=>(e=>new VI(e))(jk(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(FI,UI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(qI)),Ms(FI,UI,"esm2017");const WI=e=>{let{title:t,handleClick:n}=e;const[i,o]=(0,r.useState)(""),[s,a]=(0,r.useState)("");return(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("input",{type:"email",value:i,onChange:e=>o(e.target.value),placeholder:"email"}),(0,Wn.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),placeholder:"password"}),(0,Wn.jsx)("button",{onClick:()=>n(i,s),children:t})]})},KI=()=>{const e=$e(),t=ee();return(0,Wn.jsx)(WI,{title:"Login",handleClick:(n,r)=>{(function(e,t,n){return SC(Ro(e),lC.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&kC(e),t}))})(jI(),n,r).then((n=>{let{user:r}=n;e(Bn({email:r.email,id:r.uid,token:r.refreshToken})),t("/")})).catch((()=>alert("invalid user!")))}})},GI=()=>(0,Wn.jsxs)(Wn.Fragment,{children:[(0,Wn.jsx)("h1",{children:"Login"}),(0,Wn.jsx)(KI,{}),(0,Wn.jsx)(Ce,{to:"/register",children:"register"})]}),HI=()=>{const e=$e(),t=ee();return(0,Wn.jsx)(WI,{title:"Register",handleClick:(n,r)=>{(async function(e,t,n){const r=jk(e),i=Yk(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gC),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&kC(e),t})),s=await mC._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s})(jI(),n,r).then((n=>{let{user:r}=n;console.log(r),e(Bn({email:r.email,id:r.uid,token:r.refreshToken})),t("/")})).catch(console.error)}})},QI=()=>(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("h2",{children:"Register"}),(0,Wn.jsx)(HI,{}),(0,Wn.jsx)(Ce,{to:"/login",children:"Login"})]});const YI=function(){return(0,Wn.jsxs)(me,{children:[(0,Wn.jsx)(pe,{path:"/",Component:DS}),(0,Wn.jsx)(pe,{path:"/login",Component:GI}),(0,Wn.jsx)(pe,{path:"/register",Component:QI})]})},XI=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let o=new pn;return t&&(function(e){return"boolean"===typeof e}(t)?o.push(cn):o.push(hn(t.extraArgument))),o},{reducer:n,middleware:r,devTools:i=!0,preloadedState:o,enhancers:s}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!on(n))throw new Error(Vn(1));a=an(n)}l="function"===typeof r?r(t):t();let u=ln;i&&(u=dn({trace:!1,..."object"===typeof i&&i}));const c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let o=()=>{throw new Error(en(15))};const s={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,...n)}},a=t.map((e=>e(s)));return o=ln(...a)(i.dispatch),{...i,dispatch:o}}}(...l),h=bn(c);let d="function"===typeof s?s(h):h();return sn(a,o,u(...d))}({reducer:{user:qn}});o.createRoot(document.getElementById("root")).render((0,Wn.jsx)(r.StrictMode,{children:(0,Wn.jsx)(Ee,{children:(0,Wn.jsx)(Ke,{store:XI,children:(0,Wn.jsx)(YI,{})})})}))})()})();
//# sourceMappingURL=main.7a8a995b.js.map