/*! For license information please see main.c251064d.js.LICENSE.txt */
(()=>{"use strict";var e={122:e=>{e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!==i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),x=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var R,U=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case C:return"Profiler";case k:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function $(e,t){Z(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,ke=null;function Ce(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function Ie(e){Se?ke?ke.push(e):ke=[e]:Se=e}function xe(){if(Se){var e=Se,t=ke;if(ke=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Te(e,t){return e(t)}function Le(){}var Pe=!1;function Me(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==Se||null!==ke)&&(Le(),xe())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){De=!1}function Oe(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Re=!1,Ue=null,Fe=!1,Ve=null,ze={onError:function(e){Re=!0,Ue=e}};function Be(e,t,n,r,i,s,o,a,l){Re=!1,Ue=null,Oe.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(je(e)!==e)throw Error(s(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Ze=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,kt,Ct,It=!1,xt=[],Tt=null,Lt=null,Pt=null,Mt=new Map,At=new Map,Dt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Rt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Ct(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function zt(){It=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Lt&&Ft(Lt)&&(Lt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Mt.forEach(Vt),At.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Bt(t,e)}if(0<xt.length){Bt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==Lt&&Bt(Lt,e),null!==Pt&&Bt(Pt,e),Mt.forEach(t),At.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Rt(Tt,e,t,n,r,i),!0;case"dragenter":return Lt=Rt(Lt,e,t,n,r,i),!0;case"mouseover":return Pt=Rt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Mt.set(s,Rt(Mt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Rt(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=sn(un),hn=U({},un,{view:0,detail:0}),dn=sn(hn),fn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(U({},fn,{dataTransfer:0})),mn=sn(U({},hn,{relatedTarget:0})),vn=sn(U({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(U({},un,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return kn}var In=U({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(In),Tn=sn(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=sn(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(U({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Mn),Dn=[9,13,27,32],Nn=c&&"CompositionEvent"in window,On=null;c&&"documentMode"in document&&(On=document.documentMode);var Rn=c&&"TextEvent"in window&&!On,Un=c&&(!Nn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function Qn(e){Fr(e,0)}function Yn(e){if(H(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Zn=!1;if(c){var $n;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Zn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,_e(e)),Me(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=cr(n,s);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},kr={};function Cr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}c&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Ir=Cr("animationend"),xr=Cr("animationiteration"),Tr=Cr("animationstart"),Lr=Cr("transitionend"),Pr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Mr.length;Dr++){var Nr=Mr[Dr];Ar(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(xr,"onAnimationIteration"),Ar(Tr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Lr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,u){if(Be.apply(this,arguments),Re){if(!Re)throw Error(s(198));var c=Ue;Re=!1,Ue=null,Fe||(Fe=!0,Ve=c)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,a,u),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,a,u),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Rr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Me((function(){var r=s,i=_e(n),o=[];e:{var a=Pr.get(e);if(void 0!==a){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ln;break;case Ir:case xr:case Tr:l=vn;break;case Lr:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ae(p,d))&&c.push(Kr(p,g,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=je(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Tn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,g=c),h=g,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Hr(f))p++;for(f=0,g=d;g;g=Hr(g))f++;for(;0<p-f;)c=Hr(c),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Hr(c),d=Hr(d)}c=null}else c=null;null!==l&&Qr(o,a,l,c,!1),null!==u&&null!==h&&Qr(o,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Wn(a))if(Zn)m=or;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=sr);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(y=en()):($t="value"in(Zt=i)?Zt.value:Zt.textContent,jn=!0)),0<(v=Gr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Rn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Nn&&zn(e,t)?(e=en(),Jt=$t=Zt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Fr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift(Kr(e,s,i)),null!=(s=Ae(e,t))&&r.push(Kr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ae(n,s))&&o.unshift(Kr(n,l,a)):i||null!=(l=Ae(n,s))&&o.push(Kr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(s(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function ki(e){return{current:e}}function Ci(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function Ii(e,t){Si++,Ei[Si]=e.current,e.current=t}var xi={},Ti=ki(xi),Li=ki(!1),Pi=xi;function Mi(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ci(Li),Ci(Ti)}function Ni(e,t,n){if(Ti.current!==xi)throw Error(s(168));Ii(Ti,t),Ii(Li,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return U({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Pi=Ti.current,Ii(Ti,e),Ii(Li,Li.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ci(Li),Ci(Ti),Ii(Ti,e)):Ci(Li),Ii(Li,n)}var Fi=null,Vi=!1,zi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function ji(){if(!zi&&null!==Fi){zi=!0;var e=0,t=wt;try{var n=Fi;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Je,ji),i}finally{wt=t,zi=!1}}return null}var qi=[],Wi=0,Ki=null,Gi=0,Hi=[],Qi=0,Yi=null,Xi=1,Zi="";function $i(e,t){qi[Wi++]=Gi,qi[Wi++]=Ki,Ki=e,Gi=t}function Ji(e,t,n){Hi[Qi++]=Xi,Hi[Qi++]=Zi,Hi[Qi++]=Yi,Yi=e;var r=Xi;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Zi=s+e}else Xi=1<<s|n<<i|r,Zi=e}function es(e){null!==e.return&&($i(e,1),Ji(e,1,0))}function ts(e){for(;e===Ki;)Ki=qi[--Wi],qi[Wi]=null,Gi=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Zi=Hi[--Qi],Hi[Qi]=null,Xi=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Au(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Au(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ui(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return cs(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ui(t.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ui(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ui(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=ki(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Es(e){var t=vs.current;Ci(vs),e._currentValue=t}function Ss(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var Is=null;function xs(e){null===Is?Is=[e]:Is.push(e)}function Ts(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ls(e,r)}function Ls(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function As(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ns(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ll)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ls(e,n)}return null===(i=r.interleaved)?(t.next=t,xs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ls(e,n)}function Os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Rs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,r){var i=e.updateQueue;Ps=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,c=u=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=U({},h,d);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ul|=o,e.lanes=o,e.memoizedState=h}}function Fs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ns(e,s,i))&&(ru(t,e,i,r),Os(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ns(e,s,i))&&(ru(t,e,i,r),Os(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ns(e,i,r))&&(ru(t,e,r,n),Os(t,e,r))}};function js(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=Cs(s):(i=Ai(t)?Pi:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mi(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ks(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Cs(s):(s=Ai(t)?Pi:Ti.current,i.context=Mi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Us(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var s=n.type;return s===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Gs(e,t,n),r.return=e,r):((r=Ou(n.type,n.key,n.props,null,e.mode,r)).ref=Gs(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ru(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ou(t.type,t.key,t.props,null,e.mode,n)).ref=Gs(e,null,t),n.return=e,n;case E:return(t=Vu(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Ru(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case A:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function g(i,s,a,l){for(var u=null,c=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,g),null===c?u=v:c.sibling=v,c=v,h=m}if(g===a.length)return n(i,h),is&&$i(i,g),u;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(s=o(h,s,g),null===c?u=h:c.sibling=h,c=h);return is&&$i(i,g),u}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),is&&$i(i,g),u}function m(i,a,l,u){var c=O(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var h=c=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var w=f(i,g,y.value,u);if(null===w){null===g&&(g=v);break}e&&g&&null===w.alternate&&t(i,g),a=o(w,a,m),null===h?c=w:h.sibling=w,h=w,g=v}if(y.done)return n(i,g),is&&$i(i,m),c;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return is&&$i(i,m),c}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,u))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?c=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),is&&$i(i,m),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===S){if(7===c.tag){n(r,c.sibling),(s=i(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===A&&Qs(u)===c.type){n(r,c.sibling),(s=i(c,o.props)).ref=Gs(r,c,o),s.return=r,r=s;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===S?((s=Ru(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Ou(o.type,o.key,o.props,null,r.mode,l)).ref=Gs(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vu(o,r.mode,l)).return=r,r=s}return a(r);case A:return e(r,s,(c=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(O(o))return m(r,s,o,l);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Fu(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Xs=Ys(!0),Zs=Ys(!1),$s={},Js=ki($s),eo=ki($s),to=ki($s);function no(e){if(e===$s)throw Error(s(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Js,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ci(Js),Ii(Js,t)}function io(){Ci(Js),Ci(eo),Ci(to)}function so(e){no(to.current);var t=no(Js.current),n=le(t,e.type);t!==n&&(Ii(eo,e),Ii(Js,n))}function oo(e){eo.current===e&&(Ci(Js),Ci(eo))}var ao=ki(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,go=null,mo=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function So(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=mo=null,t.updateQueue=null,ho.current=ua,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==mo&&null!==mo.next,po=0,vo=mo=go=null,yo=!1,t)throw Error(s(300));return e}function Co(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?go.memoizedState=vo=e:vo=vo.next=e,vo}function xo(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===vo?go.memoizedState:vo.next;if(null!==t)vo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===vo?go.memoizedState=vo=e:vo=vo.next=e}return vo}function To(e,t){return"function"===typeof t?t(e):t}function Lo(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,go.lanes|=h,Ul|=h}c=c.next}while(null!==c&&c!==o);null===u?a=r:u.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,go.lanes|=o,Ul|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Mo(){}function Ao(e,t){var n=go,r=xo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Wo(Oo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Vo(9,No.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Uo(e)}function Oo(e,t,n){return n((function(){Ro(t)&&Uo(e)}))}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Uo(e){var t=Ls(e,1);null!==t&&ru(t,e,1,-1)}function Fo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return xo().memoizedState}function Bo(e,t,n,r){var i=Io();go.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==r&&So(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}go.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return jo(2048,8,e,t)}function Ko(e,t){return jo(4,2,e,t)}function Go(e,t){return jo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&So(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $o(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),go.lanes|=n,Ul|=n,e.baseState=!0),t)}function Jo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return xo().memoizedState}function ta(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ts(e,t,n,r))){ru(n,e,r,tu()),sa(n,t,r)}}function na(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,xs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ts(e,t,i,r))&&(ru(n,e,r,i=tu()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===go||null!==t&&t===go}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Cs,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Cs,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,go,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=go,i=Io();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Oo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Pl.identifierPrefix;if(is){var n=Zi;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Cs,useCallback:Xo,useContext:Cs,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Zo,useReducer:Lo,useRef:zo,useState:function(){return Lo(To)},useDebugValue:Yo,useDeferredValue:function(e){return $o(xo(),mo.memoizedState,e)},useTransition:function(){return[Lo(To)[0],xo().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Ao,useId:ea,unstable_isNewReconciler:!1},ua={readContext:Cs,useCallback:Xo,useContext:Cs,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Go,useMemo:Zo,useReducer:Po,useRef:zo,useState:function(){return Po(To)},useDebugValue:Yo,useDeferredValue:function(e){var t=xo();return null===mo?t.memoizedState=e:$o(t,mo.memoizedState,e)},useTransition:function(){return[Po(To)[0],xo().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Ao,useId:ea,unstable_isNewReconciler:!1};function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),da(0,t)},n}function ga(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Iu.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Ns(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Zs(t,null,n,r):Xs(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return ks(t,i),r=ko(e,t,n,r,s,i),n=Co(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Du(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ou(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Ka(e,t,i)}return t.flags|=1,(e=Nu(s,r)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ka(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function Ca(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Nl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Nl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ii(Nl,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ii(Nl,Dl),Dl|=r;return _a(e,t,i,n),t.child}function Ia(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Ai(n)?Pi:Ti.current;return s=Mi(t,s),ks(t,i),n=ko(e,t,n,r,s,i),r=Co(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ka(e,t,i))}function Ta(e,t,n,r,i){if(Ai(n)){var s=!0;Ri(t)}else s=!1;if(ks(t,i),null===t.stateNode)Wa(e,t),qs(t,n,r),Ks(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Cs(u):u=Mi(t,u=Ai(n)?Pi:Ti.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==u)&&Ws(t,o,r,u),Ps=!1;var d=t.memoizedState;o.state=d,Us(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Li.current||Ps?("function"===typeof c&&(zs(t,n,c,r),l=t.memoizedState),(a=Ps||js(t,n,a,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,As(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ms(t.type,a),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Cs(l):l=Mi(t,l=Ai(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,r,l),Ps=!1,d=t.memoizedState,o.state=d,Us(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Li.current||Ps?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(u=Ps||js(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return La(e,t,n,r,s,i)}function La(e,t,n,r,i,s){Ia(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Ka(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),ro(e,t.containerInfo)}function Ma(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Aa,Da,Na,Oa,Ra={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(ao,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uu(l,i,0,null),e=Ru(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Ra,e):Va(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Uu({mode:"visible",children:r.children},i,0,null),(o=Ru(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xs(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Ra,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Pl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ls(e,i),ru(r,e,i,-1))}return mu(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ui(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=Xi,Hi[Qi++]=Zi,Hi[Qi++]=Yi,Xi=e.id,Zi=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Nu(r,a):(a=Ru(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,i}return e=(a=e.child).sibling,i=Nu(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Uu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),Xs(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ss(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ka(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ga(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Ai(t.type)&&Di(),Ha(t),null;case 3:return r=t.stateNode,io(),Ci(Li),Ci(Ti),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(au(ss),ss=null))),Da(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Na(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Js.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":X(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":G(r),J(r,o,!0);break;case"textarea":G(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Vr(Or[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Vr("scroll",e):null!=c&&w(e,o,c,l))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Oa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Js.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ci(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(au(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ol&&(Ol=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Da(e,t),null===e&&jr(t.stateNode.containerInfo),Ha(t),null;case 10:return Es(t.type._context),Ha(t),null;case 19:if(Ci(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ga(o,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ga(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>ql&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ga(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*Ze()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ga(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=ao.current,Ii(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ai(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ci(Li),Ci(Ti),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ci(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ci(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Na=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Js.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Vr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Oa=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xa=!1,Za=!1,$a="function"===typeof WeakSet?WeakSet:Set,Ja=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Cu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Za&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Cu(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,fl(e,t,n),Za=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $a),t.forEach((function(t){var r=Lu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Cu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Cu(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Cu(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Cu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Z(i,o),we(l,a);var c=we(l,o);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,c)}switch(l){case"input":$(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Cu(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Cu(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){Cu(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Ze())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(c=Za)||h,ml(t,e),Za=c):ml(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Cu(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Ja=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ge("display",a))}catch(m){Cu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Cu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Cu(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Ja=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Ja;){var i=Ja,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xa;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=Xa;var u=Za;if(Xa=o,(Za=l)&&!u)for(Ja=i;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?Sl(i):null!==l?(l.return=o,Ja=l):Sl(i);for(;null!==s;)Ja=s,bl(s,t,n),s=s.sibling;Ja=i,Xa=a,Za=u}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Ja=s):_l(e)}}function _l(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(s(163))}Za||512&t.flags&&sl(t)}catch(f){Cu(t,t.return,f)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function El(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function Sl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cu(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Cu(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Cu(t,o,l)}}}catch(l){Cu(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var kl,Cl=Math.ceil,Il=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Ll=0,Pl=null,Ml=null,Al=0,Dl=0,Nl=ki(0),Ol=0,Rl=null,Ul=0,Fl=0,Vl=0,zl=null,Bl=null,jl=0,ql=1/0,Wl=null,Kl=!1,Gl=null,Hl=null,Ql=!1,Yl=null,Xl=0,Zl=0,$l=null,Jl=-1,eu=0;function tu(){return 0!==(6&Ll)?Ze():-1!==Jl?Jl:Jl=Ze()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Ll)&&0!==Al?Al&-Al:null!==gs.transition?(0===eu&&(eu=gt()),eu):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ru(e,t,n,r){if(50<Zl)throw Zl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&Ll)&&e===Pl||(e===Pl&&(0===(2&Ll)&&(Fl|=n),4===Ol&&lu(e,Al)),iu(e,r),1===n&&0===Ll&&0===(1&t.mode)&&(ql=Ze()+500,Vi&&ji()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Pl?Al:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(uu.bind(null,e)):Bi(uu.bind(null,e)),oi((function(){0===(6&Ll)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pu(n,su.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function su(e,t){if(Jl=-1,eu=0,0!==(6&Ll))throw Error(s(327));var n=e.callbackNode;if(Su()&&e.callbackNode!==n)return null;var r=dt(e,e===Pl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Ll;Ll|=2;var o=gu();for(Pl===e&&Al===t||(Wl=null,ql=Ze()+500,fu(e,t));;)try{wu();break}catch(l){pu(e,l)}_s(),Il.current=o,Ll=i,null!==Ml?t=0:(Pl=null,Al=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Rl,fu(e,0),lu(e,r),iu(e,Ze()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Rl,fu(e,0),lu(e,r),iu(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Eu(e,Bl,Wl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=jl+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Eu.bind(null,e,Bl,Wl),t);break}Eu(e,Bl,Wl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(Eu.bind(null,e,Bl,Wl),r);break}Eu(e,Bl,Wl);break;default:throw Error(s(329))}}}return iu(e,Ze()),e.callbackNode===n?su.bind(null,e):null}function ou(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=Bl,Bl=n,null!==t&&au(t)),e}function au(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,t){for(t&=~Vl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Ll))throw Error(s(327));Su();var t=dt(e,0);if(0===(1&t))return iu(e,Ze()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Rl,fu(e,0),lu(e,t),iu(e,Ze()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,Bl,Wl),iu(e,Ze()),null}function cu(e,t){var n=Ll;Ll|=1;try{return e(t)}finally{0===(Ll=n)&&(ql=Ze()+500,Vi&&ji())}}function hu(e){null!==Yl&&0===Yl.tag&&0===(6&Ll)&&Su();var t=Ll;Ll|=1;var n=Tl.transition,r=wt;try{if(Tl.transition=null,wt=1,e)return e()}finally{wt=r,Tl.transition=n,0===(6&(Ll=t))&&ji()}}function du(){Dl=Nl.current,Ci(Nl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ci(Li),Ci(Ti),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ci(ao);break;case 10:Es(r.type._context);break;case 22:case 23:du()}n=n.return}if(Pl=e,Ml=e=Nu(e.current,null),Al=Dl=t,Ol=0,Rl=null,Vl=Fl=Ul=0,Bl=zl=null,null!==Is){for(t=0;t<Is.length;t++)if(null!==(r=(n=Is[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Is=null}return e}function pu(e,t){for(;;){var n=Ml;try{if(_s(),ho.current=oa,yo){for(var r=go.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=mo=go=null,wo=!1,bo=0,xl.current=null,null===n||null===n.return){Ol=1,Rl=t,Ml=null;break}e:{var o=e,a=n.return,l=n,u=t;if(t=Al,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(o,c,t),u=c;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(u),t.updateQueue=m}else g.add(u);break e}if(0===(1&t)){ma(o,c,t),mu();break e}u=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ca(u,l));break e}}o=u=ca(u,l),4!==Ol&&(Ol=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Rs(o,pa(0,u,t));break e;case 1:l=u;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Rs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}_u(n)}catch(b){t=b,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function gu(){var e=Il.current;return Il.current=oa,null===e?oa:e}function mu(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Ul)&&0===(268435455&Fl)||lu(Pl,Al)}function vu(e,t){var n=Ll;Ll|=2;var r=gu();for(Pl===e&&Al===t||(Wl=null,fu(e,t));;)try{yu();break}catch(i){pu(e,i)}if(_s(),Ll=n,Il.current=r,null!==Ml)throw Error(s(261));return Pl=null,Al=0,Ol}function yu(){for(;null!==Ml;)bu(Ml)}function wu(){for(;null!==Ml&&!Ye();)bu(Ml)}function bu(e){var t=kl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?_u(e):Ml=t,xl.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Ml=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return Ol=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===Ol&&(Ol=5)}function Eu(e,t,n){var r=wt,i=Tl.transition;try{Tl.transition=null,wt=1,function(e,t,n,r){do{Su()}while(null!==Yl);if(0!==(6&Ll))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Pl&&(Ml=Pl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Pu(tt,(function(){return Su(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=wt;wt=1;var l=Ll;Ll|=4,xl.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=a),f===o&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Cu(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),Xe(),Ll=l,wt=a,Tl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Xl)&&0!==e.tag&&Su(),o=e.pendingLanes,0!==(1&o)?e===$l?Zl++:(Zl=0,$l=e):Zl=0,ji()}(e,t,n,r)}finally{Tl.transition=i,wt=r}return null}function Su(){if(null!==Yl){var e=bt(Xl),t=Tl.transition,n=wt;try{if(Tl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Ll))throw Error(s(331));var i=Ll;for(Ll|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Ja=c;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(ol(h),h===c){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ja=y;break e}Ja=o.return}}var w=e.current;for(Ja=w;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=w;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Cu(l,l.return,E)}if(l===a){Ja=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Ja=_;break e}Ja=l.return}}if(Ll=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Tl.transition=t}}return!1}function ku(e,t,n){e=Ns(e,t=pa(0,t=ca(n,t),1),1),t=tu(),null!==e&&(vt(e,1,t),iu(e,t))}function Cu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Ns(t,e=ga(t,e=ca(n,e),1),1),e=tu(),null!==t&&(vt(t,1,e),iu(t,e));break}}t=t.return}}function Iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Al&n)===n&&(4===Ol||3===Ol&&(130023424&Al)===Al&&500>Ze()-jl?fu(e,0):Vl|=n),iu(e,t)}function xu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Ls(e,t))&&(vt(e,t,n),iu(e,n))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xu(e,n)}function Lu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),xu(e,n)}function Pu(e,t){return He(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Au(e,t,n,r){return new Mu(e,t,n,r)}function Du(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Au(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ou(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Du(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Ru(n.children,i,o,t);case k:a=8,i|=8;break;case C:return(e=Au(12,n,t,2|i)).elementType=C,e.lanes=o,e;case L:return(e=Au(13,n,t,i)).elementType=L,e.lanes=o,e;case P:return(e=Au(19,n,t,i)).elementType=P,e.lanes=o,e;case D:return Uu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:a=10;break e;case x:a=9;break e;case T:a=11;break e;case M:a=14;break e;case A:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Au(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ru(e,t,n,r){return(e=Au(7,e,r,t)).lanes=n,e}function Uu(e,t,n,r){return(e=Au(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Au(6,e,null,t)).lanes=n,e}function Vu(e,t,n){return(t=Au(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(e,t,n,r,i,s,o,a,l){return e=new zu(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Au(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function ju(e){if(!e)return xi;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Oi(e,n,t)}return t}function qu(e,t,n,r,i,s,o,a,l){return(e=Bu(n,r,!0,e,0,s,0,a,l)).context=ju(null),n=e.current,(s=Ds(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Ns(n,s,i),e.current.lanes=i,vt(e,i,r),iu(e,r),e}function Wu(e,t,n,r){var i=t.current,s=tu(),o=nu(i);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ns(i,t,o))&&(ru(e,i,o,s),Os(e,i,o)),o}function Ku(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Li.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fs();break;case 5:so(t);break;case 1:Ai(t.type)&&Ri(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ii(ao,1&ao.current),null!==(e=Ka(e,t,n))?e.sibling:null);Ii(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ka(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Ji(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Mi(t,Ti.current);ks(t,n),i=ko(null,t,r,e,i,n);var o=Co();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Ri(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ks(t,r,e,n),t=La(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Du(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===M)return 14}return 2}(r),e=ms(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ta(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,ms(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,As(e,t),Us(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ma(e,t,r,n,i=ca(Error(s(423)),t));break e}if(r!==i){t=Ma(e,t,r,n,i=ca(Error(s(424)),t));break e}for(rs=ui(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Zs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ka(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ia(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Fa(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xs(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:ms(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ii(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Li.current){t=Ka(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ds(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),Ss(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ss(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ks(t,n),r=r(i=Cs(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=ms(r=t.type,t.pendingProps),Sa(e,t,r,i=ms(r.type,i),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ms(r,i),Wa(e,t),t.tag=1,Ai(r)?(e=!0,Ri(t)):e=!1,ks(t,n),qs(t,r,i),Ks(t,r,i,n),La(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ca(e,t,n)}throw Error(s(156,t.tag))};var Qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Ku(o);a.call(e)}}Wu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Ku(o);s.call(e)}}var o=qu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Ku(l);a.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),hu((function(){Wu(t,l,n,r)})),l}(n,t,e,i,r);return Ku(o)}Xu.prototype.render=Yu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wu(e,t,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Wu(null,e,null,null)})),t[pi]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ut(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,Ze()),0===(6&Ll)&&(ql=Ze()+500,ji()))}break;case 13:hu((function(){var t=Ls(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Hu(e,1)}},Et=function(e){if(13===e.tag){var t=Ls(e,134217728);if(null!==t)ru(t,e,134217728,tu());Hu(e,134217728)}},St=function(e){if(13===e.tag){var t=nu(e),n=Ls(e,t);if(null!==n)ru(n,e,t,tu());Hu(e,t)}},kt=function(){return wt},Ct=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),$(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cu,Le=hu;var tc={usingClientEntryPoint:!1,Events:[wi,bi,_i,Ie,xe,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),st=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zu(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zu(e))throw Error(s(299));var n=!1,r="",i=Qu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!$u(t))throw Error(s(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zu(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xu(t)},t.render=function(e,t,n){if(!$u(t))throw Error(s(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$u(e))throw Error(s(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$u(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,s={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:s,_owner:a.current}}t.Fragment=s,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,g(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:S.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+T(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),L(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var u=0;u<e.length;u++){var c=s+T(a=e[u],u);l+=L(a,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(a=e.next()).done;)l+=L(a=a.value,t,i,c=s+T(a,u++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},N={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!k.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{e.exports=n(202)},579:(e,t,n)=>{e.exports=n(153)},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],u=a+1,c=e[u];if(0>s(l,n))u<i&&0>s(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[a]=n,r=a);else{if(!(u<i&&0>s(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(m=!1,b(e),!g)if(null!==r(u))g=!0,D(E);else{var t=r(c);null!==t&&N(_,t.startTime-e)}}function E(e,n){g=!1,m&&(m=!1,y(I),I=-1),p=!0;var s=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!L());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&N(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,k=!1,C=null,I=-1,x=5,T=-1;function L(){return!(t.unstable_now()-T<x)}function P(){if(null!==C){var e=t.unstable_now();T=e;var n=!0;try{n=C(!0,e)}finally{n?S():(k=!1,C=null)}}else k=!1}if("function"===typeof w)S=function(){w(P)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,A=M.port2;M.port1.onmessage=P,S=function(){A.postMessage(null)}}else S=function(){v(P,0)};function D(e){C=e,k||(k=!0,S())}function N(e,n){I=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(c,e),null===r(u)&&e===r(c)&&(m?(y(I),I=-1):m=!0,N(_,s-o))):(e.sortIndex=a,n(u,e),g||p||(g=!0,D(E))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{e.exports=n(234)},895:(e,t,n)=>{var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,c){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==c&&d.hasValue){var t=d.value;if(c(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==c&&c(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,c]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},237:(e,t,n)=>{e.exports=n(895)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={};n.r(e),n.d(e,{FirebaseError:()=>no,SDK_VERSION:()=>oa,_DEFAULT_ENTRY_NAME:()=>Qo,_addComponent:()=>$o,_addOrOverwriteComponent:()=>Jo,_apps:()=>Xo,_clearComponents:()=>ra,_components:()=>Zo,_getProvider:()=>ta,_registerComponent:()=>ea,_removeServiceInstance:()=>na,deleteApp:()=>ca,getApp:()=>la,getApps:()=>ua,initializeApp:()=>aa,onLog:()=>da,registerVersion:()=>ha,setLogLevel:()=>fa});var t,r=n(43),i=n.t(r,2),s=n(391),o=n(950),a=n.t(o,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const u="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(e,n,r,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,h=t.Pop,g=null,m=v();function v(){return(a.state||{idx:null}).idx}function y(){h=t.Pop;let e=v(),n=null==e?null:e-m;m=e,g&&g({action:h,location:b.location,delta:n})}function w(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,a.replaceState(l({},a.state,{idx:m}),""));let b={get action(){return h},get location(){return e(s,a)},listen(e){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(u,y),g=e,()=>{s.removeEventListener(u,y),g=null}},createHref:e=>n(s,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){h=t.Push;let i=f(b.location,e,n);r&&r(i,e),m=v()+1;let l=d(i,m),u=b.createHref(i);try{a.pushState(l,"",u)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(u)}o&&g&&g({action:h,location:b.location,delta:1})},replace:function(e,n){h=t.Replace;let i=f(b.location,e,n);r&&r(i,e),m=v();let s=d(i,m),l=b.createHref(i);a.replaceState(s,"",l),o&&g&&g({action:h,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){void 0===n&&(n="/");let r=A(("string"===typeof t?g(t):t).pathname||"/",n);if(null==r)return null;let i=w(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o){let e=M(r);s=L(i[o],e)}return s}function w(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(c(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=U([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),w(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=b(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,E=3,S=2,k=1,C=10,I=-2,x=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(x)&&(r+=I),t&&(r+=S),n.filter((e=>!x(e))).reduce(((e,t)=>e+(_.test(t)?E:""===t?k:C)),r)}function L(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!u)return null;Object.assign(r,u.params);let c=e.route;s.push({params:r,pathname:U([i,u.pathname]),pathnameBase:F(U([i,u.pathnameBase])),route:c}),"/"!==u.pathnameBase&&(i=U([i,u.pathnameBase]))}return s}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function M(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=N(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function R(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=g(e):(i=l({},e),c(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?g(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:V(r),hash:z(i)}}(i,s),h=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const U=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const j=["post","put","patch","delete"],q=(new Set(j),["get",...j]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const K=r.createContext(null);const G=r.createContext(null);const H=r.createContext(null);const Q=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const X=r.createContext(null);function Z(){return null!=r.useContext(Q)}function $(){return Z()||c(!1),r.useContext(Q).location}function J(e){r.useContext(H).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ce(le.UseNavigateStable),t=de(ue.UseNavigateStable),n=r.useRef(!1);J((()=>{n.current=!0}));let i=r.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},i)))}),[e,t]);return i}():function(){Z()||c(!1);let e=r.useContext(K),{basename:t,future:n,navigator:i}=r.useContext(H),{matches:s}=r.useContext(Y),{pathname:o}=$(),a=JSON.stringify(O(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return J((()=>{l.current=!0})),r.useCallback((function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void i.go(n);let s=R(n,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:U([t,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[t,i,a,o,e])}()}function te(e,t){let{relative:n}=void 0===t?{}:t,{future:i}=r.useContext(H),{matches:s}=r.useContext(Y),{pathname:o}=$(),a=JSON.stringify(O(s,i.v7_relativeSplatPath));return r.useMemo((()=>R(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function ne(e,n,i,s){Z()||c(!1);let{navigator:o}=r.useContext(H),{matches:a}=r.useContext(Y),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=$();if(n){var p;let e="string"===typeof n?g(n):n;"/"===h||(null==(p=e.pathname)?void 0:p.startsWith(h))||c(!1),d=e}else d=f;let m=d.pathname||"/",v=m;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=y(e,{pathname:v});let b=ae(w&&w.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:U([h,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:U([h,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,s);return n&&b?r.createElement(Q.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:t.Pop}},b):b}function re(){let e=function(){var e;let t=r.useContext(X),n=he(ue.UseRouteError),i=de(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const ie=r.createElement(re,null);class se extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oe(e){let{routeContext:t,match:n,children:i}=e,s=r.useContext(K);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(Y.Provider,{value:t},i)}function ae(e,t,n,i){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var o;if(null==(o=n)||!o.errors)return null;e=n.matches}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let r=0;r<a.length;r++){let e=a[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,s)=>{let o,c=!1,d=null,f=null;var p;n&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ie,u&&(h<0&&0===s?(p="route-fallback",!1||fe[p]||(fe[p]=!0),c=!0,f=null):h===s&&(c=!0,f=i.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,s+1)),m=()=>{let t;return t=o?d:c?f:i.route.Component?r.createElement(i.route.Component,null):i.route.element?i.route.element:e,r.createElement(oe,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?r.createElement(se,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function ce(e){let t=r.useContext(K);return t||c(!1),t}function he(e){let t=r.useContext(G);return t||c(!1),t}function de(e){let t=function(e){let t=r.useContext(Y);return t||c(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const fe={};i.startTransition;function pe(e){c(!1)}function ge(e){let{basename:n="/",children:i=null,location:s,navigationType:o=t.Pop,navigator:a,static:l=!1,future:u}=e;Z()&&c(!1);let h=n.replace(/^\/*/,"/"),d=r.useMemo((()=>({basename:h,navigator:a,static:l,future:W({v7_relativeSplatPath:!1},u)})),[h,u,a,l]);"string"===typeof s&&(s=g(s));let{pathname:f="/",search:p="",hash:m="",state:v=null,key:y="default"}=s,w=r.useMemo((()=>{let e=A(f,h);return null==e?null:{location:{pathname:e,search:p,hash:m,state:v,key:y},navigationType:o}}),[h,f,p,m,v,y,o]);return null==w?null:r.createElement(H.Provider,{value:d},r.createElement(Q.Provider,{children:i,value:w}))}function me(e){let{children:t,location:n}=e;return ne(ve(t),n)}new Promise((()=>{}));r.Component;function ve(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,((e,i)=>{if(!r.isValidElement(e))return;let s=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,ve(e.props.children,s));e.type!==pe&&c(!1),e.props.index&&e.props.children&&c(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=ve(e.props.children,s)),n.push(o)})),n}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}function we(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const be=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Px){}new Map;const _e=i.startTransition;a.flushSync,i.useId;function Ee(e){let{basename:t,children:n,future:i,window:s}=e,o=r.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),f("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))}),(function(e,t){h("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[u,c]=r.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},v=r.useCallback((e=>{d&&_e?_e((()=>c(e))):c(e)}),[c,d]);return r.useLayoutEffect((()=>l.listen(v)),[l,v]),r.createElement(ge,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:l,future:i})}const Se="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=r.forwardRef((function(e,t){let n,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:u,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,g=we(e,be),{basename:m}=r.useContext(H),v=!1;if("string"===typeof h&&ke.test(h)&&(n=h,Se))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=A(t.pathname,m);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(Px){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;Z()||c(!1);let{basename:i,navigator:s}=r.useContext(H),{hash:o,pathname:a,search:l}=te(e,{relative:n}),u=a;return"/"!==i&&(u="/"===a?i:U([i,a])),s.createHref({pathname:u,search:l,hash:o})}(h,{relative:s}),w=function(e,t){let{target:n,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===t?{}:t,u=ee(),c=$(),h=te(e,{relative:a});return r.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==i?i:p(c)===p(h);u(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[c,u,h,i,s,n,e,o,a,l])}(h,{replace:a,state:l,target:u,preventScrollReset:d,relative:s,unstable_viewTransition:f});return r.createElement("a",ye({},g,{href:n||y,onClick:v||o?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:t,target:u}))}));var Ie,xe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(xe||(xe={}));var Te=n(237),Le=r,Pe=Symbol.for("react-redux-context"),Me="undefined"!==typeof globalThis?globalThis:{};function Ae(){var e;if(!Le.createContext)return{};const t=null!==(e=Me[Pe])&&void 0!==e?e:Me[Pe]=new Map;let n=t.get(Le.createContext);return n||(n=Le.createContext(null),t.set(Le.createContext,n)),n}var De=Ae(),Ne=()=>{throw new Error("uSES not initialized!")};function Oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;return function(){return Le.useContext(e)}}var Re=Oe(),Ue=Ne,Fe=(e,t)=>e===t;function Ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;const t=e===De?Re:Oe(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=Fe,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:u}=t(),c=(Le.useRef(!0),Le.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),h=Ue(o.addNestedSub,s.getState,a||s.getState,c,r);return Le.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var ze=Ve();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function Be(e){e()}var je={notify(){},get:()=>[]};function qe(e,t){let n,r=je,i=0,s=!1;function o(){u.onStateChange&&u.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Be((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=je)}const u={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return u}var We=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?Le.useLayoutEffect:Le.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Ke=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:o="once"}=e;const a=Le.useMemo((()=>{const e=qe(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:o}}),[t,i,s,o]),l=Le.useMemo((()=>t.getState()),[t]);We((()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[a,l]);const u=n||De;return Le.createElement(u.Provider,{value:a},r)};function Ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;const t=e===De?Re:Oe(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var He=Ge();function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De;const t=e===De?He:Ge(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Ye,Xe=Qe();Ye=Te.useSyncExternalStoreWithSelector,Ue=Ye,(e=>{e})(r.useSyncExternalStore);const Ze=()=>Xe(),$e=ze;var Je=Symbol.for("immer-nothing"),et=Symbol.for("immer-draftable"),tt=Symbol.for("immer-state");function nt(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var rt=Object.getPrototypeOf;function it(e){return!!e&&!!e[tt]}function st(e){var t;return!!e&&(at(e)||Array.isArray(e)||!!e[et]||!(null===(t=e.constructor)||void 0===t||!t[et])||dt(e)||ft(e))}var ot=Object.prototype.constructor.toString();function at(e){if(!e||"object"!==typeof e)return!1;const t=rt(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ot}function lt(e,t){0===ut(e)?Object.entries(e).forEach((n=>{let[r,i]=n;t(r,i,e)})):e.forEach(((n,r)=>t(r,n,e)))}function ut(e){const t=e[tt];return t?t.type_:Array.isArray(e)?1:dt(e)?2:ft(e)?3:0}function ct(e,t){return 2===ut(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t,n){const r=ut(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function dt(e){return e instanceof Map}function ft(e){return e instanceof Set}function pt(e){return e.copy_||e.base_}function gt(e,t){if(dt(e))return new Map(e);if(ft(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&at(e)){if(!rt(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[tt];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],s=n[t];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[t]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[t]})}return Object.create(rt(e),n)}function mt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yt(e)||it(e)||!st(e)||(ut(e)>1&&(e.set=e.add=e.clear=e.delete=vt),Object.freeze(e),t&&lt(e,((e,t)=>mt(t,!0)))),e}function vt(){nt(2)}function yt(e){return Object.isFrozen(e)}var wt,bt={};function _t(e){const t=bt[e];return t||nt(0),t}function Et(){return wt}function St(e,t){t&&(_t("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function kt(e){Ct(e),e.drafts_.forEach(xt),e.drafts_=null}function Ct(e){e===wt&&(wt=e.parent_)}function It(e){return wt={drafts_:[],parent_:wt,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xt(e){const t=e[tt];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Tt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[tt].modified_&&(kt(t),nt(4)),st(e)&&(e=Lt(t,e),t.parent_||Mt(t,e)),t.patches_&&_t("Patches").generateReplacementPatches_(n[tt].base_,e,t.patches_,t.inversePatches_)):e=Lt(t,n,[]),kt(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Je?e:void 0}function Lt(e,t,n){if(yt(t))return t;const r=t[tt];if(!r)return lt(t,((i,s)=>Pt(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return Mt(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),lt(i,((i,o)=>Pt(e,r,t,i,o,n,s))),Mt(e,t,!1),n&&e.patches_&&_t("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Pt(e,t,n,r,i,s,o){if(it(i)){const o=Lt(e,i,s&&t&&3!==t.type_&&!ct(t.assigned_,r)?s.concat(r):void 0);if(ht(n,r,o),!it(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(st(i)&&!yt(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Lt(e,i),t&&t.scope_.parent_||Mt(e,i)}}function Mt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mt(t,n)}var At={get(e,t){if(t===tt)return e;const n=pt(e);if(!ct(n,t))return function(e,t,n){var r;const i=Ot(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!st(r)?r:r===Nt(e.base_,t)?(Ut(e),e.copy_[t]=Ft(r,e)):r},has:(e,t)=>t in pt(e),ownKeys:e=>Reflect.ownKeys(pt(e)),set(e,t,n){const r=Ot(pt(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Nt(pt(e),t),i=null===r||void 0===r?void 0:r[tt];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||ct(e.base_,t)))return!0;Ut(e),Rt(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Nt(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Ut(e),Rt(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=pt(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){nt(11)},getPrototypeOf:e=>rt(e.base_),setPrototypeOf(){nt(12)}},Dt={};function Nt(e,t){const n=e[tt];return(n?pt(n):e)[t]}function Ot(e,t){if(!(t in e))return;let n=rt(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=rt(n)}}function Rt(e){e.modified_||(e.modified_=!0,e.parent_&&Rt(e.parent_))}function Ut(e){e.copy_||(e.copy_=gt(e.base_,e.scope_.immer_.useStrictShallowCopy_))}lt(At,((e,t)=>{Dt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Dt.deleteProperty=function(e,t){return Dt.set.call(this,e,t,void 0)},Dt.set=function(e,t,n){return At.set.call(this,e[0],t,n,e[0])};function Ft(e,t){const n=dt(e)?_t("MapSet").proxyMap_(e,t):ft(e)?_t("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Et(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=At;n&&(i=[r],s=Dt);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:Et()).drafts_.push(n),n}function Vt(e){return it(e)||nt(10),zt(e)}function zt(e){if(!st(e)||yt(e))return e;const t=e[tt];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=gt(e,t.scope_.immer_.useStrictShallowCopy_)}else n=gt(e,!0);return lt(n,((e,t)=>{ht(n,e,zt(t))})),t&&(t.finalized_=!1),n}var Bt=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&nt(6),void 0!==n&&"function"!==typeof n&&nt(7),st(e)){const i=It(this),s=Ft(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?kt(i):Ct(i)}return St(i,n),Tt(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===Je&&(r=void 0),this.autoFreeze_&&mt(r,!0),n){const t=[],i=[];_t("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}nt(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){st(e)||nt(8),it(e)&&(e=Vt(e));const t=It(this),n=Ft(e,void 0);return n[tt].isManual_=!0,Ct(t),n}finishDraft(e,t){const n=e&&e[tt];n&&n.isManual_||nt(9);const{scope_:r}=n;return St(r,t),Tt(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=_t("Patches").applyPatches_;return it(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},jt=Bt.produce;Bt.produceWithPatches.bind(Bt),Bt.setAutoFreeze.bind(Bt),Bt.setUseStrictShallowCopy.bind(Bt),Bt.applyPatches.bind(Bt),Bt.createDraft.bind(Bt),Bt.finishDraft.bind(Bt);function qt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Wt=e=>Array.isArray(e)?e:[e];function Kt(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Gt="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},Ht=0,Qt=1;function Yt(){return{s:Ht,v:void 0,o:null,p:null}}function Xt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Yt();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=Yt(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=Yt(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===Qt?l=t.v:(l=e.apply(null,arguments),s++),a.s=Qt,r){var u,c,h;const e=null!==(u=null===(c=i)||void 0===c||null===(h=c.deref)||void 0===h?void 0:h.call(c))&&void 0!==u?u:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new Gt(l):l}return a.v=l,l}return o.clearCache=()=>{n=Yt(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function Zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},l=t.pop();"object"===typeof l&&(a=l,l=t.pop()),qt(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const u={...i,...a},{memoize:c,memoizeOptions:h=[],argsMemoize:d=Xt,argsMemoizeOptions:f=[],devModeChecks:p={}}=u,g=Wt(h),m=Wt(f),v=Kt(t),y=c((function(){return s++,l.apply(null,arguments)}),...g);const w=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(v,arguments);return r=y.apply(null,e),r}),...m);return Object.assign(w,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:c,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var $t=Zt(Xt),Jt=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map((t=>e[t])),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return r}),{withTypes:()=>Jt});function en(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var tn=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),nn=()=>Math.random().toString(36).substring(7).split("").join("."),rn={INIT:"@@redux/INIT".concat(nn()),REPLACE:"@@redux/REPLACE".concat(nn()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(nn())};function sn(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function on(e,t,n){if("function"!==typeof e)throw new Error(en(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(en(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(en(1));return n(on)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function c(){if(l)throw new Error(en(3));return i}function h(e){if("function"!==typeof e)throw new Error(en(4));if(l)throw new Error(en(5));let t=!0;u();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(en(6));t=!1,u(),o.delete(n),s=null}}}function d(e){if(!sn(e))throw new Error(en(7));if("undefined"===typeof e.type)throw new Error(en(8));if("string"!==typeof e.type)throw new Error(en(17));if(l)throw new Error(en(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}d({type:rn.INIT});return{dispatch:d,subscribe:h,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(en(10));r=e,d({type:rn.REPLACE})},[tn]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(en(11));function n(){const e=t;e.next&&e.next(c())}n();return{unsubscribe:e(n)}},[tn](){return this}}}}}function an(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:rn.INIT}))throw new Error(en(12));if("undefined"===typeof n(void 0,{type:rn.PROBE_UNKNOWN_ACTION()}))throw new Error(en(13))}))}(n)}catch(Px){i=Px}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],u=e[a],c=l(u,t);if("undefined"===typeof c){t&&t.type;throw new Error(en(14))}o[a]=c,s=s||c!==u}return s=s||r.length!==Object.keys(e).length,s?o:e}}function ln(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function un(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var cn=un(),hn=un,dn=(function(){const e=Zt(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(it(e)?Vt(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(Xt),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?ln:ln.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function fn(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(Vn(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return sn(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var pn=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function gn(e){return st(e)?jt(e,(()=>{})):e}function mn(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(Vn(10));const r=n.insert(t,e);return e.set(t,r),r}var vn="RTK_autoBatch",yn=e=>t=>{setTimeout(t,e)},wn="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:yn(10),bn=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new pn(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?wn:"callback"===e.type?e.queueNotification:yn(e.timeout),l=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[vn]),i=!r,i&&(s||(s=!0,a(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function _n(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(Vn(28));if(r in t)throw new Error(Vn(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var En=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var Sn=Symbol.for("rtk-slice-createasyncthunk");function kn(e,t){return"".concat(e,"/").concat(t)}function Cn(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[Sn];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(Vn(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(Vn(12));if(n in o.sliceCaseReducersByType)throw new Error(Vn(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?_n(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=_n(t);if(function(e){return"function"===typeof e}(e))n=()=>gn(e());else{const t=gn(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(it(e)){const r=n(e,t);return void 0===r?e:r}if(st(e))return jt(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(Vn(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:kn(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(Vn(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?fn(s,i):fn(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(Vn(18));const{payloadCreator:o,fulfilled:a,pending:l,rejected:u,settled:c,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);l&&n.addCase(d.pending,l);u&&n.addCase(d.rejected,u);c&&n.addMatcher(d.settled,c);n.exposeCaseReducer(s,{fulfilled:a||Tn,pending:l||Tn,rejected:u||Tn,settled:c||Tn})}(o,s,a,n)}));const u=e=>e,c=new Map;let h;function d(e,t){return h||(h=l()),h(e,t)}function f(){return h||(h=l()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const r=mn(c,n,{insert:()=>new WeakMap});return mn(r,t,{insert:()=>{const r={};for(const[s,o]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=In(o,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g={name:t,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...g,...p(i,!0)}}};return g}}function In(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return e(s,...a)}return i.unwrapped=e,i}var xn=Cn();function Tn(){}var Ln="listener",Pn="completed",Mn="cancelled",An=("task-".concat(Mn),"task-".concat(Pn),"".concat(Ln,"-").concat(Mn),"".concat(Ln,"-").concat(Pn),(e,t)=>{if("function"!==typeof e)throw new Error(Vn(32))});var{assign:Dn}=Object,Nn="listenerMiddleware",On=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=fn(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Vn(21));return An(s),{predicate:i,type:t,effect:s}},Rn=Object.assign((e=>{const{type:t,predicate:n,effect:r}=On(e);return{id:En(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Vn(22))}}}),{withTypes:()=>Rn}),Un=Object.assign(fn("".concat(Nn,"/add")),{withTypes:()=>Un}),Fn=(fn("".concat(Nn,"/removeAll")),Object.assign(fn("".concat(Nn,"/remove")),{withTypes:()=>Fn}));Symbol.for("rtk-state-proxy-original");function Vn(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const zn=xn({name:"user",initialState:{email:null,token:null,id:null},reducers:{setUser(e,t){e.email=t.payload.email,e.token=t.payload.token,e.id=t.payload.id},removeUser(e){e.email=null,e.token=null,e.id=null}}}),{setUser:Bn,removeUser:jn}=zn.actions,qn=zn.reducer;var Wn=n(579),Kn=function(e,t){return Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Kn(e,t)};function Gn(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Kn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Hn=function(){return Hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hn.apply(this,arguments)};function Qn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Yn(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(Px){s(Px)}}function a(e){try{l(r.throw(e))}catch(Px){s(Px)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))}function Xn(e,t){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(Px){s=[6,Px],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function Zn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $n=function(e,t,n,r,i,s,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,s,o,a],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}},Jn=Zn($n),er=(0,r.createContext)(null);function tr(e,t,n,r){var i={};return function(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}(e,(function(e,s){var o=n[s];o!==t[s]&&(i[s]=o,e(r,o))})),i}function nr(e,t,n){var r=function(e,t,n){return Object.keys(e).reduce((function(n,r){return t(n,e[r],r)}),n)}(n,(function(n,r,i){return"function"===typeof e[i]&&n.push(google.maps.event.addListener(t,r,e[i])),n}),[]);return r}function rr(e){google.maps.event.removeListener(e)}function ir(e){void 0===e&&(e=[]),e.forEach(rr)}function sr(e){var t=e.updaterMap,n=e.eventMap,r=e.prevProps,i=e.nextProps,s=e.instance,o=nr(i,s,n);return tr(t,r,i,s),o}var or={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},ar={extraMapTypes:function(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center:function(e,t){e.setCenter(t)},clickableIcons:function(e,t){e.setClickableIcons(t)},heading:function(e,t){e.setHeading(t)},mapTypeId:function(e,t){e.setMapTypeId(t)},options:function(e,t){e.setOptions(t)},streetView:function(e,t){e.setStreetView(t)},tilt:function(e,t){e.setTilt(t)},zoom:function(e,t){e.setZoom(t)}};(0,r.memo)((function(e){var t=e.children,n=e.options,i=e.id,s=e.mapContainerStyle,o=e.mapContainerClassName,a=e.center,l=e.onClick,u=e.onDblClick,c=e.onDrag,h=e.onDragEnd,d=e.onDragStart,f=e.onMouseMove,p=e.onMouseOut,g=e.onMouseOver,m=e.onMouseDown,v=e.onMouseUp,y=e.onRightClick,w=e.onCenterChanged,b=e.onLoad,_=e.onUnmount,E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useRef)(null),I=(0,r.useState)(null),x=I[0],T=I[1],L=(0,r.useState)(null),P=L[0],M=L[1],A=(0,r.useState)(null),D=A[0],N=A[1],O=(0,r.useState)(null),R=O[0],U=O[1],F=(0,r.useState)(null),V=F[0],z=F[1],B=(0,r.useState)(null),j=B[0],q=B[1],W=(0,r.useState)(null),K=W[0],G=W[1],H=(0,r.useState)(null),Q=H[0],Y=H[1],X=(0,r.useState)(null),Z=X[0],$=X[1],J=(0,r.useState)(null),ee=J[0],te=J[1],ne=(0,r.useState)(null),re=ne[0],ie=ne[1],se=(0,r.useState)(null),oe=se[0],ae=se[1];return(0,r.useEffect)((function(){n&&null!==S&&S.setOptions(n)}),[S,n]),(0,r.useEffect)((function(){null!==S&&"undefined"!==typeof a&&S.setCenter(a)}),[S,a]),(0,r.useEffect)((function(){S&&u&&(null!==P&&google.maps.event.removeListener(P),M(google.maps.event.addListener(S,"dblclick",u)))}),[u]),(0,r.useEffect)((function(){S&&h&&(null!==D&&google.maps.event.removeListener(D),N(google.maps.event.addListener(S,"dragend",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==R&&google.maps.event.removeListener(R),U(google.maps.event.addListener(S,"dragstart",d)))}),[d]),(0,r.useEffect)((function(){S&&m&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(S,"mousedown",m)))}),[m]),(0,r.useEffect)((function(){S&&f&&(null!==j&&google.maps.event.removeListener(j),q(google.maps.event.addListener(S,"mousemove",f)))}),[f]),(0,r.useEffect)((function(){S&&p&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(S,"mouseout",p)))}),[p]),(0,r.useEffect)((function(){S&&g&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(S,"mouseover",g)))}),[g]),(0,r.useEffect)((function(){S&&v&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(S,"mouseup",v)))}),[v]),(0,r.useEffect)((function(){S&&y&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(S,"rightclick",y)))}),[y]),(0,r.useEffect)((function(){S&&l&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(S,"click",l)))}),[l]),(0,r.useEffect)((function(){S&&c&&(null!==oe&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(S,"drag",c)))}),[c]),(0,r.useEffect)((function(){S&&w&&(null!==x&&google.maps.event.removeListener(x),T(google.maps.event.addListener(S,"center_changed",w)))}),[l]),(0,r.useEffect)((function(){var e=null===C.current?null:new google.maps.Map(C.current,n);return k(e),null!==e&&b&&b(e),function(){null!==e&&_&&_(e)}}),[]),(0,Wn.jsx)("div",{id:i,ref:C,style:s,className:o,children:(0,Wn.jsx)(er.Provider,{value:S,children:null!==S?t:null})})}));var lr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={map:null},t.registeredEvents=[],t.mapRef=null,t.getInstance=function(){return null===t.mapRef?null:new google.maps.Map(t.mapRef,t.props.options)},t.panTo=function(e){var n=t.getInstance();n&&n.panTo(e)},t.setMapCallback=function(){null!==t.state.map&&t.props.onLoad&&t.props.onLoad(t.state.map)},t.getRef=function(e){t.mapRef=e},t}return Gn(t,e),t.prototype.componentDidMount=function(){var e=this.getInstance();this.registeredEvents=sr({updaterMap:ar,eventMap:or,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.map&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:ar,eventMap:or,prevProps:e,nextProps:this.props,instance:this.state.map}))},t.prototype.componentWillUnmount=function(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ir(this.registeredEvents))},t.prototype.render=function(){return(0,Wn.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,Wn.jsx)(er.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})},t}(r.PureComponent),ur="undefined"!==typeof document;function cr(e){var t=e.url,n=e.id,r=e.nonce;return ur?new Promise((function(e,i){var s=document.getElementById(n),o=window;if(s){var a=s.getAttribute("data-state");if(s.src===t&&"error"!==a){if("ready"===a)return e(n);var l=o.initMap,u=s.onerror;return o.initMap=function(){l&&l(),e(n)},void(s.onerror=function(e){u&&u(e),i(e)})}s.remove()}var c=document.createElement("script");c.type="text/javascript",c.src=t,c.id=n,c.async=!0,c.nonce=r||"",c.onerror=function(e){c.setAttribute("data-state","error"),i(e)},o.initMap=function(){c.setAttribute("data-state","ready"),e(n)},document.head.appendChild(c)})).catch((function(e){throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function hr(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function dr(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(n,r){return hr(n)||Reflect.apply(t,e,[n,r]),n};var n=e.appendChild.bind(e);e.appendChild=function(t){return hr(t)||Reflect.apply(n,e,[t]),t}}}function fr(e){var t=e.googleMapsApiKey,n=e.googleMapsClientId,r=e.version,i=void 0===r?"weekly":r,s=e.language,o=e.region,a=e.libraries,l=e.channel,u=e.mapIds,c=e.authReferrerPolicy,h=[];return Jn(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?h.push("key=".concat(t)):n&&h.push("client=".concat(n)),i&&h.push("v=".concat(i)),s&&h.push("language=".concat(s)),o&&h.push("region=".concat(o)),a&&a.length&&h.push("libraries=".concat(a.sort().join(","))),l&&h.push("channel=".concat(l)),u&&u.length&&h.push("map_ids=".concat(u.join(","))),c&&h.push("auth_referrer_policy=".concat(c)),h.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(h.join("&"))}var pr=!1;function gr(){return(0,Wn.jsx)("div",{children:"Loading..."})}var mr,vr={id:"script-loader",version:"weekly"};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.check=(0,r.createRef)(),t.state={loaded:!1},t.cleanupCallback=function(){delete window.google.maps,t.injectScript()},t.isCleaningUp=function(){return Yn(t,void 0,void 0,(function(){function e(e){if(pr){if(ur)var t=window.setInterval((function(){pr||(window.clearInterval(t),e())}),1)}else e()}return Xn(this,(function(t){return[2,new Promise(e)]}))}))},t.cleanup=function(){pr=!0;var e=document.getElementById(t.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},t.injectScript=function(){t.props.preventGoogleFontsLoading&&dr(),Jn(!!t.props.id,'LoadScript requires "id" prop to be a string: %s',t.props.id),cr({id:t.props.id,nonce:t.props.nonce,url:fr(t.props)}).then((function(){t.props.onLoad&&t.props.onLoad(),t.setState((function(){return{loaded:!0}}))})).catch((function(e){t.props.onError&&t.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(t.props.googleMapsApiKey||"-",") or Client ID (").concat(t.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))},t}Gn(t,e),t.prototype.componentDidMount=function(){if(ur){if(window.google&&window.google.maps&&!pr)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}},t.prototype.componentDidUpdate=function(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),ur&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))},t.prototype.componentWillUnmount=function(){var e=this;if(ur){this.cleanup();window.setTimeout((function(){e.check.current||(delete window.google,pr=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}},t.prototype.render=function(){return(0,Wn.jsxs)(Wn.Fragment,{children:[(0,Wn.jsx)("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||(0,Wn.jsx)(gr,{})]})},t.defaultProps=vr}(r.PureComponent);function yr(e){var t=e.id,n=void 0===t?vr.id:t,i=e.version,s=void 0===i?vr.version:i,o=e.nonce,a=e.googleMapsApiKey,l=e.googleMapsClientId,u=e.language,c=e.region,h=e.libraries,d=e.preventGoogleFontsLoading,f=e.channel,p=e.mapIds,g=e.authReferrerPolicy,m=(0,r.useRef)(!1),v=(0,r.useState)(!1),y=v[0],w=v[1],b=(0,r.useState)(void 0),_=b[0],E=b[1];(0,r.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]),(0,r.useEffect)((function(){ur&&d&&dr()}),[d]),(0,r.useEffect)((function(){y&&Jn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[y]);var S=fr({version:s,googleMapsApiKey:a,googleMapsClientId:l,language:u,region:c,libraries:h,channel:f,mapIds:p,authReferrerPolicy:g});(0,r.useEffect)((function(){function e(){m.current&&(w(!0),mr=S)}ur&&(window.google&&window.google.maps&&mr===S?e():cr({id:n,url:S,nonce:o}).then(e).catch((function(e){m.current&&E(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(a||"-",") or Client ID (").concat(l||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[n,S,o]);var k=(0,r.useRef)();return(0,r.useEffect)((function(){k.current&&h!==k.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),k.current=h}),[h]),{isLoaded:y,loadError:_,url:S}}var wr=(0,Wn.jsx)(gr,{});(0,r.memo)((function(e){var t=e.loadingElement,n=e.onLoad,i=e.onError,s=e.onUnmount,o=e.children,a=yr(Qn(e,["loadingElement","onLoad","onError","onUnmount","children"])),l=a.isLoaded,u=a.loadError;return(0,r.useEffect)((function(){l&&"function"===typeof n&&n()}),[l,n]),(0,r.useEffect)((function(){u&&"function"===typeof i&&i(u)}),[u,i]),(0,r.useEffect)((function(){return function(){s&&s()}}),[s]),l?o:t||wr}));var br;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(br||(br={}));var _r={},Er={options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.options,n=e.onLoad,i=e.onUnmount,s=(0,r.useContext)(er),o=(0,r.useState)(null),a=o[0],l=o[1];return(0,r.useEffect)((function(){null!==a&&a.setMap(s)}),[s]),(0,r.useEffect)((function(){t&&null!==a&&a.setOptions(t)}),[a,t]),(0,r.useEffect)((function(){var e=new google.maps.TrafficLayer(Hn(Hn({},t||{}),{map:s}));return l(e),n&&n(e),function(){null!==a&&(i&&i(a),a.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={trafficLayer:null},t.setTrafficLayerCallback=function(){null!==t.state.trafficLayer&&t.props.onLoad&&t.props.onLoad(t.state.trafficLayer)},t.registeredEvents=[],t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.TrafficLayer(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:Er,eventMap:_r,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.trafficLayer&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Er,eventMap:_r,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))},t.prototype.componentWillUnmount=function(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ir(this.registeredEvents),this.state.trafficLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);(0,r.memo)((function(e){var t=e.onLoad,n=e.onUnmount,i=(0,r.useContext)(er),s=(0,r.useState)(null),o=s[0],a=s[1];return(0,r.useEffect)((function(){null!==o&&o.setMap(i)}),[i]),(0,r.useEffect)((function(){var e=new google.maps.BicyclingLayer;return a(e),e.setMap(i),t&&t(e),function(){null!==e&&(n&&n(e),e.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bicyclingLayer:null},t.setBicyclingLayerCallback=function(){null!==t.state.bicyclingLayer&&(t.state.bicyclingLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.bicyclingLayer))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.BicyclingLayer;this.setState((function(){return{bicyclingLayer:e}}),this.setBicyclingLayerCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);(0,r.memo)((function(e){var t=e.onLoad,n=e.onUnmount,i=(0,r.useContext)(er),s=(0,r.useState)(null),o=s[0],a=s[1];return(0,r.useEffect)((function(){null!==o&&o.setMap(i)}),[i]),(0,r.useEffect)((function(){var e=new google.maps.TransitLayer;return a(e),e.setMap(i),t&&t(e),function(){null!==o&&(n&&n(o),o.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={transitLayer:null},t.setTransitLayerCallback=function(){null!==t.state.transitLayer&&(t.state.transitLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.transitLayer))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Sr={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},kr={drawingMode:function(e,t){e.setDrawingMode(t)},options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.options,n=e.drawingMode,i=e.onCircleComplete,s=e.onMarkerComplete,o=e.onOverlayComplete,a=e.onPolygonComplete,l=e.onPolylineComplete,u=e.onRectangleComplete,c=e.onLoad,h=e.onUnmount,d=(0,r.useContext)(er),f=(0,r.useState)(null),p=f[0],g=f[1],m=(0,r.useState)(null),v=m[0],y=m[1],w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],M=(0,r.useState)(null),A=M[0],D=M[1];return(0,r.useEffect)((function(){null!==p&&p.setMap(d)}),[d]),(0,r.useEffect)((function(){t&&null!==p&&p.setOptions(t)}),[p,t]),(0,r.useEffect)((function(){null!==p&&p.setDrawingMode(null!==n&&void 0!==n?n:null)}),[p,n]),(0,r.useEffect)((function(){p&&i&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(p,"circlecomplete",i)))}),[p,i]),(0,r.useEffect)((function(){p&&s&&(null!==b&&google.maps.event.removeListener(b),_(google.maps.event.addListener(p,"markercomplete",s)))}),[p,s]),(0,r.useEffect)((function(){p&&o&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(p,"overlaycomplete",o)))}),[p,o]),(0,r.useEffect)((function(){p&&a&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(p,"polygoncomplete",a)))}),[p,a]),(0,r.useEffect)((function(){p&&l&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(p,"polylinecomplete",l)))}),[p,l]),(0,r.useEffect)((function(){p&&u&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(p,"rectanglecomplete",u)))}),[p,u]),(0,r.useEffect)((function(){Jn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Hn(Hn({},t||{}),{map:d}));return n&&e.setDrawingMode(n),i&&y(google.maps.event.addListener(e,"circlecomplete",i)),s&&_(google.maps.event.addListener(e,"markercomplete",s)),o&&k(google.maps.event.addListener(e,"overlaycomplete",o)),a&&x(google.maps.event.addListener(e,"polygoncomplete",a)),l&&P(google.maps.event.addListener(e,"polylinecomplete",l)),u&&D(google.maps.event.addListener(e,"rectanglecomplete",u)),g(e),c&&c(e),function(){null!==p&&(v&&google.maps.event.removeListener(v),b&&google.maps.event.removeListener(b),S&&google.maps.event.removeListener(S),I&&google.maps.event.removeListener(I),L&&google.maps.event.removeListener(L),A&&google.maps.event.removeListener(A),h&&h(p),p.setMap(null))}}),[]),null})),function(e){function t(t){var n=e.call(this,t)||this;return n.registeredEvents=[],n.state={drawingManager:null},n.setDrawingManagerCallback=function(){null!==n.state.drawingManager&&n.props.onLoad&&n.props.onLoad(n.state.drawingManager)},Jn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),n}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.drawing.DrawingManager(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:kr,eventMap:Sr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.drawingManager&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:kr,eventMap:Sr,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))},t.prototype.componentWillUnmount=function(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ir(this.registeredEvents),this.state.drawingManager.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Cr={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Ir={animation:function(e,t){e.setAnimation(t)},clickable:function(e,t){e.setClickable(t)},cursor:function(e,t){e.setCursor(t)},draggable:function(e,t){e.setDraggable(t)},icon:function(e,t){e.setIcon(t)},label:function(e,t){e.setLabel(t)},map:function(e,t){e.setMap(t)},opacity:function(e,t){e.setOpacity(t)},options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},shape:function(e,t){e.setShape(t)},title:function(e,t){e.setTitle(t)},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},xr={};(0,r.memo)((function(e){var t=e.position,n=e.options,i=e.clusterer,s=e.noClustererRedraw,o=e.children,a=e.draggable,l=e.visible,u=e.animation,c=e.clickable,h=e.cursor,d=e.icon,f=e.label,p=e.opacity,g=e.shape,m=e.title,v=e.zIndex,y=e.onClick,w=e.onDblClick,b=e.onDrag,_=e.onDragEnd,E=e.onDragStart,S=e.onMouseOut,k=e.onMouseOver,C=e.onMouseUp,I=e.onMouseDown,x=e.onRightClick,T=e.onClickableChanged,L=e.onCursorChanged,P=e.onAnimationChanged,M=e.onDraggableChanged,A=e.onFlatChanged,D=e.onIconChanged,N=e.onPositionChanged,O=e.onShapeChanged,R=e.onTitleChanged,U=e.onVisibleChanged,F=e.onZindexChanged,V=e.onLoad,z=e.onUnmount,B=(0,r.useContext)(er),j=(0,r.useState)(null),q=j[0],W=j[1],K=(0,r.useState)(null),G=K[0],H=K[1],Q=(0,r.useState)(null),Y=Q[0],X=Q[1],Z=(0,r.useState)(null),$=Z[0],J=Z[1],ee=(0,r.useState)(null),te=ee[0],ne=ee[1],re=(0,r.useState)(null),ie=re[0],se=re[1],oe=(0,r.useState)(null),ae=oe[0],le=oe[1],ue=(0,r.useState)(null),ce=ue[0],he=ue[1],de=(0,r.useState)(null),fe=de[0],pe=de[1],ge=(0,r.useState)(null),me=ge[0],ve=ge[1],ye=(0,r.useState)(null),we=ye[0],be=ye[1],_e=(0,r.useState)(null),Ee=_e[0],Se=_e[1],ke=(0,r.useState)(null),Ce=ke[0],Ie=ke[1],xe=(0,r.useState)(null),Te=xe[0],Le=xe[1],Pe=(0,r.useState)(null),Me=Pe[0],Ae=Pe[1],De=(0,r.useState)(null),Ne=De[0],Oe=De[1],Re=(0,r.useState)(null),Ue=Re[0],Fe=Re[1],Ve=(0,r.useState)(null),ze=Ve[0],Be=Ve[1],je=(0,r.useState)(null),qe=je[0],We=je[1],Ke=(0,r.useState)(null),Ge=Ke[0],He=Ke[1],Qe=(0,r.useState)(null),Ye=Qe[0],Xe=Qe[1],Ze=(0,r.useState)(null),$e=Ze[0],Je=Ze[1];(0,r.useEffect)((function(){null!==q&&q.setMap(B)}),[B]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==q&&q.setOptions(n)}),[q,n]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==q&&q.setDraggable(a)}),[q,a]),(0,r.useEffect)((function(){t&&null!==q&&q.setPosition(t)}),[q,t]),(0,r.useEffect)((function(){"undefined"!==typeof l&&null!==q&&q.setVisible(l)}),[q,l]),(0,r.useEffect)((function(){null===q||void 0===q||q.setAnimation(u)}),[q,u]),(0,r.useEffect)((function(){q&&void 0!==c&&q.setClickable(c)}),[q,c]),(0,r.useEffect)((function(){q&&void 0!==h&&q.setCursor(h)}),[q,h]),(0,r.useEffect)((function(){q&&void 0!==d&&q.setIcon(d)}),[q,d]),(0,r.useEffect)((function(){q&&void 0!==f&&q.setLabel(f)}),[q,f]),(0,r.useEffect)((function(){q&&void 0!==p&&q.setOpacity(p)}),[q,p]),(0,r.useEffect)((function(){q&&void 0!==g&&q.setShape(g)}),[q,g]),(0,r.useEffect)((function(){q&&void 0!==m&&q.setTitle(m)}),[q,m]),(0,r.useEffect)((function(){q&&void 0!==v&&q.setZIndex(v)}),[q,v]),(0,r.useEffect)((function(){q&&w&&(null!==G&&google.maps.event.removeListener(G),H(google.maps.event.addListener(q,"dblclick",w)))}),[w]),(0,r.useEffect)((function(){q&&_&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(q,"dragend",_)))}),[_]),(0,r.useEffect)((function(){q&&E&&(null!==$&&google.maps.event.removeListener($),J(google.maps.event.addListener(q,"dragstart",E)))}),[E]),(0,r.useEffect)((function(){q&&I&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(q,"mousedown",I)))}),[I]),(0,r.useEffect)((function(){q&&S&&(null!==ie&&google.maps.event.removeListener(ie),se(google.maps.event.addListener(q,"mouseout",S)))}),[S]),(0,r.useEffect)((function(){q&&k&&(null!==ae&&google.maps.event.removeListener(ae),le(google.maps.event.addListener(q,"mouseover",k)))}),[k]),(0,r.useEffect)((function(){q&&C&&(null!==ce&&google.maps.event.removeListener(ce),he(google.maps.event.addListener(q,"mouseup",C)))}),[C]),(0,r.useEffect)((function(){q&&x&&(null!==fe&&google.maps.event.removeListener(fe),pe(google.maps.event.addListener(q,"rightclick",x)))}),[x]),(0,r.useEffect)((function(){q&&y&&(null!==me&&google.maps.event.removeListener(me),ve(google.maps.event.addListener(q,"click",y)))}),[y]),(0,r.useEffect)((function(){q&&b&&(null!==we&&google.maps.event.removeListener(we),be(google.maps.event.addListener(q,"drag",b)))}),[b]),(0,r.useEffect)((function(){q&&T&&(null!==Ee&&google.maps.event.removeListener(Ee),Se(google.maps.event.addListener(q,"clickable_changed",T)))}),[T]),(0,r.useEffect)((function(){q&&L&&(null!==Ce&&google.maps.event.removeListener(Ce),Ie(google.maps.event.addListener(q,"cursor_changed",L)))}),[L]),(0,r.useEffect)((function(){q&&P&&(null!==Te&&google.maps.event.removeListener(Te),Le(google.maps.event.addListener(q,"animation_changed",P)))}),[P]),(0,r.useEffect)((function(){q&&M&&(null!==Me&&google.maps.event.removeListener(Me),Ae(google.maps.event.addListener(q,"draggable_changed",M)))}),[M]),(0,r.useEffect)((function(){q&&A&&(null!==Ne&&google.maps.event.removeListener(Ne),Oe(google.maps.event.addListener(q,"flat_changed",A)))}),[A]),(0,r.useEffect)((function(){q&&D&&(null!==Ue&&google.maps.event.removeListener(Ue),Fe(google.maps.event.addListener(q,"icon_changed",D)))}),[D]),(0,r.useEffect)((function(){q&&N&&(null!==ze&&google.maps.event.removeListener(ze),Be(google.maps.event.addListener(q,"position_changed",N)))}),[N]),(0,r.useEffect)((function(){q&&O&&(null!==qe&&google.maps.event.removeListener(qe),We(google.maps.event.addListener(q,"shape_changed",O)))}),[O]),(0,r.useEffect)((function(){q&&R&&(null!==Ge&&google.maps.event.removeListener(Ge),He(google.maps.event.addListener(q,"title_changed",R)))}),[R]),(0,r.useEffect)((function(){q&&U&&(null!==Ye&&google.maps.event.removeListener(Ye),Xe(google.maps.event.addListener(q,"visible_changed",U)))}),[U]),(0,r.useEffect)((function(){q&&F&&(null!==$e&&google.maps.event.removeListener($e),Je(google.maps.event.addListener(q,"zindex_changed",F)))}),[F]),(0,r.useEffect)((function(){var e=Hn(Hn(Hn({},n||xr),i?xr:{map:B}),{position:t}),r=new google.maps.Marker(e);return i?i.addMarker(r,!!s):r.setMap(B),t&&r.setPosition(t),"undefined"!==typeof l&&r.setVisible(l),"undefined"!==typeof a&&r.setDraggable(a),"undefined"!==typeof c&&r.setClickable(c),"string"===typeof h&&r.setCursor(h),d&&r.setIcon(d),"undefined"!==typeof f&&r.setLabel(f),"undefined"!==typeof p&&r.setOpacity(p),g&&r.setShape(g),"string"===typeof m&&r.setTitle(m),"number"===typeof v&&r.setZIndex(v),w&&H(google.maps.event.addListener(r,"dblclick",w)),_&&X(google.maps.event.addListener(r,"dragend",_)),E&&J(google.maps.event.addListener(r,"dragstart",E)),I&&ne(google.maps.event.addListener(r,"mousedown",I)),S&&se(google.maps.event.addListener(r,"mouseout",S)),k&&le(google.maps.event.addListener(r,"mouseover",k)),C&&he(google.maps.event.addListener(r,"mouseup",C)),x&&pe(google.maps.event.addListener(r,"rightclick",x)),y&&ve(google.maps.event.addListener(r,"click",y)),b&&be(google.maps.event.addListener(r,"drag",b)),T&&Se(google.maps.event.addListener(r,"clickable_changed",T)),L&&Ie(google.maps.event.addListener(r,"cursor_changed",L)),P&&Le(google.maps.event.addListener(r,"animation_changed",P)),M&&Ae(google.maps.event.addListener(r,"draggable_changed",M)),A&&Oe(google.maps.event.addListener(r,"flat_changed",A)),D&&Fe(google.maps.event.addListener(r,"icon_changed",D)),N&&Be(google.maps.event.addListener(r,"position_changed",N)),O&&We(google.maps.event.addListener(r,"shape_changed",O)),R&&He(google.maps.event.addListener(r,"title_changed",R)),U&&Xe(google.maps.event.addListener(r,"visible_changed",U)),F&&Je(google.maps.event.addListener(r,"zindex_changed",F)),W(r),V&&V(r),function(){null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==$&&google.maps.event.removeListener($),null!==te&&google.maps.event.removeListener(te),null!==ie&&google.maps.event.removeListener(ie),null!==ae&&google.maps.event.removeListener(ae),null!==ce&&google.maps.event.removeListener(ce),null!==fe&&google.maps.event.removeListener(fe),null!==me&&google.maps.event.removeListener(me),null!==Ee&&google.maps.event.removeListener(Ee),null!==Ce&&google.maps.event.removeListener(Ce),null!==Te&&google.maps.event.removeListener(Te),null!==Me&&google.maps.event.removeListener(Me),null!==Ne&&google.maps.event.removeListener(Ne),null!==Ue&&google.maps.event.removeListener(Ue),null!==ze&&google.maps.event.removeListener(ze),null!==Ge&&google.maps.event.removeListener(Ge),null!==Ye&&google.maps.event.removeListener(Ye),null!==$e&&google.maps.event.removeListener($e),z&&z(r),i?i.removeMarker(r,!!s):r&&r.setMap(null)}}),[]);var et=(0,r.useMemo)((function(){return o?r.Children.map(o,(function(e){if(!(0,r.isValidElement)(e))return e;var t=e;return(0,r.cloneElement)(t,{anchor:q})})):null}),[o,q]);return(0,Wn.jsx)(Wn.Fragment,{children:et})||null}));var Tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t}return Gn(t,e),t.prototype.componentDidMount=function(){var e=Hn(Hn(Hn({},this.props.options||xr),this.props.clusterer?xr:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(e),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=sr({updaterMap:Ir,eventMap:Cr,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)},t.prototype.componentDidUpdate=function(e){this.marker&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Ir,eventMap:Cr,prevProps:e,nextProps:this.props,instance:this.marker}))},t.prototype.componentWillUnmount=function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ir(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))},t.prototype.render=function(){var e=this,t=null;return this.props.children&&(t=r.Children.map(this.props.children,(function(t){if(!(0,r.isValidElement)(t))return t;var n=t;return(0,r.cloneElement)(n,{anchor:e.marker})}))),t||null},t.contextType=er,t}(r.PureComponent),Lr=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),i=t.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var i=e.getZoom()||0;null!==n&&i>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r,i,s;if(this.div&&this.center){var o=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),l=parseInt((null===(e=a[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),u=parseInt((null===(t=a[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),c=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==c?"".concat(c.y,"px"):"0","; left: ").concat(null!==c?"".concat(c.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var h=document.createElement("img");h.alt=o,h.src=this.url,h.width=this.width,h.height=this.height,h.setAttribute("style","position: absolute; top: ".concat(u,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(h.style.clip="rect(-".concat(u,"px, -").concat(l+this.width,"px, -").concat(u+this.height,", -").concat(l,")"));var d=document.createElement("div");d.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(n=this.sums)||void 0===n?void 0:n.text)&&(d.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(i=this.sums)||void 0===i?void 0:i.html)&&(d.innerHTML="".concat(null===(s=this.sums)||void 0===s?void 0:s.html)),this.div.innerHTML="",this.div.appendChild(h),this.div.appendChild(d),this.div.title=o,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),Pr=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new Lr(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,n=this.getMarkers();t<n.length;t++){var r=n[t].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var i=this.markers.length,s=this.markerClusterer.getMaxZoom(),o=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==s&&"undefined"!==typeof o&&o>s)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var a=0,l=this.markers;a<l.length;a++){l[a].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function Mr(e,t){var n=e.length,r=n.toString().length,i=Math.min(r,t);return{text:n.toString(),index:i,title:""}}var Ar=[53,56,66,78,90],Dr=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||Ar,this.calculator=r.calculator||Mr,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var n=t[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var r=0,i=this.clusters;r<i.length;r++){i[r].remove()}this.clusters=[];for(var s=0,o=this.listeners;s<o.length;s++){var a=o[s];google.maps.event.removeListener(a)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0,r=e;n<r.length;n++){var i=r[n].getPosition();i&&t.extend(i)}var s=this.getMap();null!==s&&"fitBounds"in s&&s.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0,i=e;r<i.length;r++){var s=i[r];n=n||this.removeMarker_(s)}return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0,n=e;t<n.length;t++){n[t].remove()}}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var i=t.fromDivPixelToLatLng(n);null!==i&&e.extend(i)}if(null!==r){var s=t.fromDivPixelToLatLng(r);null!==s&&e.extend(s)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,n=this.clusters;t<n.length;t++){n[t].remove()}this.clusters=[];for(var r=0,i=this.markers;r<i.length;r++){var s=i[r];s.isAdded=!1,e&&s.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,i=0,s=this.clusters;i<s.length;i++){var o=(t=s[i]).getCenter(),a=e.getPosition();if(o&&a){var l=this.distanceBetweenPoints(o,a);l<n&&(n=l,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new Pr(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),i=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),s=this.getExtendedBounds(i),o=Math.min(e+this.batchSize,this.markers.length),a=e;a<o;a++){var l=this.markers[a];l&&!l.isAdded&&this.isMarkerInBounds(l,s)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(o<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(o)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var u=0,c=this.clusters;u<c.length;u++){c[u].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var n=t;this.prototype[n]=e.prototype[n]}return this}.apply(e,[t])},e}(),Nr={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Or={averageCenter:function(e,t){e.setAverageCenter(t)},batchSizeIE:function(e,t){e.setBatchSizeIE(t)},calculator:function(e,t){e.setCalculator(t)},clusterClass:function(e,t){e.setClusterClass(t)},enableRetinaIcons:function(e,t){e.setEnableRetinaIcons(t)},gridSize:function(e,t){e.setGridSize(t)},ignoreHidden:function(e,t){e.setIgnoreHidden(t)},imageExtension:function(e,t){e.setImageExtension(t)},imagePath:function(e,t){e.setImagePath(t)},imageSizes:function(e,t){e.setImageSizes(t)},maxZoom:function(e,t){e.setMaxZoom(t)},minimumClusterSize:function(e,t){e.setMinimumClusterSize(t)},styles:function(e,t){e.setStyles(t)},title:function(e,t){e.setTitle(t)},zoomOnClick:function(e,t){e.setZoomOnClick(t)}},Rr={};(0,r.memo)((function(e){var t=e.children,n=e.options,i=e.averageCenter,s=e.batchSizeIE,o=e.calculator,a=e.clusterClass,l=e.enableRetinaIcons,u=e.gridSize,c=e.ignoreHidden,h=e.imageExtension,d=e.imagePath,f=e.imageSizes,p=e.maxZoom,g=e.minimumClusterSize,m=e.styles,v=e.title,y=e.zoomOnClick,w=e.onClick,b=e.onClusteringBegin,_=e.onClusteringEnd,E=e.onMouseOver,S=e.onMouseOut,k=e.onLoad,C=e.onUnmount,I=(0,r.useState)(null),x=I[0],T=I[1],L=(0,r.useContext)(er),P=(0,r.useState)(null),M=P[0],A=P[1],D=(0,r.useState)(null),N=D[0],O=D[1],R=(0,r.useState)(null),U=R[0],F=R[1],V=(0,r.useState)(null),z=V[0],B=V[1],j=(0,r.useState)(null),q=j[0],W=j[1];return(0,r.useEffect)((function(){x&&S&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(x,Nr.onMouseOut,S)))}),[S]),(0,r.useEffect)((function(){x&&E&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(x,Nr.onMouseOver,E)))}),[E]),(0,r.useEffect)((function(){x&&w&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(x,Nr.onClick,w)))}),[w]),(0,r.useEffect)((function(){x&&b&&(null!==N&&google.maps.event.removeListener(N),O(google.maps.event.addListener(x,Nr.onClusteringBegin,b)))}),[b]),(0,r.useEffect)((function(){x&&_&&(null!==U&&google.maps.event.removeListener(U),O(google.maps.event.addListener(x,Nr.onClusteringEnd,_)))}),[_]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==x&&Or.averageCenter(x,i)}),[x,i]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==x&&Or.batchSizeIE(x,s)}),[x,s]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==x&&Or.calculator(x,o)}),[x,o]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==x&&Or.clusterClass(x,a)}),[x,a]),(0,r.useEffect)((function(){"undefined"!==typeof l&&null!==x&&Or.enableRetinaIcons(x,l)}),[x,l]),(0,r.useEffect)((function(){"undefined"!==typeof u&&null!==x&&Or.gridSize(x,u)}),[x,u]),(0,r.useEffect)((function(){"undefined"!==typeof c&&null!==x&&Or.ignoreHidden(x,c)}),[x,c]),(0,r.useEffect)((function(){"undefined"!==typeof h&&null!==x&&Or.imageExtension(x,h)}),[x,h]),(0,r.useEffect)((function(){"undefined"!==typeof d&&null!==x&&Or.imagePath(x,d)}),[x,d]),(0,r.useEffect)((function(){"undefined"!==typeof f&&null!==x&&Or.imageSizes(x,f)}),[x,f]),(0,r.useEffect)((function(){"undefined"!==typeof p&&null!==x&&Or.maxZoom(x,p)}),[x,p]),(0,r.useEffect)((function(){"undefined"!==typeof g&&null!==x&&Or.minimumClusterSize(x,g)}),[x,g]),(0,r.useEffect)((function(){"undefined"!==typeof m&&null!==x&&Or.styles(x,m)}),[x,m]),(0,r.useEffect)((function(){"undefined"!==typeof v&&null!==x&&Or.title(x,v)}),[x,v]),(0,r.useEffect)((function(){"undefined"!==typeof y&&null!==x&&Or.zoomOnClick(x,y)}),[x,y]),(0,r.useEffect)((function(){if(L){var e=Hn({},n||Rr),t=new Dr(L,[],e);return i&&Or.averageCenter(t,i),s&&Or.batchSizeIE(t,s),o&&Or.calculator(t,o),a&&Or.clusterClass(t,a),l&&Or.enableRetinaIcons(t,l),u&&Or.gridSize(t,u),c&&Or.ignoreHidden(t,c),h&&Or.imageExtension(t,h),d&&Or.imagePath(t,d),f&&Or.imageSizes(t,f),p&&Or.maxZoom(t,p),g&&Or.minimumClusterSize(t,g),m&&Or.styles(t,m),v&&Or.title(t,v),y&&Or.zoomOnClick(t,y),S&&B(google.maps.event.addListener(t,Nr.onMouseOut,S)),E&&W(google.maps.event.addListener(t,Nr.onMouseOver,E)),w&&A(google.maps.event.addListener(t,Nr.onClick,w)),b&&O(google.maps.event.addListener(t,Nr.onClusteringBegin,b)),_&&F(google.maps.event.addListener(t,Nr.onClusteringEnd,_)),T(t),k&&k(t),function(){null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==M&&google.maps.event.removeListener(M),null!==N&&google.maps.event.removeListener(N),null!==U&&google.maps.event.removeListener(U),C&&C(t)}}}),[]),null!==x&&t(x)||null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={markerClusterer:null},t.setClustererCallback=function(){null!==t.state.markerClusterer&&t.props.onLoad&&t.props.onLoad(t.state.markerClusterer)},t}Gn(t,e),t.prototype.componentDidMount=function(){if(this.context){var e=new Dr(this.context,[],this.props.options);this.registeredEvents=sr({updaterMap:Or,eventMap:Nr,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{markerClusterer:e}}),this.setClustererCallback)}},t.prototype.componentDidUpdate=function(e){this.state.markerClusterer&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Or,eventMap:Nr,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))},t.prototype.componentWillUnmount=function(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ir(this.registeredEvents),this.state.markerClusterer.setMap(null))},t.prototype.render=function(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null},t.contextType=er}(r.PureComponent);function Ur(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var Fr=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<i.length;r++){var s=i[r];this.eventListeners.push(google.maps.event.addListener(this.div,s,Ur))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||Ur(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,i=t.getBounds();i&&!i.contains(this.position)&&t.setCenter(this.position);var s=t.getDiv(),o=s.offsetWidth,a=s.offsetHeight,l=this.pixelOffset.width,u=this.pixelOffset.height,c=this.div.offsetWidth,h=this.div.offsetHeight,d=this.infoBoxClearance.width,f=this.infoBoxClearance.height,p=this.getProjection().fromLatLngToContainerPixel(this.position);null!==p&&(p.x<-l+d?n=p.x+l-d:p.x+c+l+d>o&&(n=p.x+c+l+d-o),this.alignBottom?p.y<-u+f+h?r=p.y+u-f-h:p.y+u+f>a&&(r=p.y+u+f-a):p.y<-u+f?r=p.y+u-f:p.y+h+u+f>a&&(r=p.y+h+u+f-a)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var n=t[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),Vr={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},zr={options:function(e,t){e.setOptions(t)},position:function(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},Br={};(0,r.memo)((function(e){var t=e.children,n=e.anchor,i=e.options,s=e.position,a=e.zIndex,l=e.onCloseClick,u=e.onDomReady,c=e.onContentChanged,h=e.onPositionChanged,d=e.onZindexChanged,f=e.onLoad,p=e.onUnmount,g=(0,r.useContext)(er),m=(0,r.useState)(null),v=m[0],y=m[1],w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],M=(0,r.useState)(null),A=M[0],D=M[1],N=(0,r.useRef)(null);return(0,r.useEffect)((function(){g&&null!==v&&(v.close(),n?v.open(g,n):v.getPosition()&&v.open(g))}),[g,v,n]),(0,r.useEffect)((function(){i&&null!==v&&v.setOptions(i)}),[v,i]),(0,r.useEffect)((function(){if(s&&null!==v){var e=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);v.setPosition(e)}}),[s]),(0,r.useEffect)((function(){"number"===typeof a&&null!==v&&v.setZIndex(a)}),[a]),(0,r.useEffect)((function(){v&&l&&(null!==b&&google.maps.event.removeListener(b),_(google.maps.event.addListener(v,"closeclick",l)))}),[l]),(0,r.useEffect)((function(){v&&u&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(v,"domready",u)))}),[u]),(0,r.useEffect)((function(){v&&c&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(v,"content_changed",c)))}),[c]),(0,r.useEffect)((function(){v&&h&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(v,"position_changed",h)))}),[h]),(0,r.useEffect)((function(){v&&d&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(v,"zindex_changed",d)))}),[d]),(0,r.useEffect)((function(){if(g){var e=i||Br,t=e.position,r=Qn(e,["position"]),s=void 0;!t||t instanceof google.maps.LatLng||(s=new google.maps.LatLng(t.lat,t.lng));var o=new Fr(Hn(Hn({},r),s?{position:s}:{}));N.current=document.createElement("div"),y(o),l&&_(google.maps.event.addListener(o,"closeclick",l)),u&&k(google.maps.event.addListener(o,"domready",u)),c&&x(google.maps.event.addListener(o,"content_changed",c)),h&&P(google.maps.event.addListener(o,"position_changed",h)),d&&D(google.maps.event.addListener(o,"zindex_changed",d)),o.setContent(N.current),n?o.open(g,n):o.getPosition()?o.open(g):Jn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),f&&f(o)}return function(){null!==v&&(b&&google.maps.event.removeListener(b),I&&google.maps.event.removeListener(I),S&&google.maps.event.removeListener(S),L&&google.maps.event.removeListener(L),A&&google.maps.event.removeListener(A),p&&p(v),v.close())}}),[]),N.current?(0,o.createPortal)(r.Children.only(t),N.current):null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=null,t.state={infoBox:null},t.open=function(e,n){n?null!==t.context&&e.open(t.context,n):e.getPosition()?null!==t.context&&e.open(t.context):Jn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},t.setInfoBoxCallback=function(){null!==t.state.infoBox&&null!==t.containerElement&&(t.state.infoBox.setContent(t.containerElement),t.open(t.state.infoBox,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoBox))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e,t=this.props.options||{},n=t.position,r=Qn(t,["position"]);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var i=new Fr(Hn(Hn({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=sr({updaterMap:zr,eventMap:Vr,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)},t.prototype.componentDidUpdate=function(e){var t=this.state.infoBox;null!==t&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:zr,eventMap:Vr,prevProps:e,nextProps:this.props,instance:t}))},t.prototype.componentWillUnmount=function(){var e=this.props.onUnmount,t=this.state.infoBox;null!==t&&(e&&e(t),ir(this.registeredEvents),t.close())},t.prototype.render=function(){return this.containerElement?(0,o.createPortal)(r.Children.only(this.props.children),this.containerElement):null},t.contextType=er}(r.PureComponent);var jr=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;0!==i--;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},qr=Zn(jr);const Wr=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Kr{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));const i=Wr[15&n];if(!i)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new Kr(o,s,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=Wr.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-o%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+o+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Gr(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],l=[];for(;a.length;){const u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=o){for(let o=h;o<=c;o++){const a=s[2*o],u=s[2*o+1];a>=e&&a<=n&&u>=t&&u<=r&&l.push(i[o])}continue}const d=h+c>>1,f=s[2*d],p=s[2*d+1];f>=e&&f<=n&&p>=t&&p<=r&&l.push(i[d]),(0===u?e<=f:t<=p)&&(a.push(h),a.push(d-1),a.push(1-u)),(0===u?n>=f:r>=p)&&(a.push(d+1),a.push(c),a.push(1-u))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:s}=this,o=[0,r.length-1,0],a=[],l=n*n;for(;o.length;){const u=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=s){for(let n=h;n<=c;n++)Xr(i[2*n],i[2*n+1],e,t)<=l&&a.push(r[n]);continue}const d=h+c>>1,f=i[2*d],p=i[2*d+1];Xr(f,p,e,t)<=l&&a.push(r[d]),(0===u?e-n<=f:t-n<=p)&&(o.push(h),o.push(d-1),o.push(1-u)),(0===u?e+n>=f:t+n>=p)&&(o.push(d+1),o.push(c),o.push(1-u))}return a}}function Gr(e,t,n,r,i,s){if(i-r<=n)return;const o=r+i>>1;Hr(e,t,o,r,i,s),Gr(e,t,n,r,o-1,1-s),Gr(e,t,n,o+1,i,1-s)}function Hr(e,t,n,r,i,s){for(;i>r;){if(i-r>600){const o=i-r+1,a=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(a-o/2<0?-1:1);Hr(e,t,n,Math.max(r,Math.floor(n-a*u/o+c)),Math.min(i,Math.floor(n+(o-a)*u/o+c)),s)}const o=t[2*n+s];let a=r,l=i;for(Qr(e,t,r,n),t[2*i+s]>o&&Qr(e,t,r,i);a<l;){for(Qr(e,t,a,l),a++,l--;t[2*a+s]<o;)a++;for(;t[2*l+s]>o;)l--}t[2*r+s]===o?Qr(e,t,r,l):(l++,Qr(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function Qr(e,t,n,r){Yr(e,n,r),Yr(t,2*n,2*r),Yr(t,2*n+1,2*r+1)}function Yr(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Xr(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}const Zr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},$r=Math.fround||(Jr=new Float32Array(1),e=>(Jr[0]=+e,Jr[0]));var Jr;const ei=3,ti=5,ni=6;class ri{constructor(e){this.options=Object.assign(Object.create(Zr),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i="prepare ".concat(e.length," points");t&&console.time(i),this.points=e;const s=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=$r(oi(n)),o=$r(ai(r));s.push(i,o,1/0,a,-1,1),this.options.reduce&&s.push(0)}let o=this.trees[r+1]=this._createTree(s);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const e=+Date.now();o=this.trees[a]=this._createTree(this._cluster(o,a)),t&&console.log("z%d: %d clusters in %dms",a,o.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,s],t),o=this.getClusters([-180,r,i,s],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],a=o.range(oi(n),ai(s),oi(i),ai(r)),l=o.data,u=[];for(const c of a){const e=this.stride*c;u.push(l[e+ti]>1?ii(l,e,this.clusterProps):this.points[l[e+ei]])}return u}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const s=i.data;if(t*this.stride>=s.length)throw new Error(r);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=s[t*this.stride],l=s[t*this.stride+1],u=i.within(a,l,o),c=[];for(const h of u){const t=h*this.stride;s[t+4]===e&&c.push(s[t+ti]>1?ii(s,t,this.clusterProps):this.points[s[t+ei]])}if(0===c.length)throw new Error(r);return c}getLeaves(e,t,n){t=t||10,n=n||0;const r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:s,radius:o}=this.options,a=o/s,l=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((t-a)/i,l,(t+1+a)/i,u),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-a/i,l,1,u),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,a/i,u),r.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const s=this.getChildren(t);for(const o of s){const t=o.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(o),e.length===n)break}return i}_createTree(e){const t=new Kr(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,s){for(const o of e){const e=o*this.stride,a=t[e+ti]>1;let l,u,c;if(a)l=si(t,e,this.clusterProps),u=t[e],c=t[e+1];else{const n=this.points[t[e+ei]];l=n.properties;const[r,i]=n.geometry.coordinates;u=oi(r),c=ai(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(u*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:l};let d;d=a||this.options.generateId?t[e+ei]:this.points[t[e+ei]].id,void 0!==d&&(h.id=d),s.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:s}=this.options,o=n/(r*Math.pow(2,t)),a=e.data,l=[],u=this.stride;for(let c=0;c<a.length;c+=u){if(a[c+2]<=t)continue;a[c+2]=t;const n=a[c],r=a[c+1],h=e.within(a[c],a[c+1],o),d=a[c+ti];let f=d;for(const e of h){const n=e*u;a[n+2]>t&&(f+=a[n+ti])}if(f>d&&f>=s){let e,s=n*d,o=r*d,p=-1;const g=((c/u|0)<<5)+(t+1)+this.points.length;for(const n of h){const r=n*u;if(a[r+2]<=t)continue;a[r+2]=t;const l=a[r+ti];s+=a[r]*l,o+=a[r+1]*l,a[r+4]=g,i&&(e||(e=this._map(a,c,!0),p=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,r)))}a[c+4]=g,l.push(s/f,o/f,1/0,g,-1,f),i&&l.push(p)}else{for(let e=0;e<u;e++)l.push(a[c+e]);if(f>1)for(const e of h){const n=e*u;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<u;e++)l.push(a[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+ti]>1){const r=this.clusterProps[e[t+ni]];return n?Object.assign({},r):r}const r=this.points[e[t+ei]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function ii(e,t,n){return{type:"Feature",id:e[t+ei],properties:si(e,t,n),geometry:{type:"Point",coordinates:[li(e[t]),ui(e[t+1])]}}}function si(e,t,n){const r=e[t+ti],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,s=e[t+ni],o=-1===s?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:e[t+ei],point_count:r,point_count_abbreviated:i})}function oi(e){return e/360+.5}function ai(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function li(e){return 360*(e-.5)}function ui(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function ci(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}class hi{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class di{constructor(e){let{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(hi.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>hi.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(hi.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class fi{constructor(e){let{maxZoom:t=16}=e;this.maxZoom=t}noop(e){let{markers:t}=e;return pi(t)}}const pi=e=>e.map((e=>new di({position:hi.getPosition(e),markers:[e]})));class gi extends fi{constructor(e){var{maxZoom:t,radius:n=60}=e,r=ci(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new ri(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!qr(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const n=this.markers.map((e=>{const t=hi.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!qr(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){let{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){let{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new di({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});const i=r.marker;return new di({markers:[i],position:hi.getPosition(i)})}}class mi{constructor(e,t){this.markers={sum:e.length};const n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class vi{render(e,t,n){let{count:r,position:i}=e;const s=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(s,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),a="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(hi.isAdvancedMarkerAvailable(n)){const e=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const t={map:n,position:i,zIndex:l,title:a,content:e};return new google.maps.marker.AdvancedMarkerElement(t)}const u={position:i,zIndex:l,title:a,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class yi{constructor(){!function(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}(yi,google.maps.OverlayView)}}var wi;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(wi||(wi={}));const bi=(e,t,n)=>{n.fitBounds(t.bounds)};class _i extends yi{constructor(e){let{map:t,markers:n=[],algorithmOptions:r={},algorithm:i=new gi(r),renderer:s=new vi,onClusterClick:o=bi}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=s,this.onClusterClick=o,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return-1!==n&&(hi.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,wi.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){const e=new Set;for(const r of t)1==r.markers.length&&e.add(r.markers[0]);const n=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||hi.setMap(t.marker,null):n.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>n.forEach((e=>hi.setMap(e,null)))))}google.maps.event.trigger(this,wi.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>hi.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new mi(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>hi.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,wi.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),hi.setMap(n.marker,t)}))}}function Ei(e){var t=function(){Jn(!!r.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,r.useContext)(er);return Jn(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),n=(0,r.useState)(null),i=n[0],s=n[1];return(0,r.useEffect)((function(){if(t&&null===i){var n=new _i(Hn(Hn({},e),{map:t}));s(n)}}),[t]),i}(0,r.memo)((function(e){var t=e.children,n=Ei(e.options);return null!==n?t(n):null}));var Si={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},ki={options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},zIndex:function(e,t){e.setZIndex(t)}};(0,r.memo)((function(e){var t=e.children,n=e.anchor,i=e.options,s=e.position,a=e.zIndex,l=e.onCloseClick,u=e.onDomReady,c=e.onContentChanged,h=e.onPositionChanged,d=e.onZindexChanged,f=e.onLoad,p=e.onUnmount,g=(0,r.useContext)(er),m=(0,r.useState)(null),v=m[0],y=m[1],w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],M=(0,r.useState)(null),A=M[0],D=M[1],N=(0,r.useRef)(null);return(0,r.useEffect)((function(){null!==v&&(v.close(),n?v.open(g,n):v.getPosition()&&v.open(g))}),[g,v,n]),(0,r.useEffect)((function(){i&&null!==v&&v.setOptions(i)}),[v,i]),(0,r.useEffect)((function(){s&&null!==v&&v.setPosition(s)}),[s]),(0,r.useEffect)((function(){"number"===typeof a&&null!==v&&v.setZIndex(a)}),[a]),(0,r.useEffect)((function(){v&&l&&(null!==b&&google.maps.event.removeListener(b),_(google.maps.event.addListener(v,"closeclick",l)))}),[l]),(0,r.useEffect)((function(){v&&u&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(v,"domready",u)))}),[u]),(0,r.useEffect)((function(){v&&c&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(v,"content_changed",c)))}),[c]),(0,r.useEffect)((function(){v&&h&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(v,"position_changed",h)))}),[h]),(0,r.useEffect)((function(){v&&d&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(v,"zindex_changed",d)))}),[d]),(0,r.useEffect)((function(){var e=new google.maps.InfoWindow(Hn({},i||{}));return y(e),N.current=document.createElement("div"),l&&_(google.maps.event.addListener(e,"closeclick",l)),u&&k(google.maps.event.addListener(e,"domready",u)),c&&x(google.maps.event.addListener(e,"content_changed",c)),h&&P(google.maps.event.addListener(e,"position_changed",h)),d&&D(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(N.current),s&&e.setPosition(s),a&&e.setZIndex(a),n?e.open(g,n):e.getPosition()?e.open(g):Jn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),f&&f(e),function(){b&&google.maps.event.removeListener(b),I&&google.maps.event.removeListener(I),S&&google.maps.event.removeListener(S),L&&google.maps.event.removeListener(L),A&&google.maps.event.removeListener(A),p&&p(e),e.close()}}),[]),N.current?(0,o.createPortal)(r.Children.only(t),N.current):null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=null,t.state={infoWindow:null},t.open=function(e,n){n?e.open(t.context,n):e.getPosition()?e.open(t.context):Jn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},t.setInfoWindowCallback=function(){null!==t.state.infoWindow&&null!==t.containerElement&&(t.state.infoWindow.setContent(t.containerElement),t.open(t.state.infoWindow,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoWindow))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.InfoWindow(Hn({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=sr({updaterMap:ki,eventMap:Si,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{infoWindow:e}}),this.setInfoWindowCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.infoWindow&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:ki,eventMap:Si,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))},t.prototype.componentWillUnmount=function(){null!==this.state.infoWindow&&(ir(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())},t.prototype.render=function(){return this.containerElement?(0,o.createPortal)(r.Children.only(this.props.children),this.containerElement):null},t.contextType=er}(r.PureComponent);var Ci={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Ii={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},visible:function(e,t){e.setVisible(t)}},xi={};(0,r.memo)((function(e){var t=e.options,n=e.draggable,i=e.editable,s=e.visible,o=e.path,a=e.onDblClick,l=e.onDragEnd,u=e.onDragStart,c=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,f=e.onMouseOver,p=e.onMouseUp,g=e.onRightClick,m=e.onClick,v=e.onDrag,y=e.onLoad,w=e.onUnmount,b=(0,r.useContext)(er),_=(0,r.useState)(null),E=_[0],S=_[1],k=(0,r.useState)(null),C=k[0],I=k[1],x=(0,r.useState)(null),T=x[0],L=x[1],P=(0,r.useState)(null),M=P[0],A=P[1],D=(0,r.useState)(null),N=D[0],O=D[1],R=(0,r.useState)(null),U=R[0],F=R[1],V=(0,r.useState)(null),z=V[0],B=V[1],j=(0,r.useState)(null),q=j[0],W=j[1],K=(0,r.useState)(null),G=K[0],H=K[1],Q=(0,r.useState)(null),Y=Q[0],X=Q[1],Z=(0,r.useState)(null),$=Z[0],J=Z[1],ee=(0,r.useState)(null),te=ee[0],ne=ee[1];return(0,r.useEffect)((function(){null!==E&&E.setMap(b)}),[b]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==E&&E.setOptions(t)}),[E,t]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==E&&E.setDraggable(n)}),[E,n]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==E&&E.setEditable(i)}),[E,i]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==E&&E.setVisible(s)}),[E,s]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==E&&E.setPath(o)}),[E,o]),(0,r.useEffect)((function(){E&&a&&(null!==C&&google.maps.event.removeListener(C),I(google.maps.event.addListener(E,"dblclick",a)))}),[a]),(0,r.useEffect)((function(){E&&l&&(null!==T&&google.maps.event.removeListener(T),L(google.maps.event.addListener(E,"dragend",l)))}),[l]),(0,r.useEffect)((function(){E&&u&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(E,"dragstart",u)))}),[u]),(0,r.useEffect)((function(){E&&c&&(null!==N&&google.maps.event.removeListener(N),O(google.maps.event.addListener(E,"mousedown",c)))}),[c]),(0,r.useEffect)((function(){E&&h&&(null!==U&&google.maps.event.removeListener(U),F(google.maps.event.addListener(E,"mousemove",h)))}),[h]),(0,r.useEffect)((function(){E&&d&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(E,"mouseout",d)))}),[d]),(0,r.useEffect)((function(){E&&f&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(E,"mouseover",f)))}),[f]),(0,r.useEffect)((function(){E&&p&&(null!==G&&google.maps.event.removeListener(G),H(google.maps.event.addListener(E,"mouseup",p)))}),[p]),(0,r.useEffect)((function(){E&&g&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(E,"rightclick",g)))}),[g]),(0,r.useEffect)((function(){E&&m&&(null!==$&&google.maps.event.removeListener($),J(google.maps.event.addListener(E,"click",m)))}),[m]),(0,r.useEffect)((function(){E&&v&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(E,"drag",v)))}),[v]),(0,r.useEffect)((function(){var e=new google.maps.Polyline(Hn(Hn({},t||xi),{map:b}));return o&&e.setPath(o),"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),a&&I(google.maps.event.addListener(e,"dblclick",a)),l&&L(google.maps.event.addListener(e,"dragend",l)),u&&A(google.maps.event.addListener(e,"dragstart",u)),c&&O(google.maps.event.addListener(e,"mousedown",c)),h&&F(google.maps.event.addListener(e,"mousemove",h)),d&&B(google.maps.event.addListener(e,"mouseout",d)),f&&W(google.maps.event.addListener(e,"mouseover",f)),p&&H(google.maps.event.addListener(e,"mouseup",p)),g&&X(google.maps.event.addListener(e,"rightclick",g)),m&&J(google.maps.event.addListener(e,"click",m)),v&&ne(google.maps.event.addListener(e,"drag",v)),S(e),y&&y(e),function(){null!==C&&google.maps.event.removeListener(C),null!==T&&google.maps.event.removeListener(T),null!==M&&google.maps.event.removeListener(M),null!==N&&google.maps.event.removeListener(N),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==$&&google.maps.event.removeListener($),w&&w(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={polyline:null},t.setPolylineCallback=function(){null!==t.state.polyline&&t.props.onLoad&&t.props.onLoad(t.state.polyline)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Polyline(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:Ii,eventMap:Ci,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.polyline&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Ii,eventMap:Ci,prevProps:e,nextProps:this.props,instance:this.state.polyline}))},t.prototype.componentWillUnmount=function(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ir(this.registeredEvents),this.state.polyline.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Ti={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Li={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},paths:function(e,t){e.setPaths(t)},visible:function(e,t){e.setVisible(t)}};(0,r.memo)((function(e){var t=e.options,n=e.draggable,i=e.editable,s=e.visible,o=e.path,a=e.paths,l=e.onDblClick,u=e.onDragEnd,c=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,f=e.onMouseOut,p=e.onMouseOver,g=e.onMouseUp,m=e.onRightClick,v=e.onClick,y=e.onDrag,w=e.onLoad,b=e.onUnmount,_=e.onEdit,E=(0,r.useContext)(er),S=(0,r.useState)(null),k=S[0],C=S[1],I=(0,r.useState)(null),x=I[0],T=I[1],L=(0,r.useState)(null),P=L[0],M=L[1],A=(0,r.useState)(null),D=A[0],N=A[1],O=(0,r.useState)(null),R=O[0],U=O[1],F=(0,r.useState)(null),V=F[0],z=F[1],B=(0,r.useState)(null),j=B[0],q=B[1],W=(0,r.useState)(null),K=W[0],G=W[1],H=(0,r.useState)(null),Q=H[0],Y=H[1],X=(0,r.useState)(null),Z=X[0],$=X[1],J=(0,r.useState)(null),ee=J[0],te=J[1],ne=(0,r.useState)(null),re=ne[0],ie=ne[1];return(0,r.useEffect)((function(){null!==k&&k.setMap(E)}),[E]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==k&&k.setOptions(t)}),[k,t]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==k&&k.setDraggable(n)}),[k,n]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==k&&k.setEditable(i)}),[k,i]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==k&&k.setVisible(s)}),[k,s]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==k&&k.setPath(o)}),[k,o]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==k&&k.setPaths(a)}),[k,a]),(0,r.useEffect)((function(){k&&l&&(null!==x&&google.maps.event.removeListener(x),T(google.maps.event.addListener(k,"dblclick",l)))}),[l]),(0,r.useEffect)((function(){k&&(google.maps.event.addListener(k.getPath(),"insert_at",(function(){null===_||void 0===_||_(k)})),google.maps.event.addListener(k.getPath(),"set_at",(function(){null===_||void 0===_||_(k)})))}),[k,_]),(0,r.useEffect)((function(){k&&u&&(null!==P&&google.maps.event.removeListener(P),M(google.maps.event.addListener(k,"dragend",u)))}),[u]),(0,r.useEffect)((function(){k&&c&&(null!==D&&google.maps.event.removeListener(D),N(google.maps.event.addListener(k,"dragstart",c)))}),[c]),(0,r.useEffect)((function(){k&&h&&(null!==R&&google.maps.event.removeListener(R),U(google.maps.event.addListener(k,"mousedown",h)))}),[h]),(0,r.useEffect)((function(){k&&d&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(k,"mousemove",d)))}),[d]),(0,r.useEffect)((function(){k&&f&&(null!==j&&google.maps.event.removeListener(j),q(google.maps.event.addListener(k,"mouseout",f)))}),[f]),(0,r.useEffect)((function(){k&&p&&(null!==K&&google.maps.event.removeListener(K),G(google.maps.event.addListener(k,"mouseover",p)))}),[p]),(0,r.useEffect)((function(){k&&g&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(k,"mouseup",g)))}),[g]),(0,r.useEffect)((function(){k&&m&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(k,"rightclick",m)))}),[m]),(0,r.useEffect)((function(){k&&v&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(k,"click",v)))}),[v]),(0,r.useEffect)((function(){k&&y&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(k,"drag",y)))}),[y]),(0,r.useEffect)((function(){var e=new google.maps.Polygon(Hn(Hn({},t||{}),{map:E}));return o&&e.setPath(o),a&&e.setPaths(a),"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof n&&e.setDraggable(n),l&&T(google.maps.event.addListener(e,"dblclick",l)),u&&M(google.maps.event.addListener(e,"dragend",u)),c&&N(google.maps.event.addListener(e,"dragstart",c)),h&&U(google.maps.event.addListener(e,"mousedown",h)),d&&z(google.maps.event.addListener(e,"mousemove",d)),f&&q(google.maps.event.addListener(e,"mouseout",f)),p&&G(google.maps.event.addListener(e,"mouseover",p)),g&&Y(google.maps.event.addListener(e,"mouseup",g)),m&&$(google.maps.event.addListener(e,"rightclick",m)),v&&te(google.maps.event.addListener(e,"click",v)),y&&ie(google.maps.event.addListener(e,"drag",y)),C(e),w&&w(e),function(){null!==x&&google.maps.event.removeListener(x),null!==P&&google.maps.event.removeListener(P),null!==D&&google.maps.event.removeListener(D),null!==R&&google.maps.event.removeListener(R),null!==V&&google.maps.event.removeListener(V),null!==j&&google.maps.event.removeListener(j),null!==K&&google.maps.event.removeListener(K),null!==Q&&google.maps.event.removeListener(Q),null!==Z&&google.maps.event.removeListener(Z),null!==ee&&google.maps.event.removeListener(ee),b&&b(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={polygon:null},t.setPolygonCallback=function(){null!==t.state.polygon&&t.props.onLoad&&t.props.onLoad(t.state.polygon)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Polygon(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:Li,eventMap:Ti,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polygon:e}}),this.setPolygonCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.polygon&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Li,eventMap:Ti,prevProps:e,nextProps:this.props,instance:this.state.polygon}))},t.prototype.componentWillUnmount=function(){null!==this.state.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),ir(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Pi={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Mi={bounds:function(e,t){e.setBounds(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},visible:function(e,t){e.setVisible(t)}};(0,r.memo)((function(e){var t=e.options,n=e.bounds,i=e.draggable,s=e.editable,o=e.visible,a=e.onDblClick,l=e.onDragEnd,u=e.onDragStart,c=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,f=e.onMouseOver,p=e.onMouseUp,g=e.onRightClick,m=e.onClick,v=e.onDrag,y=e.onBoundsChanged,w=e.onLoad,b=e.onUnmount,_=(0,r.useContext)(er),E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],M=(0,r.useState)(null),A=M[0],D=M[1],N=(0,r.useState)(null),O=N[0],R=N[1],U=(0,r.useState)(null),F=U[0],V=U[1],z=(0,r.useState)(null),B=z[0],j=z[1],q=(0,r.useState)(null),W=q[0],K=q[1],G=(0,r.useState)(null),H=G[0],Q=G[1],Y=(0,r.useState)(null),X=Y[0],Z=Y[1],$=(0,r.useState)(null),J=$[0],ee=$[1],te=(0,r.useState)(null),ne=te[0],re=te[1],ie=(0,r.useState)(null),se=ie[0],oe=ie[1];return(0,r.useEffect)((function(){null!==S&&S.setMap(_)}),[_]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==S&&S.setOptions(t)}),[S,t]),(0,r.useEffect)((function(){"undefined"!==typeof i&&null!==S&&S.setDraggable(i)}),[S,i]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==S&&S.setEditable(s)}),[S,s]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==S&&S.setVisible(o)}),[S,o]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==S&&S.setBounds(n)}),[S,n]),(0,r.useEffect)((function(){S&&a&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(S,"dblclick",a)))}),[a]),(0,r.useEffect)((function(){S&&l&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(S,"dragend",l)))}),[l]),(0,r.useEffect)((function(){S&&u&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(S,"dragstart",u)))}),[u]),(0,r.useEffect)((function(){S&&c&&(null!==O&&google.maps.event.removeListener(O),R(google.maps.event.addListener(S,"mousedown",c)))}),[c]),(0,r.useEffect)((function(){S&&h&&(null!==F&&google.maps.event.removeListener(F),V(google.maps.event.addListener(S,"mousemove",h)))}),[h]),(0,r.useEffect)((function(){S&&d&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(S,"mouseout",d)))}),[d]),(0,r.useEffect)((function(){S&&f&&(null!==W&&google.maps.event.removeListener(W),K(google.maps.event.addListener(S,"mouseover",f)))}),[f]),(0,r.useEffect)((function(){S&&p&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(S,"mouseup",p)))}),[p]),(0,r.useEffect)((function(){S&&g&&(null!==X&&google.maps.event.removeListener(X),Z(google.maps.event.addListener(S,"rightclick",g)))}),[g]),(0,r.useEffect)((function(){S&&m&&(null!==J&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(S,"click",m)))}),[m]),(0,r.useEffect)((function(){S&&v&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(S,"drag",v)))}),[v]),(0,r.useEffect)((function(){S&&y&&(null!==se&&google.maps.event.removeListener(se),oe(google.maps.event.addListener(S,"bounds_changed",y)))}),[y]),(0,r.useEffect)((function(){var e=new google.maps.Rectangle(Hn(Hn({},t||{}),{map:_}));return"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof i&&e.setDraggable(i),"undefined"!==typeof n&&e.setBounds(n),a&&x(google.maps.event.addListener(e,"dblclick",a)),l&&P(google.maps.event.addListener(e,"dragend",l)),u&&D(google.maps.event.addListener(e,"dragstart",u)),c&&R(google.maps.event.addListener(e,"mousedown",c)),h&&V(google.maps.event.addListener(e,"mousemove",h)),d&&j(google.maps.event.addListener(e,"mouseout",d)),f&&K(google.maps.event.addListener(e,"mouseover",f)),p&&Q(google.maps.event.addListener(e,"mouseup",p)),g&&Z(google.maps.event.addListener(e,"rightclick",g)),m&&ee(google.maps.event.addListener(e,"click",m)),v&&re(google.maps.event.addListener(e,"drag",v)),y&&oe(google.maps.event.addListener(e,"bounds_changed",y)),k(e),w&&w(e),function(){null!==I&&google.maps.event.removeListener(I),null!==L&&google.maps.event.removeListener(L),null!==A&&google.maps.event.removeListener(A),null!==O&&google.maps.event.removeListener(O),null!==F&&google.maps.event.removeListener(F),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==H&&google.maps.event.removeListener(H),null!==X&&google.maps.event.removeListener(X),null!==J&&google.maps.event.removeListener(J),null!==ne&&google.maps.event.removeListener(ne),null!==se&&google.maps.event.removeListener(se),b&&b(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={rectangle:null},t.setRectangleCallback=function(){null!==t.state.rectangle&&t.props.onLoad&&t.props.onLoad(t.state.rectangle)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Rectangle(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:Mi,eventMap:Pi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.rectangle&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Mi,eventMap:Pi,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))},t.prototype.componentWillUnmount=function(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ir(this.registeredEvents),this.state.rectangle.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Ai={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Di={center:function(e,t){e.setCenter(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},radius:function(e,t){e.setRadius(t)},visible:function(e,t){e.setVisible(t)}},Ni={};(0,r.memo)((function(e){var t=e.options,n=e.center,i=e.radius,s=e.draggable,o=e.editable,a=e.visible,l=e.onDblClick,u=e.onDragEnd,c=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,f=e.onMouseOut,p=e.onMouseOver,g=e.onMouseUp,m=e.onRightClick,v=e.onClick,y=e.onDrag,w=e.onCenterChanged,b=e.onRadiusChanged,_=e.onLoad,E=e.onUnmount,S=(0,r.useContext)(er),k=(0,r.useState)(null),C=k[0],I=k[1],x=(0,r.useState)(null),T=x[0],L=x[1],P=(0,r.useState)(null),M=P[0],A=P[1],D=(0,r.useState)(null),N=D[0],O=D[1],R=(0,r.useState)(null),U=R[0],F=R[1],V=(0,r.useState)(null),z=V[0],B=V[1],j=(0,r.useState)(null),q=j[0],W=j[1],K=(0,r.useState)(null),G=K[0],H=K[1],Q=(0,r.useState)(null),Y=Q[0],X=Q[1],Z=(0,r.useState)(null),$=Z[0],J=Z[1],ee=(0,r.useState)(null),te=ee[0],ne=ee[1],re=(0,r.useState)(null),ie=re[0],se=re[1],oe=(0,r.useState)(null),ae=oe[0],le=oe[1],ue=(0,r.useState)(null),ce=ue[0],he=ue[1];return(0,r.useEffect)((function(){null!==C&&C.setMap(S)}),[S]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==C&&C.setOptions(t)}),[C,t]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==C&&C.setDraggable(s)}),[C,s]),(0,r.useEffect)((function(){"undefined"!==typeof o&&null!==C&&C.setEditable(o)}),[C,o]),(0,r.useEffect)((function(){"undefined"!==typeof a&&null!==C&&C.setVisible(a)}),[C,a]),(0,r.useEffect)((function(){"number"===typeof i&&null!==C&&C.setRadius(i)}),[C,i]),(0,r.useEffect)((function(){"undefined"!==typeof n&&null!==C&&C.setCenter(n)}),[C,n]),(0,r.useEffect)((function(){C&&l&&(null!==T&&google.maps.event.removeListener(T),L(google.maps.event.addListener(C,"dblclick",l)))}),[l]),(0,r.useEffect)((function(){C&&u&&(null!==M&&google.maps.event.removeListener(M),A(google.maps.event.addListener(C,"dragend",u)))}),[u]),(0,r.useEffect)((function(){C&&c&&(null!==N&&google.maps.event.removeListener(N),O(google.maps.event.addListener(C,"dragstart",c)))}),[c]),(0,r.useEffect)((function(){C&&h&&(null!==U&&google.maps.event.removeListener(U),F(google.maps.event.addListener(C,"mousedown",h)))}),[h]),(0,r.useEffect)((function(){C&&d&&(null!==z&&google.maps.event.removeListener(z),B(google.maps.event.addListener(C,"mousemove",d)))}),[d]),(0,r.useEffect)((function(){C&&f&&(null!==q&&google.maps.event.removeListener(q),W(google.maps.event.addListener(C,"mouseout",f)))}),[f]),(0,r.useEffect)((function(){C&&p&&(null!==G&&google.maps.event.removeListener(G),H(google.maps.event.addListener(C,"mouseover",p)))}),[p]),(0,r.useEffect)((function(){C&&g&&(null!==Y&&google.maps.event.removeListener(Y),X(google.maps.event.addListener(C,"mouseup",g)))}),[g]),(0,r.useEffect)((function(){C&&m&&(null!==$&&google.maps.event.removeListener($),J(google.maps.event.addListener(C,"rightclick",m)))}),[m]),(0,r.useEffect)((function(){C&&v&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(C,"click",v)))}),[v]),(0,r.useEffect)((function(){C&&y&&(null!==ie&&google.maps.event.removeListener(ie),se(google.maps.event.addListener(C,"drag",y)))}),[y]),(0,r.useEffect)((function(){C&&w&&(null!==ae&&google.maps.event.removeListener(ae),le(google.maps.event.addListener(C,"center_changed",w)))}),[v]),(0,r.useEffect)((function(){C&&b&&(null!==ce&&google.maps.event.removeListener(ce),he(google.maps.event.addListener(C,"radius_changed",b)))}),[b]),(0,r.useEffect)((function(){var e=new google.maps.Circle(Hn(Hn({},t||Ni),{map:S}));return"number"===typeof i&&e.setRadius(i),"undefined"!==typeof n&&e.setCenter(n),"number"===typeof i&&e.setRadius(i),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof o&&e.setEditable(o),"undefined"!==typeof s&&e.setDraggable(s),l&&L(google.maps.event.addListener(e,"dblclick",l)),u&&A(google.maps.event.addListener(e,"dragend",u)),c&&O(google.maps.event.addListener(e,"dragstart",c)),h&&F(google.maps.event.addListener(e,"mousedown",h)),d&&B(google.maps.event.addListener(e,"mousemove",d)),f&&W(google.maps.event.addListener(e,"mouseout",f)),p&&H(google.maps.event.addListener(e,"mouseover",p)),g&&X(google.maps.event.addListener(e,"mouseup",g)),m&&J(google.maps.event.addListener(e,"rightclick",m)),v&&ne(google.maps.event.addListener(e,"click",v)),y&&se(google.maps.event.addListener(e,"drag",y)),w&&le(google.maps.event.addListener(e,"center_changed",w)),b&&he(google.maps.event.addListener(e,"radius_changed",b)),I(e),_&&_(e),function(){null!==T&&google.maps.event.removeListener(T),null!==M&&google.maps.event.removeListener(M),null!==N&&google.maps.event.removeListener(N),null!==U&&google.maps.event.removeListener(U),null!==z&&google.maps.event.removeListener(z),null!==q&&google.maps.event.removeListener(q),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==$&&google.maps.event.removeListener($),null!==te&&google.maps.event.removeListener(te),null!==ae&&google.maps.event.removeListener(ae),null!==ce&&google.maps.event.removeListener(ce),E&&E(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={circle:null},t.setCircleCallback=function(){null!==t.state.circle&&t.props.onLoad&&t.props.onLoad(t.state.circle)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Circle(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:Di,eventMap:Ai,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.circle&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Di,eventMap:Ai,prevProps:e,nextProps:this.props,instance:this.state.circle}))},t.prototype.componentWillUnmount=function(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ir(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Oi={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},Ri={add:function(e,t){e.add(t)},addgeojson:function(e,t,n){e.addGeoJson(t,n)},contains:function(e,t){e.contains(t)},foreach:function(e,t){e.forEach(t)},loadgeojson:function(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle:function(e,t,n){e.overrideStyle(t,n)},remove:function(e,t){e.remove(t)},revertstyle:function(e,t){e.revertStyle(t)},controlposition:function(e,t){e.setControlPosition(t)},controls:function(e,t){e.setControls(t)},drawingmode:function(e,t){e.setDrawingMode(t)},map:function(e,t){e.setMap(t)},style:function(e,t){e.setStyle(t)},togeojson:function(e,t){e.toGeoJson(t)}};(0,r.memo)((function(e){var t=e.options,n=e.onClick,i=e.onDblClick,s=e.onMouseDown,o=e.onMouseMove,a=e.onMouseOut,l=e.onMouseOver,u=e.onMouseUp,c=e.onRightClick,h=e.onAddFeature,d=e.onRemoveFeature,f=e.onRemoveProperty,p=e.onSetGeometry,g=e.onSetProperty,m=e.onLoad,v=e.onUnmount,y=(0,r.useContext)(er),w=(0,r.useState)(null),b=w[0],_=w[1],E=(0,r.useState)(null),S=E[0],k=E[1],C=(0,r.useState)(null),I=C[0],x=C[1],T=(0,r.useState)(null),L=T[0],P=T[1],M=(0,r.useState)(null),A=M[0],D=M[1],N=(0,r.useState)(null),O=N[0],R=N[1],U=(0,r.useState)(null),F=U[0],V=U[1],z=(0,r.useState)(null),B=z[0],j=z[1],q=(0,r.useState)(null),W=q[0],K=q[1],G=(0,r.useState)(null),H=G[0],Q=G[1],Y=(0,r.useState)(null),X=Y[0],Z=Y[1],$=(0,r.useState)(null),J=$[0],ee=$[1],te=(0,r.useState)(null),ne=te[0],re=te[1],ie=(0,r.useState)(null),se=ie[0],oe=ie[1];return(0,r.useEffect)((function(){null!==b&&b.setMap(y)}),[y]),(0,r.useEffect)((function(){b&&i&&(null!==S&&google.maps.event.removeListener(S),k(google.maps.event.addListener(b,"dblclick",i)))}),[i]),(0,r.useEffect)((function(){b&&s&&(null!==I&&google.maps.event.removeListener(I),x(google.maps.event.addListener(b,"mousedown",s)))}),[s]),(0,r.useEffect)((function(){b&&o&&(null!==L&&google.maps.event.removeListener(L),P(google.maps.event.addListener(b,"mousemove",o)))}),[o]),(0,r.useEffect)((function(){b&&a&&(null!==A&&google.maps.event.removeListener(A),D(google.maps.event.addListener(b,"mouseout",a)))}),[a]),(0,r.useEffect)((function(){b&&l&&(null!==O&&google.maps.event.removeListener(O),R(google.maps.event.addListener(b,"mouseover",l)))}),[l]),(0,r.useEffect)((function(){b&&u&&(null!==F&&google.maps.event.removeListener(F),V(google.maps.event.addListener(b,"mouseup",u)))}),[u]),(0,r.useEffect)((function(){b&&c&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(b,"rightclick",c)))}),[c]),(0,r.useEffect)((function(){b&&n&&(null!==W&&google.maps.event.removeListener(W),K(google.maps.event.addListener(b,"click",n)))}),[n]),(0,r.useEffect)((function(){b&&h&&(null!==H&&google.maps.event.removeListener(H),Q(google.maps.event.addListener(b,"addfeature",h)))}),[h]),(0,r.useEffect)((function(){b&&d&&(null!==X&&google.maps.event.removeListener(X),Z(google.maps.event.addListener(b,"removefeature",d)))}),[d]),(0,r.useEffect)((function(){b&&f&&(null!==J&&google.maps.event.removeListener(J),ee(google.maps.event.addListener(b,"removeproperty",f)))}),[f]),(0,r.useEffect)((function(){b&&p&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(b,"setgeometry",p)))}),[p]),(0,r.useEffect)((function(){b&&g&&(null!==se&&google.maps.event.removeListener(se),oe(google.maps.event.addListener(b,"setproperty",g)))}),[g]),(0,r.useEffect)((function(){if(null!==y){var e=new google.maps.Data(Hn(Hn({},t||{}),{map:y}));i&&k(google.maps.event.addListener(e,"dblclick",i)),s&&x(google.maps.event.addListener(e,"mousedown",s)),o&&P(google.maps.event.addListener(e,"mousemove",o)),a&&D(google.maps.event.addListener(e,"mouseout",a)),l&&R(google.maps.event.addListener(e,"mouseover",l)),u&&V(google.maps.event.addListener(e,"mouseup",u)),c&&j(google.maps.event.addListener(e,"rightclick",c)),n&&K(google.maps.event.addListener(e,"click",n)),h&&Q(google.maps.event.addListener(e,"addfeature",h)),d&&Z(google.maps.event.addListener(e,"removefeature",d)),f&&ee(google.maps.event.addListener(e,"removeproperty",f)),p&&re(google.maps.event.addListener(e,"setgeometry",p)),g&&oe(google.maps.event.addListener(e,"setproperty",g)),_(e),m&&m(e)}return function(){b&&(null!==S&&google.maps.event.removeListener(S),null!==I&&google.maps.event.removeListener(I),null!==L&&google.maps.event.removeListener(L),null!==A&&google.maps.event.removeListener(A),null!==O&&google.maps.event.removeListener(O),null!==F&&google.maps.event.removeListener(F),null!==B&&google.maps.event.removeListener(B),null!==W&&google.maps.event.removeListener(W),null!==H&&google.maps.event.removeListener(H),null!==X&&google.maps.event.removeListener(X),null!==J&&google.maps.event.removeListener(J),null!==ne&&google.maps.event.removeListener(ne),null!==se&&google.maps.event.removeListener(se),v&&v(b),b.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={data:null},t.setDataCallback=function(){null!==t.state.data&&t.props.onLoad&&t.props.onLoad(t.state.data)},t}Gn(t,e),t.prototype.componentDidMount=function(){if(null!==this.context){var e=new google.maps.Data(Hn(Hn({},this.props.options||{}),{map:this.context}));this.registeredEvents=sr({updaterMap:Ri,eventMap:Oi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{data:e}}),this.setDataCallback)}},t.prototype.componentDidUpdate=function(e){null!==this.state.data&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Ri,eventMap:Oi,prevProps:e,nextProps:this.props,instance:this.state.data}))},t.prototype.componentWillUnmount=function(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ir(this.registeredEvents),this.state.data&&this.state.data.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Ui={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},Fi={options:function(e,t){e.setOptions(t)},url:function(e,t){e.setUrl(t)},zIndex:function(e,t){e.setZIndex(t)}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={kmlLayer:null},t.setKmlLayerCallback=function(){null!==t.state.kmlLayer&&t.props.onLoad&&t.props.onLoad(t.state.kmlLayer)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.KmlLayer(Hn(Hn({},this.props.options),{map:this.context}));this.registeredEvents=sr({updaterMap:Fi,eventMap:Ui,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.kmlLayer&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Fi,eventMap:Ui,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))},t.prototype.componentWillUnmount=function(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ir(this.registeredEvents),this.state.kmlLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);function Vi(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function zi(e,t){return new t(e.lat,e.lng)}function Bi(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function ji(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),i=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-i.x-t.x,"px"),height:"".concat(i.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(i=n,s=google.maps.LatLngBounds,o=Bi,i instanceof s?i:o(i,s))):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var i=r.x,s=r.y;return{left:"".concat(i+t.x,"px"),top:"".concat(s+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,zi));var i,s,o}function qi(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function Wi(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}(0,r.memo)((function(e){var t=e.position,n=e.bounds,i=e.mapPaneName,s=e.zIndex,a=e.onLoad,l=e.onUnmount,u=e.getPixelPositionOffset,c=e.children,h=(0,r.useContext)(er),d=(0,r.useMemo)((function(){var e=document.createElement("div");return e.style.position="absolute",e}),[]),f=(0,r.useMemo)((function(){return function(e,t,n,r,i){var s=function(e){function t(t,n,r,i){var s=e.call(this)||this;return s.container=t,s.pane=n,s.position=r,s.bounds=i,s}return Gn(t,e),t.prototype.onAdd=function(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)},t.prototype.draw=function(){for(var e=ji(this.getProjection(),Hn({},this.container?Vi(this.container,i):{x:0,y:0}),this.bounds,this.position),t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],s=r[0],o=r[1];this.container.style[s]=o}},t.prototype.onRemove=function(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)},t}(google.maps.OverlayView);return new s(e,t,n,r)}(d,i,t,n,u)}),[d,i,t,n]);return(0,r.useEffect)((function(){return null===a||void 0===a||a(f),null===f||void 0===f||f.setMap(h),function(){null===l||void 0===l||l(f),null===f||void 0===f||f.setMap(null)}}),[h,f]),(0,r.useEffect)((function(){d.style.zIndex="".concat(s)}),[s,d]),o.createPortal(c,d)})),function(e){function t(t){var n=e.call(this,t)||this;n.state={paneEl:null,containerStyle:{position:"absolute"}},n.updatePane=function(){var e=n.props.mapPaneName,t=n.overlayView.getPanes();Jn(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?n.setState({paneEl:t[e]}):n.setState({paneEl:null})},n.onAdd=function(){var e,t;n.updatePane(),null===(t=(e=n.props).onLoad)||void 0===t||t.call(e,n.overlayView)},n.onPositionElement=function(){var e,t,r=ji(n.overlayView.getProjection(),Hn({x:0,y:0},n.containerRef.current?Vi(n.containerRef.current,n.props.getPixelPositionOffset):{}),n.props.bounds,n.props.position),i=n.state.containerStyle,s=i.left,o=i.top,a=i.width,l=i.height;t={left:s,top:o,width:a,height:l},((e=r).left!==t.left||e.top!==t.top||e.width!==t.height||e.height!==t.height)&&n.setState({containerStyle:{top:r.top||0,left:r.left||0,width:r.width||0,height:r.height||0,position:"absolute"}})},n.draw=function(){n.onPositionElement()},n.onRemove=function(){var e,t;n.setState((function(){return{paneEl:null}})),null===(t=(e=n.props).onUnmount)||void 0===t||t.call(e,n.overlayView)},n.containerRef=(0,r.createRef)();var i=new google.maps.OverlayView;return i.onAdd=n.onAdd,i.draw=n.draw,i.onRemove=n.onRemove,n.overlayView=i,n}Gn(t,e),t.prototype.componentDidMount=function(){this.overlayView.setMap(this.context)},t.prototype.componentDidUpdate=function(e){var t=qi(e.position),n=qi(this.props.position),r=Wi(e.bounds),i=Wi(this.props.bounds);t===n&&r===i||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()},t.prototype.componentWillUnmount=function(){this.overlayView.setMap(null)},t.prototype.render=function(){var e=this.state.paneEl;return e?o.createPortal((0,Wn.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:r.Children.only(this.props.children)}),e):null},t.FLOAT_PANE="floatPane",t.MAP_PANE="mapPane",t.MARKER_LAYER="markerLayer",t.OVERLAY_LAYER="overlayLayer",t.OVERLAY_MOUSE_TARGET="overlayMouseTarget",t.contextType=er}(r.PureComponent);function Ki(){}var Gi={onDblClick:"dblclick",onClick:"click"},Hi={opacity:function(e,t){e.setOpacity(t)}};(0,r.memo)((function(e){var t=e.url,n=e.bounds,i=e.options,s=e.visible,o=(0,r.useContext)(er),a=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),l=(0,r.useMemo)((function(){return new google.maps.GroundOverlay(t,a,Hn({},i))}),[]);return(0,r.useEffect)((function(){null!==l&&l.setMap(o)}),[o]),(0,r.useEffect)((function(){"undefined"!==typeof t&&null!==l&&(l.set("url",t),l.setMap(o))}),[l,t]),(0,r.useEffect)((function(){"undefined"!==typeof s&&null!==l&&l.setOpacity(s?1:0)}),[l,s]),(0,r.useEffect)((function(){var e=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));"undefined"!==typeof n&&null!==l&&(l.set("bounds",e),l.setMap(o))}),[l,n]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={groundOverlay:null},t.setGroundOverlayCallback=function(){null!==t.state.groundOverlay&&t.props.onLoad&&t.props.onLoad(t.state.groundOverlay)},t}Gn(t,e),t.prototype.componentDidMount=function(){Jn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Hn(Hn({},this.props.options),{map:this.context}));this.registeredEvents=sr({updaterMap:Hi,eventMap:Gi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.groundOverlay&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Hi,eventMap:Gi,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))},t.prototype.componentWillUnmount=function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))},t.prototype.render=function(){return null},t.defaultProps={onLoad:Ki},t.contextType=er}(r.PureComponent);var Qi={},Yi={data:function(e,t){e.setData(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)}};(0,r.memo)((function(e){var t=e.data,n=e.onLoad,i=e.onUnmount,s=e.options,o=(0,r.useContext)(er),a=(0,r.useState)(null),l=a[0],u=a[1];return(0,r.useEffect)((function(){google.maps.visualization||Jn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,r.useEffect)((function(){Jn(!!t,"data property is required in HeatmapLayer %s",t)}),[t]),(0,r.useEffect)((function(){null!==l&&l.setMap(o)}),[o]),(0,r.useEffect)((function(){s&&null!==l&&l.setOptions(s)}),[l,s]),(0,r.useEffect)((function(){var e=new google.maps.visualization.HeatmapLayer(Hn(Hn({},s||{}),{data:t,map:o}));return u(e),n&&n(e),function(){null!==l&&(i&&i(l),l.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={heatmapLayer:null},t.setHeatmapLayerCallback=function(){null!==t.state.heatmapLayer&&t.props.onLoad&&t.props.onLoad(t.state.heatmapLayer)},t}Gn(t,e),t.prototype.componentDidMount=function(){Jn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),Jn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Hn(Hn({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=sr({updaterMap:Yi,eventMap:Qi,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)},t.prototype.componentDidUpdate=function(e){ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Yi,eventMap:Qi,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})},t.prototype.componentWillUnmount=function(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ir(this.registeredEvents),this.state.heatmapLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent);var Xi={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Zi={register:function(e,t,n){e.registerPanoProvider(t,n)},links:function(e,t){e.setLinks(t)},motionTracking:function(e,t){e.setMotionTracking(t)},options:function(e,t){e.setOptions(t)},pano:function(e,t){e.setPano(t)},position:function(e,t){e.setPosition(t)},pov:function(e,t){e.setPov(t)},visible:function(e,t){e.setVisible(t)},zoom:function(e,t){e.setZoom(t)}},$i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={streetViewPanorama:null},t.setStreetViewPanoramaCallback=function(){null!==t.state.streetViewPanorama&&t.props.onLoad&&t.props.onLoad(t.state.streetViewPanorama)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e,t,n=null!==(t=null===(e=this.context)||void 0===e?void 0:e.getStreetView())&&void 0!==t?t:null;this.registeredEvents=sr({updaterMap:Zi,eventMap:Xi,prevProps:{},nextProps:this.props,instance:n}),this.setState((function(){return{streetViewPanorama:n}}),this.setStreetViewPanoramaCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.streetViewPanorama&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Zi,eventMap:Xi,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))},t.prototype.componentWillUnmount=function(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ir(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={streetViewService:null},t.setStreetViewServiceCallback=function(){null!==t.state.streetViewService&&t.props.onLoad&&t.props.onLoad(t.state.streetViewService)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)},t.prototype.render=function(){return null},t.contextType=er}(r.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={directionsService:null},t.setDirectionsServiceCallback=function(){null!==t.state.directionsService&&t.props.onLoad&&t.props.onLoad(t.state.directionsService)},t}Gn(t,e),t.prototype.componentDidMount=function(){Jn(!!this.props.options,"DirectionsService expected options object as parameter, but got %s",this.props.options);var e=new google.maps.DirectionsService;this.setState((function(){return{directionsService:e}}),this.setDirectionsServiceCallback)},t.prototype.componentDidUpdate=function(){null!==this.state.directionsService&&this.state.directionsService.route(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){null!==this.state.directionsService&&this.props.onUnmount&&this.props.onUnmount(this.state.directionsService)},t.prototype.render=function(){return null}}(r.PureComponent),{onDirectionsChanged:"directions_changed"}),Ji={directions:function(e,t){e.setDirections(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},panel:function(e,t){e.setPanel(t)},routeIndex:function(e,t){e.setRouteIndex(t)}},es=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={directionsRenderer:null},t.setDirectionsRendererCallback=function(){null!==t.state.directionsRenderer&&(t.state.directionsRenderer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.directionsRenderer))},t}Gn(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=sr({updaterMap:Ji,eventMap:$i,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.directionsRenderer&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:Ji,eventMap:$i,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))},t.prototype.componentWillUnmount=function(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ir(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))},t.prototype.render=function(){return(0,Wn.jsx)(Wn.Fragment,{})},t.contextType=er}(r.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={distanceMatrixService:null},t.setDistanceMatrixServiceCallback=function(){null!==t.state.distanceMatrixService&&t.props.onLoad&&t.props.onLoad(t.state.distanceMatrixService)},t}Gn(t,e),t.prototype.componentDidMount=function(){Jn(!!this.props.options,"DistanceMatrixService expected options object as parameter, but go %s",this.props.options);var e=new google.maps.DistanceMatrixService;this.setState((function(){return{distanceMatrixService:e}}),this.setDistanceMatrixServiceCallback)},t.prototype.componentDidUpdate=function(){null!==this.state.distanceMatrixService&&this.state.distanceMatrixService.getDistanceMatrix(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){null!==this.state.distanceMatrixService&&this.props.onUnmount&&this.props.onUnmount(this.state.distanceMatrixService)},t.prototype.render=function(){return null}}(r.PureComponent),{onPlacesChanged:"places_changed"}),ts={bounds:function(e,t){e.setBounds(t)}},ns=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=(0,r.createRef)(),t.state={searchBox:null},t.setSearchBoxCallback=function(){null!==t.state.searchBox&&t.props.onLoad&&t.props.onLoad(t.state.searchBox)},t}Gn(t,e),t.prototype.componentDidMount=function(){if(Jn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=sr({updaterMap:ts,eventMap:es,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}},t.prototype.componentDidUpdate=function(e){null!==this.state.searchBox&&(ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:ts,eventMap:es,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))},t.prototype.componentWillUnmount=function(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ir(this.registeredEvents))},t.prototype.render=function(){return(0,Wn.jsx)("div",{ref:this.containerElement,children:r.Children.only(this.props.children)})},t.contextType=er}(r.PureComponent),{onPlaceChanged:"place_changed"}),rs={bounds:function(e,t){e.setBounds(t)},restrictions:function(e,t){e.setComponentRestrictions(t)},fields:function(e,t){e.setFields(t)},options:function(e,t){e.setOptions(t)},types:function(e,t){e.setTypes(t)}},is=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=(0,r.createRef)(),t.state={autocomplete:null},t.setAutocompleteCallback=function(){null!==t.state.autocomplete&&t.props.onLoad&&t.props.onLoad(t.state.autocomplete)},t}Gn(t,e),t.prototype.componentDidMount=function(){var e;Jn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var n=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=sr({updaterMap:rs,eventMap:ns,prevProps:{},nextProps:this.props,instance:n}),this.setState((function(){return{autocomplete:n}}),this.setAutocompleteCallback)}},t.prototype.componentDidUpdate=function(e){ir(this.registeredEvents),this.registeredEvents=sr({updaterMap:rs,eventMap:ns,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})},t.prototype.componentWillUnmount=function(){null!==this.state.autocomplete&&ir(this.registeredEvents)},t.prototype.render=function(){return(0,Wn.jsx)("div",{ref:this.containerElement,className:this.props.className,children:r.Children.only(this.props.children)})},t.defaultProps={className:""},t.contextType=er}(r.PureComponent),n(122)),ss=n.n(is);const os=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class as{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));const i=os[15&n];if(!i)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new as(o,s,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=os.indexOf(this.ArrayType),s=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-o%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+s+o+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return ls(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],l=[];for(;a.length;){const u=a.pop()||0,c=a.pop()||0,h=a.pop()||0;if(c-h<=o){for(let o=h;o<=c;o++){const a=s[2*o],u=s[2*o+1];a>=e&&a<=n&&u>=t&&u<=r&&l.push(i[o])}continue}const d=h+c>>1,f=s[2*d],p=s[2*d+1];f>=e&&f<=n&&p>=t&&p<=r&&l.push(i[d]),(0===u?e<=f:t<=p)&&(a.push(h),a.push(d-1),a.push(1-u)),(0===u?n>=f:r>=p)&&(a.push(d+1),a.push(c),a.push(1-u))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:s}=this,o=[0,r.length-1,0],a=[],l=n*n;for(;o.length;){const u=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=s){for(let n=h;n<=c;n++)ds(i[2*n],i[2*n+1],e,t)<=l&&a.push(r[n]);continue}const d=h+c>>1,f=i[2*d],p=i[2*d+1];ds(f,p,e,t)<=l&&a.push(r[d]),(0===u?e-n<=f:t-n<=p)&&(o.push(h),o.push(d-1),o.push(1-u)),(0===u?e+n>=f:t+n>=p)&&(o.push(d+1),o.push(c),o.push(1-u))}return a}}function ls(e,t,n,r,i,s){if(i-r<=n)return;const o=r+i>>1;us(e,t,o,r,i,s),ls(e,t,n,r,o-1,1-s),ls(e,t,n,o+1,i,1-s)}function us(e,t,n,r,i,s){for(;i>r;){if(i-r>600){const o=i-r+1,a=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(a-o/2<0?-1:1);us(e,t,n,Math.max(r,Math.floor(n-a*u/o+c)),Math.min(i,Math.floor(n+(o-a)*u/o+c)),s)}const o=t[2*n+s];let a=r,l=i;for(cs(e,t,r,n),t[2*i+s]>o&&cs(e,t,r,i);a<l;){for(cs(e,t,a,l),a++,l--;t[2*a+s]<o;)a++;for(;t[2*l+s]>o;)l--}t[2*r+s]===o?cs(e,t,r,l):(l++,cs(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function cs(e,t,n,r){hs(e,n,r),hs(t,2*n,2*r),hs(t,2*n+1,2*r+1)}function hs(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ds(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}const fs={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},ps=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),gs=3,ms=5,vs=6;class ys{constructor(e){this.options=Object.assign(Object.create(fs),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i="prepare ".concat(e.length," points");t&&console.time(i),this.points=e;const s=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=ps(_s(n)),o=ps(Es(r));s.push(i,o,1/0,a,-1,1),this.options.reduce&&s.push(0)}let o=this.trees[r+1]=this._createTree(s);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const e=+Date.now();o=this.trees[a]=this._createTree(this._cluster(o,a)),t&&console.log("z%d: %d clusters in %dms",a,o.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,s],t),o=this.getClusters([-180,r,i,s],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],a=o.range(_s(n),Es(s),_s(i),Es(r)),l=o.data,u=[];for(const c of a){const e=this.stride*c;u.push(l[e+ms]>1?ws(l,e,this.clusterProps):this.points[l[e+gs]])}return u}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const s=i.data;if(t*this.stride>=s.length)throw new Error(r);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=s[t*this.stride],l=s[t*this.stride+1],u=i.within(a,l,o),c=[];for(const h of u){const t=h*this.stride;s[t+4]===e&&c.push(s[t+ms]>1?ws(s,t,this.clusterProps):this.points[s[t+gs]])}if(0===c.length)throw new Error(r);return c}getLeaves(e,t,n){t=t||10,n=n||0;const r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:s,radius:o}=this.options,a=o/s,l=(n-a)/i,u=(n+1+a)/i,c={features:[]};return this._addTileFeatures(r.range((t-a)/i,l,(t+1+a)/i,u),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-a/i,l,1,u),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,a/i,u),r.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const s=this.getChildren(t);for(const o of s){const t=o.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(o),e.length===n)break}return i}_createTree(e){const t=new as(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,s){for(const o of e){const e=o*this.stride,a=t[e+ms]>1;let l,u,c;if(a)l=bs(t,e,this.clusterProps),u=t[e],c=t[e+1];else{const n=this.points[t[e+gs]];l=n.properties;const[r,i]=n.geometry.coordinates;u=_s(r),c=Es(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(u*i-n)),Math.round(this.options.extent*(c*i-r))]],tags:l};let d;d=a||this.options.generateId?t[e+gs]:this.points[t[e+gs]].id,void 0!==d&&(h.id=d),s.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:s}=this.options,o=n/(r*Math.pow(2,t)),a=e.data,l=[],u=this.stride;for(let c=0;c<a.length;c+=u){if(a[c+2]<=t)continue;a[c+2]=t;const n=a[c],r=a[c+1],h=e.within(a[c],a[c+1],o),d=a[c+ms];let f=d;for(const e of h){const n=e*u;a[n+2]>t&&(f+=a[n+ms])}if(f>d&&f>=s){let e,s=n*d,o=r*d,p=-1;const g=((c/u|0)<<5)+(t+1)+this.points.length;for(const n of h){const r=n*u;if(a[r+2]<=t)continue;a[r+2]=t;const l=a[r+ms];s+=a[r]*l,o+=a[r+1]*l,a[r+4]=g,i&&(e||(e=this._map(a,c,!0),p=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,r)))}a[c+4]=g,l.push(s/f,o/f,1/0,g,-1,f),i&&l.push(p)}else{for(let e=0;e<u;e++)l.push(a[c+e]);if(f>1)for(const e of h){const n=e*u;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<u;e++)l.push(a[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+ms]>1){const r=this.clusterProps[e[t+vs]];return n?Object.assign({},r):r}const r=this.points[e[t+gs]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function ws(e,t,n){return{type:"Feature",id:e[t+gs],properties:bs(e,t,n),geometry:{type:"Point",coordinates:[Ss(e[t]),ks(e[t+1])]}}}function bs(e,t,n){const r=e[t+ms],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,s=e[t+vs],o=-1===s?{}:Object.assign({},n[s]);return Object.assign(o,{cluster:!0,cluster_id:e[t+gs],point_count:r,point_count_abbreviated:i})}function _s(e){return e/360+.5}function Es(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function Ss(e){return 360*(e-.5)}function ks(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Cs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}class Is{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class xs{constructor(e){let{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(Is.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>Is.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(Is.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Ts{constructor(e){let{maxZoom:t=16}=e;this.maxZoom=t}noop(e){let{markers:t}=e;return Ls(t)}}const Ls=e=>e.map((e=>new xs({position:Is.getPosition(e),markers:[e]})));class Ps extends Ts{constructor(e){var{maxZoom:t,radius:n=60}=e,r=Cs(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new ys(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!ss()(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const n=this.markers.map((e=>{const t=Is.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!ss()(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){let{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){let{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new xs({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});const i=r.marker;return new xs({markers:[i],position:Is.getPosition(i)})}}class Ms{constructor(e,t){this.markers={sum:e.length};const n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class As{render(e,t,n){let{count:r,position:i}=e;const s=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(s,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),a="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(Is.isAdvancedMarkerAvailable(n)){const e=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const t={map:n,position:i,zIndex:l,title:a,content:e};return new google.maps.marker.AdvancedMarkerElement(t)}const u={position:i,zIndex:l,title:a,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class Ds{constructor(){!function(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}(Ds,google.maps.OverlayView)}}var Ns;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(Ns||(Ns={}));const Os=(e,t,n)=>{n.fitBounds(t.bounds)};class Rs extends Ds{constructor(e){let{map:t,markers:n=[],algorithmOptions:r={},algorithm:i=new Ps(r),renderer:s=new As,onClusterClick:o=Os}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=s,this.onClusterClick=o,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return-1!==n&&(Is.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Ns.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){const e=new Set;for(const r of t)1==r.markers.length&&e.add(r.markers[0]);const n=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||Is.setMap(t.marker,null):n.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>n.forEach((e=>Is.setMap(e,null)))))}google.maps.event.trigger(this,Ns.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>Is.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new Ms(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>Is.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,Ns.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),Is.setMap(n.marker,t)}))}}const Us=["places"],Fs={width:"50vw",height:"50vh",margin:"auto"},Vs={lat:0,lng:0},zs=e=>{let{markers:t,onMapClick:n,onMarkerDragEnd:r,deleteOneMarker:i}=e;const{isLoaded:s,loadError:o}=yr({googleMapsApiKey:"AIzaSyCaxLx9eKvm5uf-y_Ny6UquJsOLXDKcvvA",libraries:Us});if(o)return(0,Wn.jsx)("div",{children:"Error loading maps"});if(!s)return(0,Wn.jsx)("div",{children:"Loading maps"});new Rs({markers:t});return(0,Wn.jsx)(lr,{mapContainerStyle:Fs,zoom:8,center:Vs,onClick:n,children:t.map(((e,t)=>(0,Wn.jsx)(Tr,{label:t.toString(),position:{lat:e.lat,lng:e.lng},draggable:!0,onDragEnd:e=>r(t,e),onClick:()=>i(t)},t)))})},Bs=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},js={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,u=t>>2,c=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[u],n[c],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bs(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new qs;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ws=function(e){return function(e){const t=Bs(e);return js.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Ks=function(e){try{return js.decodeString(e,!0)}catch(Px){console.error("base64Decode failed: ",Px)}return null};function Gs(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Gs(e[n],t[n]));return e}const Hs=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Qs=()=>{try{return Hs()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/google-maps-react-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyApqxmExbGqE8ejAxDlLA0rV7ccN7fUsdA",REACT_APP_APP_ID:"1:688383032028:web:82c59783c4b8791ea6d219",REACT_APP_AUTH_DOMAIN:"maps-react-app-84ddd.firebaseapp.com",REACT_APP_MESSAGING_SENDER_ID:"688383032028",REACT_APP_PROJECT_ID:"maps-react-app-84ddd",REACT_APP_STORAGE_BUCKET:"maps-react-app-84ddd.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Px){return}const t=e&&Ks(e[1]);return t&&JSON.parse(t)})()}catch(Px){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Px))}},Ys=e=>{var t,n;return null===(n=null===(t=Qs())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Xs=()=>{var e;return null===(e=Qs())||void 0===e?void 0:e.config},Zs=e=>{var t;return null===(t=Qs())||void 0===t?void 0:t["_".concat(e)]};class $s{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Js(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function eo(){return!function(){var e;const t=null===(e=Qs())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Px){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function to(){try{return"object"===typeof indexedDB}catch(Px){return!1}}class no extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,no.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ro.prototype.create)}}class ro{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(io,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new no(n,s,t)}}const io=/\{\$([^}]+)}/g;function so(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oo(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(ao(n)&&ao(s)){if(!oo(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ao(e){return null!==e&&"object"===typeof e}function lo(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function uo(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function co(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function ho(e,t){const n=new fo(e,t);return n.subscribe.bind(n)}class fo{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=po),void 0===r.error&&(r.error=po),void 0===r.complete&&(r.complete=po);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Px){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Px){"undefined"!==typeof console&&console.error&&console.error(Px)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function po(){}function go(e){return e&&e._delegate?e._delegate:e}class mo{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const vo="[DEFAULT]";class yo{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new $s;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Px){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Px){if(r)return null;throw Px}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:vo})}catch(Px){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Px){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===vo?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vo;return this.component?this.component.multipleInstances?e:vo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class wo{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new yo(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const bo=[];var _o;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(_o||(_o={}));const Eo={debug:_o.DEBUG,verbose:_o.VERBOSE,info:_o.INFO,warn:_o.WARN,error:_o.ERROR,silent:_o.SILENT},So=_o.INFO,ko={[_o.DEBUG]:"log",[_o.VERBOSE]:"log",[_o.INFO]:"info",[_o.WARN]:"warn",[_o.ERROR]:"error"},Co=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ko[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Io{constructor(e){this.name=e,this._logLevel=So,this._logHandler=Co,this._userLogHandler=null,bo.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _o))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Eo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_o.DEBUG,...t),this._logHandler(this,_o.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_o.VERBOSE,...t),this._logHandler(this,_o.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_o.INFO,...t),this._logHandler(this,_o.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_o.WARN,...t),this._logHandler(this,_o.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,_o.ERROR,...t),this._logHandler(this,_o.ERROR,...t)}}const xo=(e,t)=>t.some((t=>e instanceof t));let To,Lo;const Po=new WeakMap,Mo=new WeakMap,Ao=new WeakMap,Do=new WeakMap,No=new WeakMap;let Oo={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Mo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ao.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Fo(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ro(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Lo||(Lo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Vo(this),n),Fo(Po.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Fo(e.apply(Vo(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Vo(this),t,...r);return Ao.set(s,t.sort?t.sort():[t]),Fo(s)}}function Uo(e){return"function"===typeof e?Ro(e):(e instanceof IDBTransaction&&function(e){if(Mo.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Mo.set(e,t)}(e),xo(e,To||(To=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Oo):e)}function Fo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(Fo(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Po.set(t,e)})).catch((()=>{})),No.set(t,e),t}(e);if(Do.has(e))return Do.get(e);const t=Uo(e);return t!==e&&(Do.set(e,t),No.set(t,e)),t}const Vo=e=>No.get(e);const zo=["get","getKey","getAll","getAllKeys","count"],Bo=["put","add","delete","clear"],jo=new Map;function qo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(jo.get(t))return jo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Bo.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!zo.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return jo.set(t,s),s}Oo=(e=>({...e,get:(t,n,r)=>qo(t,n)||e.get(t,n,r),has:(t,n)=>!!qo(t,n)||e.has(t,n)}))(Oo);class Wo{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ko="@firebase/app",Go="0.9.28",Ho=new Io("@firebase/app"),Qo="[DEFAULT]",Yo={[Ko]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xo=new Map,Zo=new Map;function $o(e,t){try{e.container.addComponent(t)}catch(Px){Ho.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Px)}}function Jo(e,t){e.container.addOrOverwriteComponent(t)}function ea(e){const t=e.name;if(Zo.has(t))return Ho.debug("There were multiple attempts to register component ".concat(t,".")),!1;Zo.set(t,e);for(const n of Xo.values())$o(n,e);return!0}function ta(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function na(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qo;ta(e,t).clearInstance(n)}function ra(){Zo.clear()}const ia=new ro("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sa{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new mo("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ia.create("app-deleted",{appName:this._name})}}const oa="10.8.1";function aa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Qo,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw ia.create("bad-app-name",{appName:String(i)});if(n||(n=Xs()),!n)throw ia.create("no-options");const s=Xo.get(i);if(s){if(oo(n,s.options)&&oo(r,s.config))return s;throw ia.create("duplicate-app",{appName:i})}const o=new wo(i);for(const l of Zo.values())o.addComponent(l);const a=new sa(n,r,o);return Xo.set(i,a),a}function la(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qo;const t=Xo.get(e);if(!t&&e===Qo&&Xs())return aa();if(!t)throw ia.create("no-app",{appName:e});return t}function ua(){return Array.from(Xo.values())}async function ca(e){const t=e.name;Xo.has(t)&&(Xo.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function ha(e,t,n){var r;let i=null!==(r=Yo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ho.warn(e.join(" "))}ea(new mo("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function da(e,t){if(null!==e&&"function"!==typeof e)throw ia.create("invalid-log-argument");!function(e,t){for(const n of bo){let r=null;t&&t.level&&(r=Eo[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:_o[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function fa(e){var t;t=e,bo.forEach((e=>{e.setLogLevel(t)}))}const pa="firebase-heartbeat-database",ga=1,ma="firebase-heartbeat-store";let va=null;function ya(){return va||(va=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=Fo(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Fo(o.result),e.oldVersion,e.newVersion,Fo(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(pa,ga,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ma)}catch(Px){console.warn(Px)}}}).catch((e=>{throw ia.create("idb-open",{originalErrorMessage:e.message})}))),va}async function wa(e,t){try{const n=(await ya()).transaction(ma,"readwrite"),r=n.objectStore(ma);await r.put(t,ba(e)),await n.done}catch(Px){if(Px instanceof no)Ho.warn(Px.message);else{const t=ia.create("idb-set",{originalErrorMessage:null===Px||void 0===Px?void 0:Px.message});Ho.warn(t.message)}}}function ba(e){return"".concat(e.name,"!").concat(e.options.appId)}class _a{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Sa(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ea();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ea(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ka(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ka(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ws(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Ea(){return(new Date).toISOString().substring(0,10)}class Sa{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!to()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ya()).transaction(ma),n=await t.objectStore(ma).get(ba(e));return await t.done,n}catch(Px){if(Px instanceof no)Ho.warn(Px.message);else{const t=ia.create("idb-get",{originalErrorMessage:null===Px||void 0===Px?void 0:Px.message});Ho.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return wa(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ka(e){return Ws(JSON.stringify({version:2,heartbeats:e})).length}var Ca;Ca="",ea(new mo("platform-logger",(e=>new Wo(e)),"PRIVATE")),ea(new mo("heartbeat",(e=>new _a(e)),"PRIVATE")),ha(Ko,Go,Ca),ha(Ko,Go,"esm2017"),ha("fire-js","");class Ia{constructor(e,t){this._delegate=e,this.firebase=t,$o(e,new mo("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),ca(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qo;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){$o(this._delegate,e)}_addOrOverwriteComponent(e){Jo(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xa=new ro("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Ta=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=aa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(so(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:ha,setLogLevel:fa,onLog:da,apps:null,SDK_VERSION:oa,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(ea(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw xa.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Gs(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!so(n,e=e||Qo))throw xa.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(Ia);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Gs(n,e)},createSubscribe:ho,ErrorFactory:ro,deepExtend:Gs}),n}(),La=new Io("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){La.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&La.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pa=Ta;!function(e){ha("@firebase/app-compat","0.2.28",e)}();Pa.registerVersion("firebase","10.8.1","app-compat");var Ma,Aa="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Da={},Na=Na||{},Oa=Aa||self;function Ra(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ua(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Fa="closure_uid_"+(1e9*Math.random()>>>0),Va=0;function za(e,t,n){return e.call.apply(e.bind,arguments)}function Ba(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ja(e,t,n){return(ja=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?za:Ba).apply(null,arguments)}function qa(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Wa(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ka(){this.s=this.s,this.o=this.o}Ka.prototype.s=!1,Ka.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Fa)&&e[Fa]||(e[Fa]=++Va))},Ka.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ga=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ha(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qa(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Ra(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ya(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ya.prototype.h=function(){this.defaultPrevented=!0};var Xa=function(){if(!Oa.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Oa.addEventListener("test",e,t),Oa.removeEventListener("test",e,t)}catch(n){}return e}();function Za(e){return/^[\s\xa0]*$/.test(e)}function $a(){var e=Oa.navigator;return e&&(e=e.userAgent)?e:""}function Ja(e){return-1!=$a().indexOf(e)}function el(e){return el[" "](e),e}el[" "]=function(){};var tl,nl,rl=Ja("Opera"),il=Ja("Trident")||Ja("MSIE"),sl=Ja("Edge"),ol=sl||il,al=Ja("Gecko")&&!(-1!=$a().toLowerCase().indexOf("webkit")&&!Ja("Edge"))&&!(Ja("Trident")||Ja("MSIE"))&&!Ja("Edge"),ll=-1!=$a().toLowerCase().indexOf("webkit")&&!Ja("Edge");function ul(){var e=Oa.document;return e?e.documentMode:void 0}e:{var cl="",hl=function(){var e=$a();return al?/rv:([^\);]+)(\)|;)/.exec(e):sl?/Edge\/([\d\.]+)/.exec(e):il?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ll?/WebKit\/(\S+)/.exec(e):rl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(hl&&(cl=hl?hl[1]:""),il){var dl=ul();if(null!=dl&&dl>parseFloat(cl)){tl=String(dl);break e}}tl=cl}if(Oa.document&&il){var fl=ul();nl=fl||(parseInt(tl,10)||void 0)}else nl=void 0;var pl=nl;function gl(e,t){if(Ya.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(al){e:{try{el(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ml[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&gl.$.h.call(this)}}Wa(gl,Ya);var ml={2:"touch",3:"pen",4:"mouse"};gl.prototype.h=function(){gl.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var vl="closure_listenable_"+(1e6*Math.random()|0),yl=0;function wl(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++yl,this.fa=this.ia=!1}function bl(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _l(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function El(e){const t={};for(const n in e)t[n]=e[n];return t}const Sl="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kl(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Sl.length;t++)n=Sl[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Cl(e){this.src=e,this.g={},this.h=0}function Il(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Ga(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(bl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function xl(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Cl.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=xl(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new wl(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var Tl="closure_lm_"+(1e6*Math.random()|0),Ll={};function Pl(e,t,n,r,i){if(r&&r.once)return Al(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Pl(e,t[s],n,r,i);return null}return n=Vl(n),e&&e[vl]?e.O(t,n,Ua(r)?!!r.capture:!!r,i):Ml(e,t,n,!1,r,i)}function Ml(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Ua(i)?!!i.capture:!!i,a=Ul(e);if(a||(e[Tl]=a=new Cl(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Rl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Xa||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ol(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Al(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Al(e,t[s],n,r,i);return null}return n=Vl(n),e&&e[vl]?e.P(t,n,Ua(r)?!!r.capture:!!r,i):Ml(e,t,n,!0,r,i)}function Dl(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Dl(e,t[s],n,r,i);else r=Ua(r)?!!r.capture:!!r,n=Vl(n),e&&e[vl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=xl(s=e.g[t],n,r,i))&&(bl(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ul(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xl(t,n,r,i)),(n=-1<e?t[e]:null)&&Nl(n))}function Nl(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[vl])Il(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ol(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ul(t))?(Il(n,e),0==n.h&&(n.src=null,t[Tl]=null)):bl(e)}}}function Ol(e){return e in Ll?Ll[e]:Ll[e]="on"+e}function Rl(e,t){if(e.fa)e=!0;else{t=new gl(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Nl(e),e=n.call(r,t)}return e}function Ul(e){return(e=e[Tl])instanceof Cl?e:null}var Fl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vl(e){return"function"===typeof e?e:(e[Fl]||(e[Fl]=function(t){return e.handleEvent(t)}),e[Fl])}function zl(){Ka.call(this),this.i=new Cl(this),this.S=this,this.J=null}function Bl(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ya(t,e);else if(t instanceof Ya)t.target=t.target||e;else{var i=t;kl(t=new Ya(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=jl(o,r,!0,t)&&i}if(i=jl(o=t.g=e,r,!0,t)&&i,i=jl(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=jl(o=t.g=n[s],r,!1,t)&&i}function jl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Il(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Wa(zl,Ka),zl.prototype[vl]=!0,zl.prototype.removeEventListener=function(e,t,n,r){Dl(this,e,t,n,r)},zl.prototype.N=function(){if(zl.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bl(n[r]);delete t.g[e],t.h--}}this.J=null},zl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},zl.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var ql=Oa.JSON.stringify;function Wl(){var e=Zl;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Kl=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Gl),(e=>e.reset()));class Gl{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Hl(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ql(e){Oa.setTimeout((()=>{throw e}),0)}let Yl,Xl=!1,Zl=new class{constructor(){this.h=this.g=null}add(e,t){const n=Kl.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},$l=()=>{const e=Oa.Promise.resolve(void 0);Yl=()=>{e.then(Jl)}};var Jl=()=>{for(var e;e=Wl();){try{e.h.call(e.g)}catch(n){Ql(n)}var t=Kl;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xl=!1};function eu(e,t){zl.call(this),this.h=e||1,this.g=t||Oa,this.j=ja(this.qb,this),this.l=Date.now()}function tu(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function nu(e,t,n){if("function"===typeof e)n&&(e=ja(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ja(e.handleEvent,e)}return 2147483647<Number(t)?-1:Oa.setTimeout(e,t||0)}function ru(e){e.g=nu((()=>{e.g=null,e.i&&(e.i=!1,ru(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Wa(eu,zl),(Ma=eu.prototype).ga=!1,Ma.T=null,Ma.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bl(this,"tick"),this.ga&&(tu(this),this.start()))}},Ma.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ma.N=function(){eu.$.N.call(this),tu(this),delete this.g};class iu extends Ka{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(Oa.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function su(e){Ka.call(this),this.h=e,this.g={}}Wa(su,Ka);var ou=[];function au(e,t,n,r){Array.isArray(n)||(n&&(ou[0]=n.toString()),n=ou);for(var i=0;i<n.length;i++){var s=Pl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function lu(e){_l(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nl(e)}),e),e.g={}}function uu(){this.g=!0}function cu(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ql(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}su.prototype.N=function(){su.$.N.call(this),lu(this)},su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},uu.prototype.Ea=function(){this.g=!1},uu.prototype.info=function(){};var hu={},du=null;function fu(){return du=du||new zl}function pu(e){Ya.call(this,hu.Ta,e)}function gu(e){const t=fu();Bl(t,new pu(t))}function mu(e,t){Ya.call(this,hu.STAT_EVENT,e),this.stat=t}function vu(e){const t=fu();Bl(t,new mu(t,e))}function yu(e,t){Ya.call(this,hu.Ua,e),this.size=t}function wu(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Oa.setTimeout((function(){e()}),t)}hu.Ta="serverreachability",Wa(pu,Ya),hu.STAT_EVENT="statevent",Wa(mu,Ya),hu.Ua="timingevent",Wa(yu,Ya);var bu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},_u={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Eu(){}function Su(e){return e.h||(e.h=e.i())}function ku(){}Eu.prototype.h=null;var Cu,Iu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xu(){Ya.call(this,"d")}function Tu(){Ya.call(this,"c")}function Lu(){}function Pu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new su(this),this.P=Au,e=ol?125:void 0,this.V=new eu(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Mu}function Mu(){this.i=null,this.g="",this.h=!1}Wa(xu,Ya),Wa(Tu,Ya),Wa(Lu,Eu),Lu.prototype.g=function(){return new XMLHttpRequest},Lu.prototype.i=function(){return{}},Cu=new Lu;var Au=45e3,Du={},Nu={};function Ou(e,t,n){e.L=1,e.A=ec(Yu(t)),e.u=n,e.S=!0,Ru(e,null)}function Ru(e,t){e.G=Date.now(),zu(e),e.B=Yu(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),fc(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Mu,e.g=ph(e.l,n?t:null,!e.u),0<e.O&&(e.M=new iu(ja(e.Pa,e,e.g),e.O)),au(e.U,e.g,"readystatechange",e.nb),t=e.I?El(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),gu(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+u+"&":o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Uu(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Fu(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Vu(e,n),r==Nu){4==t&&(e.s=4,vu(14),i=!1),cu(e.j,e.m,null,"[Incomplete Response]");break}if(r==Du){e.s=4,vu(15),cu(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}cu(e.j,e.m,r,null),Ku(e,r)}Uu(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,vu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),oh(t),t.M=!0,vu(11))):(cu(e.j,e.m,n,"[Invalid Chunked Response]"),Wu(e),qu(e))}function Vu(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Nu:(n=Number(t.substring(n,r)),isNaN(n)?Du:(r+=1)+n>t.length?Nu:(t=t.slice(r,r+n),e.o=r+n,t))}function zu(e){e.Y=Date.now()+e.P,Bu(e,e.P)}function Bu(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=wu(ja(e.lb,e),t)}function ju(e){e.C&&(Oa.clearTimeout(e.C),e.C=null)}function qu(e){0==e.l.H||e.J||uh(e.l,e)}function Wu(e){ju(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,tu(e.V),lu(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ku(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||bc(n.i,e)))if(!e.K&&bc(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;lh(n),$c(n)}sh(n),vu(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=wu(ja(n.ib,n),6e3));if(1>=wc(n.i)&&n.oa){try{n.oa()}catch(u){}n.oa=void 0}}else hh(n,11)}else if((e.K||n.g==e)&&lh(n),!Za(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"===typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(_c(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Ju(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=fh(r,r.J?r.pa:null,r.Y),o.K){Ec(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(ju(a),zu(a)),r.g=o}else ih(r);0<n.j.length&&eh(n)}else"stop"!=u[0]&&"close"!=u[0]||hh(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?hh(n,7):Zc(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}gu()}catch(u){}}function Gu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ra(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ra(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ra(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(Ma=Pu.prototype).setTimeout=function(e){this.P=e},Ma.nb=function(e){e=e.target;const t=this.M;t&&3==Kc(e)?t.l():this.Pa(e)},Ma.Pa=function(e){try{if(e==this.g)e:{const c=Kc(this.g);var t=this.g.Ia();this.g.da();if(!(3>c)&&(3!=c||ol||this.g&&(this.h.h||this.g.ja()||Gc(this.g)))){this.J||4!=c||7==t||gu(),ju(this);var n=this.g.da();this.ca=n;t:if(Uu(this)){var r=Gc(this.g);e="";var i=r.length,s=4==Kc(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Wu(this),qu(this);var o="";break t}this.h.i=new Oa.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Za(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,vu(12),Wu(this),qu(this);break e}cu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ku(this,n)}this.S?(Fu(this,c,o),ol&&this.i&&3==c&&(au(this.U,this.V,"tick",this.mb),this.V.start())):(cu(this.j,this.m,o,null),Ku(this,o)),4==c&&Wu(this),this.i&&!this.J&&(4==c?uh(this.l,this):(this.i=!1,zu(this)))}else(function(e){const t={};e=(e.g&&2<=Kc(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Za(e[r]))continue;var n=Hl(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,vu(12)):(this.s=0,vu(13)),Wu(this),qu(this)}}}catch(c){}},Ma.mb=function(){if(this.g){var e=Kc(this.g),t=this.g.ja();this.o<t.length&&(ju(this),Fu(this,e,t),this.i&&4!=e&&zu(this))}},Ma.cancel=function(){this.J=!0,Wu(this)},Ma.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(gu(),vu(17)),Wu(this),this.s=2,qu(this)):Bu(this,this.Y-e)};var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qu(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Qu){this.h=e.h,Xu(this,e.j),this.s=e.s,this.g=e.g,Zu(this,e.m),this.l=e.l;var t=e.i,n=new uc;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$u(this,n),this.o=e.o}else e&&(t=String(e).match(Hu))?(this.h=!1,Xu(this,t[1]||"",!0),this.s=tc(t[2]||""),this.g=tc(t[3]||"",!0),Zu(this,t[4]),this.l=tc(t[5]||"",!0),$u(this,t[6]||"",!0),this.o=tc(t[7]||"")):(this.h=!1,this.i=new uc(null,this.h))}function Yu(e){return new Qu(e)}function Xu(e,t,n){e.j=n?tc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Zu(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $u(e,t,n){t instanceof uc?(e.i=t,function(e,t){t&&!e.j&&(cc(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(hc(this,t),fc(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=nc(t,ac)),e.i=new uc(t,e.h))}function Ju(e,t,n){e.i.set(t,n)}function ec(e){return Ju(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function tc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function nc(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,rc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function rc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Qu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(nc(t,ic,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(nc(t,ic,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(nc(n,"/"==n.charAt(0)?oc:sc,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",nc(n,lc)),e.join("")};var ic=/[#\/\?@]/g,sc=/[#\?:]/g,oc=/[#\?]/g,ac=/[#\?@]/g,lc=/#/g;function uc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function cc(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function hc(e,t){cc(e),t=pc(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function dc(e,t){return cc(e),t=pc(e,t),e.g.has(t)}function fc(e,t,n){hc(e,t),0<n.length&&(e.i=null,e.g.set(pc(e,t),Ha(n)),e.h+=n.length)}function pc(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ma=uc.prototype).add=function(e,t){cc(this),this.i=null,e=pc(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ma.forEach=function(e,t){cc(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Ma.ta=function(){cc(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Ma.Z=function(e){cc(this);let t=[];if("string"===typeof e)dc(this,e)&&(t=t.concat(this.g.get(pc(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ma.set=function(e,t){return cc(this),this.i=null,dc(this,e=pc(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ma.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ma.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var gc=class{constructor(e,t){this.g=e,this.map=t}};function mc(e){this.l=e||vc,Oa.PerformanceNavigationTiming?e=0<(e=Oa.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Oa.g&&Oa.g.Ka&&Oa.g.Ka()&&Oa.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var vc=10;function yc(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wc(e){return e.h?1:e.g?e.g.size:0}function bc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function _c(e,t){e.g?e.g.add(t):e.h=t}function Ec(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Sc(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ha(e.i)}mc.prototype.cancel=function(){if(this.i=Sc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var kc,Cc=class{stringify(e){return Oa.JSON.stringify(e,void 0)}parse(e){return Oa.JSON.parse(e,void 0)}};function Ic(){this.g=new Cc}function xc(e,t,n){const r=n||"";try{Gu(e,(function(e,n){let i=e;Ua(e)&&(i=ql(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(Px){throw t.push(r+"type="+encodeURIComponent("_badmap")),Px}}function Tc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Lc(e){this.l=e.ec||null,this.j=e.ob||!1}function Pc(e,t){zl.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Mc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wa(Lc,Eu),Lc.prototype.g=function(){return new Pc(this.l,this.j)},Lc.prototype.i=(kc={},function(){return kc}),Wa(Pc,zl);var Mc=0;function Ac(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Dc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Nc(e)}function Nc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ma=Pc.prototype).open=function(e,t){if(this.readyState!=Mc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Nc(this)},Ma.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Oa).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ma.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dc(this)),this.readyState=Mc},Ma.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nc(this)),this.g&&(this.readyState=3,Nc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Oa.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ac(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ma.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dc(this):Nc(this),3==this.readyState&&Ac(this)}},Ma.Za=function(e){this.g&&(this.response=this.responseText=e,Dc(this))},Ma.Ya=function(e){this.g&&(this.response=e,Dc(this))},Ma.ka=function(){this.g&&Dc(this)},Ma.setRequestHeader=function(e,t){this.v.append(e,t)},Ma.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ma.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Oc=Oa.JSON.parse;function Rc(e){zl.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Uc,this.L=this.M=!1}Wa(Rc,zl);var Uc="",Fc=/^https?$/i,Vc=["POST","PUT"];function zc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Bc(e),qc(e)}function Bc(e){e.F||(e.F=!0,Bl(e,"complete"),Bl(e,"error"))}function jc(e){if(e.h&&"undefined"!=typeof Na&&(!e.C[1]||4!=Kc(e)||2!=e.da()))if(e.v&&4==Kc(e))nu(e.La,0,e);else if(Bl(e,"readystatechange"),4==Kc(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Hu)[1]||null;!i&&Oa.self&&Oa.self.location&&(i=Oa.self.location.protocol.slice(0,-1)),r=!Fc.test(i?i.toLowerCase():"")}n=r}if(n)Bl(e,"complete"),Bl(e,"success");else{e.m=6;try{var s=2<Kc(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Bc(e)}}finally{qc(e)}}}function qc(e,t){if(e.g){Wc(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Bl(e,"ready");try{n.onreadystatechange=r}catch(Px){}}}function Wc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Oa.clearTimeout(e.A),e.A=null)}function Kc(e){return e.g?e.g.readyState:0}function Gc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Uc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Jh){return null}}function Hc(e){let t="";return _l(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Qc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Hc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ju(e,t,n))}function Yc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xc(e){this.Ga=0,this.j=[],this.l=new uu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yc("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yc("baseRetryDelayMs",5e3,e),this.hb=Yc("retryDelaySeedMs",1e4,e),this.eb=Yc("forwardChannelMaxRetries",2,e),this.xa=Yc("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new mc(e&&e.concurrentRequestLimit),this.Ja=new Ic,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zc(e){if(Jc(e),3==e.H){var t=e.W++,n=Yu(e.I);if(Ju(n,"SID",e.K),Ju(n,"RID",t),Ju(n,"TYPE","terminate"),nh(e,n),(t=new Pu(e,e.l,t)).L=2,t.A=ec(Yu(n)),n=!1,Oa.navigator&&Oa.navigator.sendBeacon)try{n=Oa.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Oa.Image&&((new Image).src=t.A,n=!0),n||(t.g=ph(t.l,null),t.g.ha(t.A)),t.G=Date.now(),zu(t)}dh(e)}function $c(e){e.g&&(oh(e),e.g.cancel(),e.g=null)}function Jc(e){$c(e),e.u&&(Oa.clearTimeout(e.u),e.u=null),lh(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Oa.clearTimeout(e.m),e.m=null)}function eh(e){if(!yc(e.i)&&!e.m){e.m=!0;var t=e.Na;Yl||$l(),Xl||(Yl(),Xl=!0),Zl.add(t,e),e.C=0}}function th(e,t){var n;n=t?t.m:e.W++;const r=Yu(e.I);Ju(r,"SID",e.K),Ju(r,"RID",n),Ju(r,"AID",e.V),nh(e,r),e.o&&e.s&&Qc(r,e.o,e.s),n=new Pu(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=rh(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),_c(e.i,n),Ou(n,r,t)}function nh(e,t){e.na&&_l(e.na,(function(e,n){Ju(t,n,e)})),e.h&&Gu({},(function(e,n){Ju(t,n,e)}))}function rh(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ja(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{xc(a,e,"req"+n+"_")}catch(vf){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function ih(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Yl||$l(),Xl||(Yl(),Xl=!0),Zl.add(t,e),e.A=0}}function sh(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=wu(ja(e.Ma,e),ch(e,e.A)),e.A++,!0)}function oh(e){null!=e.B&&(Oa.clearTimeout(e.B),e.B=null)}function ah(e){e.g=new Pu(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Yu(e.wa);Ju(t,"RID","rpc"),Ju(t,"SID",e.K),Ju(t,"AID",e.V),Ju(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ju(t,"TO",e.qa),Ju(t,"TYPE","xmlhttp"),nh(e,t),e.o&&e.s&&Qc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=ec(Yu(t)),n.u=null,n.S=!0,Ru(n,e)}function lh(e){null!=e.v&&(Oa.clearTimeout(e.v),e.v=null)}function uh(e,t){var n=null;if(e.g==t){lh(e),oh(e),e.g=null;var r=2}else{if(!bc(e.i,t))return;n=t.F,Ec(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Bl(r=fu(),new yu(r,n)),eh(e)}else ih(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(wc(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=wu(ja(e.Na,e,t),ch(e,e.C)),e.C++,!0))}(e,t)||2==r&&sh(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:hh(e,5);break;case 4:hh(e,10);break;case 3:hh(e,6);break;default:hh(e,2)}}function ch(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function hh(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ja(e.pb,e);n||(n=new Qu("//www.google.com/images/cleardot.gif"),Oa.location&&"http"==Oa.location.protocol||Xu(n,"https"),ec(n)),function(e,t){const n=new uu;if(Oa.Image){const r=new Image;r.onload=qa(Tc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qa(Tc,n,r,"TestLoadImage: error",!1,t),r.onabort=qa(Tc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qa(Tc,n,r,"TestLoadImage: timeout",!1,t),Oa.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vu(2);e.H=0,e.h&&e.h.za(t),dh(e),Jc(e)}function dh(e){if(e.H=0,e.ma=[],e.h){const t=Sc(e.i);0==t.length&&0==e.j.length||(Qa(e.ma,t),Qa(e.ma,e.j),e.i.i.length=0,Ha(e.j),e.j.length=0),e.h.ya()}}function fh(e,t,n){var r=n instanceof Qu?Yu(n):new Qu(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Zu(r,r.m);else{var i=Oa.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Qu(null);r&&Xu(s,r),t&&(s.g=t),i&&Zu(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Ju(r,n,t),Ju(r,"VER",e.ra),nh(e,r),r}function ph(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Rc(new Lc({ob:n})):new Rc(e.va)).Oa(e.J),t}function gh(){}function mh(){if(il&&!(10<=Number(pl)))throw Error("Environmental error: no available transport.")}function vh(e,t){zl.call(this),this.g=new Xc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Za(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Za(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bh(this)}function yh(e){xu.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wh(){Tu.call(this),this.status=1}function bh(e){this.g=e}function _h(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Eh(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Sh(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(Ma=Rc.prototype).Oa=function(e){this.M=e},Ma.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Cu.g(),this.C=this.u?Su(this.u):Su(Cu),this.g.onreadystatechange=ja(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void zc(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Oa.FormData&&e instanceof Oa.FormData,!(0<=Ga(Vc,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wc(this),0<this.B&&((this.L=function(e){return il&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ja(this.ua,this)):this.A=nu(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){zc(this,s)}},Ma.ua=function(){"undefined"!=typeof Na&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bl(this,"timeout"),this.abort(8))},Ma.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Bl(this,"complete"),Bl(this,"abort"),qc(this))},Ma.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qc(this,!0)),Rc.$.N.call(this)},Ma.La=function(){this.s||(this.G||this.v||this.l?jc(this):this.kb())},Ma.kb=function(){jc(this)},Ma.isActive=function(){return!!this.g},Ma.da=function(){try{return 2<Kc(this)?this.g.status:-1}catch(kc){return-1}},Ma.ja=function(){try{return this.g?this.g.responseText:""}catch(kc){return""}},Ma.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Oc(t)}},Ma.Ia=function(){return this.m},Ma.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ma=Xc.prototype).ra=8,Ma.H=1,Ma.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Pu(this,this.l,e);let s=this.s;if(this.U&&(s?(s=El(s),kl(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=rh(this,i,t),Ju(n=Yu(this.I),"RID",e),Ju(n,"CVER",22),this.F&&Ju(n,"X-HTTP-Session-Id",this.F),nh(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Hc(s)))+"&"+t:this.o&&Qc(n,this.o,s)),_c(this.i,i),this.bb&&Ju(n,"TYPE","init"),this.P?(Ju(n,"$req",t),Ju(n,"SID","null"),i.aa=!0,Ou(i,n,null)):Ou(i,n,t),this.H=2}}else 3==this.H&&(e?th(this,e):0==this.j.length||yc(this.i)||th(this))},Ma.Ma=function(){if(this.u=null,ah(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=wu(ja(this.jb,this),e)}},Ma.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,vu(10),$c(this),ah(this))},Ma.ib=function(){null!=this.v&&(this.v=null,$c(this),sh(this),vu(19))},Ma.pb=function(e){e?(this.l.info("Successfully pinged google.com"),vu(2)):(this.l.info("Failed to ping google.com"),vu(1))},Ma.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ma=gh.prototype).Ba=function(){},Ma.Aa=function(){},Ma.za=function(){},Ma.ya=function(){},Ma.isActive=function(){return!0},Ma.Va=function(){},mh.prototype.g=function(e,t){return new vh(e,t)},Wa(vh,zl),vh.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;vu(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=fh(e,null,e.Y),eh(e)},vh.prototype.close=function(){Zc(this.g)},vh.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ql(e),e=n);t.j.push(new gc(t.fb++,e)),3==t.H&&eh(t)},vh.prototype.N=function(){this.g.h=null,delete this.j,Zc(this.g),delete this.g,vh.$.N.call(this)},Wa(yh,xu),Wa(wh,Tu),Wa(bh,gh),bh.prototype.Ba=function(){Bl(this.g,"a")},bh.prototype.Aa=function(e){Bl(this.g,new yh(e))},bh.prototype.za=function(e){Bl(this.g,new wh)},bh.prototype.ya=function(){Bl(this.g,"b")},Wa(_h,(function(){this.blockSize=-1})),_h.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_h.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Eh(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Eh(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Eh(this,r),i=0;break}}this.h=i,this.i+=t},_h.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var kh={};function Ch(e){return-128<=e&&128>e?function(e,t){var n=kh;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Sh([0|e],0>e?-1:0)})):new Sh([0|e],0>e?-1:0)}function Ih(e){if(isNaN(e)||!isFinite(e))return Th;if(0>e)return Dh(Ih(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=xh;return new Sh(t,0)}var xh=4294967296,Th=Ch(0),Lh=Ch(1),Ph=Ch(16777216);function Mh(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ah(e){return-1==e.h}function Dh(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Sh(n,~e.h).add(Lh)}function Nh(e,t){return e.add(Dh(t))}function Oh(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Rh(e,t){this.g=e,this.h=t}function Uh(e,t){if(Mh(t))throw Error("division by zero");if(Mh(e))return new Rh(Th,Th);if(Ah(e))return t=Uh(Dh(e),t),new Rh(Dh(t.g),Dh(t.h));if(Ah(t))return t=Uh(e,Dh(t)),new Rh(Dh(t.g),t.h);if(30<e.g.length){if(Ah(e)||Ah(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Lh,r=t;0>=r.X(e);)n=Fh(n),r=Fh(r);var i=Vh(n,1),s=Vh(r,1);for(r=Vh(r,2),n=Vh(n,2);!Mh(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=Vh(r,1),n=Vh(n,1)}return t=Nh(e,i.R(t)),new Rh(i,t)}for(i=Th;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Ih(n)).R(t);Ah(o)||0<o.X(e);)o=(s=Ih(n-=r)).R(t);Mh(s)&&(s=Lh),i=i.add(s),e=Nh(e,o)}return new Rh(i,e)}function Fh(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Sh(n,e.h)}function Vh(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Sh(i,e.h)}(Ma=Sh.prototype).ea=function(){if(Ah(this))return-Dh(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:xh+r)*t,t*=xh}return e},Ma.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Mh(this))return"0";if(Ah(this))return"-"+Dh(this).toString(e);for(var t=Ih(Math.pow(e,6)),n=this,r="";;){var i=Uh(n,t).g,s=((0<(n=Nh(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Mh(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},Ma.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ma.X=function(e){return Ah(e=Nh(this,e))?-1:Mh(e)?0:1},Ma.abs=function(){return Ah(this)?Dh(this):this},Ma.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Sh(n,-2147483648&n[n.length-1]?-1:0)},Ma.R=function(e){if(Mh(this)||Mh(e))return Th;if(Ah(this))return Ah(e)?Dh(this).R(Dh(e)):Dh(Dh(this).R(e));if(Ah(e))return Dh(this.R(Dh(e)));if(0>this.X(Ph)&&0>e.X(Ph))return Ih(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,Oh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Oh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Oh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Oh(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Sh(n,0)},Ma.gb=function(e){return Uh(this,e).h},Ma.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Sh(n,this.h&e.h)},Ma.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Sh(n,this.h|e.h)},Ma.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Sh(n,this.h^e.h)},mh.prototype.createWebChannel=mh.prototype.g,vh.prototype.send=vh.prototype.u,vh.prototype.open=vh.prototype.m,vh.prototype.close=vh.prototype.close,bu.NO_ERROR=0,bu.TIMEOUT=8,bu.HTTP_ERROR=6,_u.COMPLETE="complete",ku.EventType=Iu,Iu.OPEN="a",Iu.CLOSE="b",Iu.ERROR="c",Iu.MESSAGE="d",zl.prototype.listen=zl.prototype.O,Rc.prototype.listenOnce=Rc.prototype.P,Rc.prototype.getLastError=Rc.prototype.Sa,Rc.prototype.getLastErrorCode=Rc.prototype.Ia,Rc.prototype.getStatus=Rc.prototype.da,Rc.prototype.getResponseJson=Rc.prototype.Wa,Rc.prototype.getResponseText=Rc.prototype.ja,Rc.prototype.send=Rc.prototype.ha,Rc.prototype.setWithCredentials=Rc.prototype.Oa,_h.prototype.digest=_h.prototype.l,_h.prototype.reset=_h.prototype.reset,_h.prototype.update=_h.prototype.j,Sh.prototype.add=Sh.prototype.add,Sh.prototype.multiply=Sh.prototype.R,Sh.prototype.modulo=Sh.prototype.gb,Sh.prototype.compare=Sh.prototype.X,Sh.prototype.toNumber=Sh.prototype.ea,Sh.prototype.toString=Sh.prototype.toString,Sh.prototype.getBits=Sh.prototype.D,Sh.fromNumber=Ih,Sh.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Dh(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ih(Math.pow(n,8)),i=Th,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Ih(Math.pow(n,o)),i=i.R(o).add(Ih(a))):i=(i=i.R(r)).add(Ih(a))}return i};var zh=Da.createWebChannelTransport=function(){return new mh},Bh=Da.getStatEventTarget=function(){return fu()},jh=Da.ErrorCode=bu,qh=Da.EventType=_u,Wh=Da.Event=hu,Kh=Da.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gh=(Da.FetchXmlHttpFactory=Lc,Da.WebChannel=ku),Hh=Da.XhrIo=Rc,Qh=Da.Md5=_h,Yh=Da.Integer=Sh;const Xh="@firebase/firestore";class Zh{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zh.UNAUTHENTICATED=new Zh(null),Zh.GOOGLE_CREDENTIALS=new Zh("google-credentials-uid"),Zh.FIRST_PARTY=new Zh("first-party-uid"),Zh.MOCK_USER=new Zh("mock-user");let $h="10.8.1";const Jh=new Io("@firebase/firestore");function ed(){return Jh.logLevel}function td(e){if(Jh.logLevel<=_o.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(id);Jh.debug("Firestore (".concat($h,"): ").concat(e),...i)}}function nd(e){if(Jh.logLevel<=_o.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(id);Jh.error("Firestore (".concat($h,"): ").concat(e),...i)}}function rd(e){if(Jh.logLevel<=_o.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(id);Jh.warn("Firestore (".concat($h,"): ").concat(e),...i)}}function id(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function sd(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat($h,") INTERNAL ASSERTION FAILED: ")+e;throw nd(t),new Error(t)}function od(e,t){e||sd()}function ad(e,t){return e}const ld={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ud extends no{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class cd{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class hd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class dd{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zh.UNAUTHENTICATED)))}shutdown(){}}class fd{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class pd{constructor(e){this.t=e,this.currentUser=Zh.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new cd;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cd,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{td("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(td("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cd)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(td("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(od("string"==typeof t.accessToken),new hd(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return od(null===e||"string"==typeof e),new Zh(e)}}class gd{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Zh.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class md{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Zh.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vd{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class yd{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&td("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,td("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{td("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):td("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(od("string"==typeof e.token),this.R=e.token,new vd(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function wd(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class bd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=wd(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function _d(e,t){return e<t?-1:e>t?1:0}function Ed(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Sd(e){return e+"\0"}class kd{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ud(ld.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ud(ld.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ud(ld.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ud(ld.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kd.fromMillis(Date.now())}static fromDate(e){return kd.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new kd(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_d(this.nanoseconds,e.nanoseconds):_d(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Cd{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Cd(e)}static min(){return new Cd(new kd(0,0))}static max(){return new Cd(new kd(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Id{constructor(e,t,n){void 0===t?t=0:t>e.length&&sd(),void 0===n?n=e.length-t:n>e.length-t&&sd(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Id.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Id?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xd extends Id{construct(e,t,n){return new xd(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ud(ld.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new xd(e)}static emptyPath(){return new xd([])}}const Td=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ld extends Id{construct(e,t,n){return new Ld(e,t,n)}static isValidIdentifier(e){return Td.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ld.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ld(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ud(ld.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ud(ld.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ud(ld.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ud(ld.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ld(t)}static emptyPath(){return new Ld([])}}class Pd{constructor(e){this.path=e}static fromPath(e){return new Pd(xd.fromString(e))}static fromName(e){return new Pd(xd.fromString(e).popFirst(5))}static empty(){return new Pd(xd.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xd.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xd.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pd(new xd(e.slice()))}}class Md{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ad(e){return e.fields.find((e=>2===e.kind))}function Dd(e){return e.fields.filter((e=>2!==e.kind))}Md.UNKNOWN_ID=-1;class Nd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Od{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Od(0,Fd.min())}}function Rd(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Cd.fromTimestamp(1e9===r?new kd(n+1,0):new kd(n,r));return new Fd(i,Pd.empty(),t)}function Ud(e){return new Fd(e.readTime,e.key,-1)}class Fd{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Fd(Cd.min(),Pd.empty(),-1)}static max(){return new Fd(Cd.max(),Pd.empty(),-1)}}function Vd(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Pd.comparator(e.documentKey,t.documentKey),0!==n?n:_d(e.largestBatchId,t.largestBatchId))}const zd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function jd(e){if(e.code!==ld.FAILED_PRECONDITION||e.message!==zd)throw e;td("LocalStore","Unexpectedly lost primary lease")}class qd{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&sd(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qd(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof qd?t:qd.resolve(t)}catch(e){return qd.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):qd.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):qd.reject(t)}static resolve(e){return new qd(((t,n)=>{t(e)}))}static reject(e){return new qd(((t,n)=>{n(e)}))}static waitFor(e){return new qd(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=qd.resolve(!1);for(const n of e)t=t.next((e=>e?qd.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new qd(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new qd(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Wd{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new cd,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Hd(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=$d(t.target.error);this.V.reject(new Hd(e,n))}}static open(e,t,n,r){try{return new Wd(t,e.transaction(r,n))}catch(e){throw new Hd(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(td("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Yd(t)}}class Kd{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Kd.S(Js())&&nd("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return td("SimpleDb","Removing database:",e),Xd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!to())return!1;if(Kd.C())return!0;const e=Js(),t=Kd.S(e),n=0<t&&t<10,r=Kd.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(td("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Hd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new ud(ld.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new ud(ld.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Hd(e,r))},r.onupgradeneeded=e=>{td("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{td("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Wd.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),qd.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(td("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Gd{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xd(this.k.delete())}}class Hd extends ud{constructor(e,t){super(ld.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Qd(e){return"IndexedDbTransactionError"===e.name}class Yd{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(td("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(td("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Xd(n)}add(e){return td("SimpleDb","ADD",this.store.name,e,e),Xd(this.store.add(e))}get(e){return Xd(this.store.get(e)).next((t=>(void 0===t&&(t=null),td("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return td("SimpleDb","DELETE",this.store.name,e),Xd(this.store.delete(e))}count(){return td("SimpleDb","COUNT",this.store.name),Xd(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new qd(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new qd(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){td("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new qd(((n,r)=>{t.onerror=e=>{const t=$d(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new qd(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Gd(i),o=t(i.primaryKey,i.value,s);if(o instanceof qd){const e=o.catch((e=>(s.done(),qd.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>qd.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xd(e){return new qd(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=$d(e.target.error);n(t)}}))}let Zd=!1;function $d(e){const t=Kd.S(Js());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new ud("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Zd||(Zd=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Jd{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){td("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{td("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Qd(e)?td("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await jd(e)}await this.ee(6e4)}))}}class ef{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return qd.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return td("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(td("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Ud(t);Vd(r,n)>0&&(n=r)})),new Fd(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class tf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function nf(e){return null==e}function rf(e){return 0===e&&1/e==-1/0}function sf(e){return"number"==typeof e&&Number.isInteger(e)&&!rf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function of(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=lf(t)),t=af(e.get(n),t);return lf(t)}function af(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function lf(e){return e+"\x01\x01"}function uf(e){const t=e.length;if(od(t>=2),2===t)return od("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),xd.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&sd(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:sd()}s=t+2}return new xd(r)}tf._e=-1;const cf=["userId","batchId"];function hf(e,t){return[e,of(t)]}function df(e,t,n){return[e,of(t),n]}const ff={},pf=["prefixPath","collectionGroup","readTime","documentId"],gf=["prefixPath","collectionGroup","documentId"],mf=["collectionGroup","readTime","prefixPath","documentId"],vf=["canonicalId","targetId"],yf=["targetId","path"],wf=["path","targetId"],bf=["collectionId","parent"],_f=["indexId","uid"],Ef=["uid","sequenceNumber"],Sf=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kf=["indexId","uid","orderedDocumentKey"],Cf=["userId","collectionPath","documentId"],If=["userId","collectionPath","largestBatchId"],xf=["userId","collectionGroup","largestBatchId"],Tf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Lf=[...Tf,"documentOverlays"],Pf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Mf=Pf,Af=[...Mf,"indexConfiguration","indexState","indexEntries"];class Df extends Bd{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Nf(e,t){const n=ad(e);return Kd.M(n.ae,t)}function Of(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Rf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Uf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Ff{constructor(e,t){this.comparator=e,this.root=t||zf.EMPTY}insert(e,t){return new Ff(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zf.BLACK,null,null))}remove(e){return new Ff(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vf(this.root,e,this.comparator,!0)}}class Vf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:zf.RED,this.left=null!=r?r:zf.EMPTY,this.right=null!=i?i:zf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new zf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return zf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return zf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw sd();if(this.right.isRed())throw sd();const e=this.left.check();if(e!==this.right.check())throw sd();return e+(this.isRed()?0:1)}}zf.EMPTY=null,zf.RED=!0,zf.BLACK=!1,zf.EMPTY=new class{constructor(){this.size=0}get key(){throw sd()}get value(){throw sd()}get color(){throw sd()}get left(){throw sd()}get right(){throw sd()}copy(e,t,n,r,i){return this}insert(e,t,n){return new zf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Bf{constructor(e){this.comparator=e,this.data=new Ff(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jf(this.data.getIterator())}getIteratorFrom(e){return new jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Bf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Bf(this.comparator);return t.data=e,t}}class jf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function qf(e){return e.hasNext()?e.getNext():void 0}class Wf{constructor(e){this.fields=e,e.sort(Ld.comparator)}static empty(){return new Wf([])}unionWith(e){let t=new Bf(Ld.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Wf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ed(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Kf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Gf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Kf("Invalid base64 string: "+e):e}}(e);return new Gf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Gf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _d(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gf.EMPTY_BYTE_STRING=new Gf("");const Hf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qf(e){if(od(!!e),"string"==typeof e){let t=0;const n=Hf.exec(e);if(od(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Yf(e.seconds),nanos:Yf(e.nanos)}}function Yf(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Xf(e){return"string"==typeof e?Gf.fromBase64String(e):Gf.fromUint8Array(e)}function Zf(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $f(e){const t=e.mapValue.fields.__previous_value__;return Zf(t)?$f(t):t}function Jf(e){const t=Qf(e.mapValue.fields.__local_write_time__.timestampValue);return new kd(t.seconds,t.nanos)}class ep{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class tp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new tp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof tp&&e.projectId===this.projectId&&e.database===this.database}}const np={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rp={nullValue:"NULL_VALUE"};function ip(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Zf(e)?4:yp(e)?9007199254740991:10:sd()}function sp(e,t){if(e===t)return!0;const n=ip(e);if(n!==ip(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Jf(e).isEqual(Jf(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Qf(e.timestampValue),r=Qf(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Xf(e.bytesValue).isEqual(Xf(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yf(e.geoPointValue.latitude)===Yf(t.geoPointValue.latitude)&&Yf(e.geoPointValue.longitude)===Yf(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yf(e.integerValue)===Yf(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Yf(e.doubleValue),r=Yf(t.doubleValue);return n===r?rf(n)===rf(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ed(e.arrayValue.values||[],t.arrayValue.values||[],sp);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Of(n)!==Of(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!sp(n[i],r[i])))return!1;return!0}(e,t);default:return sd()}}function op(e,t){return void 0!==(e.values||[]).find((e=>sp(e,t)))}function ap(e,t){if(e===t)return 0;const n=ip(e),r=ip(t);if(n!==r)return _d(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _d(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Yf(e.integerValue||e.doubleValue),r=Yf(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return lp(e.timestampValue,t.timestampValue);case 4:return lp(Jf(e),Jf(t));case 5:return _d(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Xf(e),r=Xf(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=_d(n[i],r[i]);if(0!==e)return e}return _d(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=_d(Yf(e.latitude),Yf(t.latitude));return 0!==n?n:_d(Yf(e.longitude),Yf(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ap(n[i],r[i]);if(e)return e}return _d(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===np.mapValue&&t===np.mapValue)return 0;if(e===np.mapValue)return 1;if(t===np.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=_d(r[o],s[o]);if(0!==e)return e;const t=ap(n[r[o]],i[s[o]]);if(0!==t)return t}return _d(r.length,s.length)}(e.mapValue,t.mapValue);default:throw sd()}}function lp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _d(e,t);const n=Qf(e),r=Qf(t),i=_d(n.seconds,r.seconds);return 0!==i?i:_d(n.nanos,r.nanos)}function up(e){return cp(e)}function cp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Qf(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Xf(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Pd.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=cp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(cp(e.fields[i]));return n+"}"}(e.mapValue):sd()}function hp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function dp(e){return!!e&&"integerValue"in e}function fp(e){return!!e&&"arrayValue"in e}function pp(e){return!!e&&"nullValue"in e}function gp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mp(e){return!!e&&"mapValue"in e}function vp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Rf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=vp(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=vp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function yp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function wp(e){return"nullValue"in e?rp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?hp(tp.empty(),Pd.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:sd()}function bp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?hp(tp.empty(),Pd.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?np:sd()}function _p(e,t){const n=ap(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ep(e,t){const n=ap(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Sp{constructor(e){this.value=e}static empty(){return new Sp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!mp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vp(t)}setAll(e){let t=Ld.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=vp(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());mp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];mp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Rf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Sp(vp(this.value))}}function kp(e){const t=[];return Rf(e.fields,((e,n)=>{const r=new Ld([e]);if(mp(n)){const e=kp(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Wf(t)}class Cp{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Cp(e,0,Cd.min(),Cd.min(),Cd.min(),Sp.empty(),0)}static newFoundDocument(e,t,n,r){return new Cp(e,1,t,Cd.min(),n,r,0)}static newNoDocument(e,t){return new Cp(e,2,t,Cd.min(),Cd.min(),Sp.empty(),0)}static newUnknownDocument(e,t){return new Cp(e,3,t,Cd.min(),Cd.min(),Sp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Cd.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cd.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Ip{constructor(e,t){this.position=e,this.inclusive=t}}function xp(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Pd.comparator(Pd.fromName(o.referenceValue),n.key):ap(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Tp(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!sp(e.position[n],t.position[n]))return!1;return!0}class Lp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Pp(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Mp{}class Ap extends Mp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new jp(e,t,n):"array-contains"===t?new Gp(e,n):"in"===t?new Hp(e,n):"not-in"===t?new Qp(e,n):"array-contains-any"===t?new Yp(e,n):new Ap(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new qp(e,n):new Wp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ap(t,this.value)):null!==t&&ip(this.value)===ip(t)&&this.matchesComparison(ap(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return sd()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dp extends Mp{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Dp(e,t)}matches(e){return Np(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Np(e){return"and"===e.op}function Op(e){return"or"===e.op}function Rp(e){return Up(e)&&Np(e)}function Up(e){for(const t of e.filters)if(t instanceof Dp)return!1;return!0}function Fp(e){if(e instanceof Ap)return e.field.canonicalString()+e.op.toString()+up(e.value);if(Rp(e))return e.filters.map((e=>Fp(e))).join(",");{const t=e.filters.map((e=>Fp(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Vp(e,t){return e instanceof Ap?function(e,t){return t instanceof Ap&&e.op===t.op&&e.field.isEqual(t.field)&&sp(e.value,t.value)}(e,t):e instanceof Dp?function(e,t){return t instanceof Dp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Vp(n,t.filters[r])),!0)}(e,t):void sd()}function zp(e,t){const n=e.filters.concat(t);return Dp.create(n,e.op)}function Bp(e){return e instanceof Ap?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(up(e.value))}(e):e instanceof Dp?function(e){return e.op.toString()+" {"+e.getFilters().map(Bp).join(" ,")+"}"}(e):"Filter"}class jp extends Ap{constructor(e,t,n){super(e,t,n),this.key=Pd.fromName(n.referenceValue)}matches(e){const t=Pd.comparator(e.key,this.key);return this.matchesComparison(t)}}class qp extends Ap{constructor(e,t){super(e,"in",t),this.keys=Kp("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Wp extends Ap{constructor(e,t){super(e,"not-in",t),this.keys=Kp("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Kp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Pd.fromName(e.referenceValue)))}class Gp extends Ap{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fp(t)&&op(t.arrayValue,this.value)}}class Hp extends Ap{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&op(this.value.arrayValue,t)}}class Qp extends Ap{constructor(e,t){super(e,"not-in",t)}matches(e){if(op(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!op(this.value.arrayValue,t)}}class Yp extends Ap{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>op(this.value.arrayValue,e)))}}class Xp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Zp(e){return new Xp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function $p(e){const t=ad(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Fp(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),nf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>up(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>up(e))).join(",")),t.ce=e}return t.ce}function Jp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Pp(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Vp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Tp(e.startAt,t.startAt)&&Tp(e.endAt,t.endAt)}function eg(e){return Pd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function tg(e,t){return e.filters.filter((e=>e instanceof Ap&&e.field.isEqual(t)))}function ng(e,t,n){let r=rp,i=!0;for(const s of tg(e,t)){let e=rp,t=!0;switch(s.op){case"<":case"<=":e=wp(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=rp}_p({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];_p({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function rg(e,t,n){let r=np,i=!0;for(const s of tg(e,t)){let e=np,t=!0;switch(s.op){case">=":case">":e=bp(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=np}Ep({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ep({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class ig{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function sg(e,t,n,r,i,s,o,a){return new ig(e,t,n,r,i,s,o,a)}function og(e){return new ig(e)}function ag(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function lg(e){return null!==e.collectionGroup}function ug(e){const t=ad(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Bf(Ld.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Lp(r,n))})),e.has(Ld.keyField().canonicalString())||t.le.push(new Lp(Ld.keyField(),n))}return t.le}function cg(e){const t=ad(e);return t.he||(t.he=hg(t,ug(e))),t.he}function hg(e,t){if("F"===e.limitType)return Zp(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Lp(e.field,t)}));const n=e.endAt?new Ip(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ip(e.startAt.position,e.startAt.inclusive):null;return Zp(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function dg(e,t){const n=e.filters.concat([t]);return new ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fg(e,t,n){return new ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function pg(e,t){return Jp(cg(e),cg(t))&&e.limitType===t.limitType}function gg(e){return"".concat($p(cg(e)),"|lt:").concat(e.limitType)}function mg(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Bp(e))).join(", "),"]")),nf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>up(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>up(e))).join(",")),"Target(".concat(t,")")}(cg(e)),"; limitType=").concat(e.limitType,")")}function vg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Pd.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ug(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=xp(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,ug(e),t))&&!(e.endAt&&!function(e,t,n){const r=xp(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,ug(e),t))}(e,t)}function yg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wg(e){return(t,n)=>{let r=!1;for(const i of ug(e)){const e=bg(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function bg(e,t,n){const r=e.field.isKeyField()?Pd.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ap(r,i):sd()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sd()}}class _g{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Uf(this.inner)}size(){return this.innerSize}}const Eg=new Ff(Pd.comparator);function Sg(){return Eg}const kg=new Ff(Pd.comparator);function Cg(){let e=kg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ig(e){let t=kg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function xg(){return Lg()}function Tg(){return Lg()}function Lg(){return new _g((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Pg=new Ff(Pd.comparator),Mg=new Bf(Pd.comparator);function Ag(){let e=Mg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Dg=new Bf(_d);function Ng(){return Dg}function Og(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rf(t)?"-0":t}}function Rg(e){return{integerValue:""+e}}function Ug(e,t){return sf(t)?Rg(t):Og(e,t)}class Fg{constructor(){this._=void 0}}function Vg(e,t,n){return e instanceof jg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Zf(t)&&(t=$f(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof qg?Wg(e,t):e instanceof Kg?Gg(e,t):function(e,t){const n=Bg(e,t),r=Qg(n)+Qg(e.Ie);return dp(n)&&dp(e.Ie)?Rg(r):Og(e.serializer,r)}(e,t)}function zg(e,t,n){return e instanceof qg?Wg(e,t):e instanceof Kg?Gg(e,t):n}function Bg(e,t){return e instanceof Hg?function(e){return dp(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class jg extends Fg{}class qg extends Fg{constructor(e){super(),this.elements=e}}function Wg(e,t){const n=Yg(t);for(const r of e.elements)n.some((e=>sp(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Kg extends Fg{constructor(e){super(),this.elements=e}}function Gg(e,t){let n=Yg(t);for(const r of e.elements)n=n.filter((e=>!sp(e,r)));return{arrayValue:{values:n}}}class Hg extends Fg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Qg(e){return Yf(e.integerValue||e.doubleValue)}function Yg(e){return fp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Xg{constructor(e,t){this.field=e,this.transform=t}}class Zg{constructor(e,t){this.version=e,this.transformResults=t}}class $g{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $g}static exists(e){return new $g(void 0,e)}static updateTime(e){return new $g(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class em{}function tm(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new hm(e.key,$g.none()):new om(e.key,e.data,$g.none());{const n=e.data,r=Sp.empty();let i=new Bf(Ld.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new am(e.key,r,new Wf(i.toArray()),$g.none())}}function nm(e,t,n){e instanceof om?function(e,t,n){const r=e.value.clone(),i=um(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof am?function(e,t,n){if(!Jg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=um(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(lm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rm(e,t,n,r){return e instanceof om?function(e,t,n,r){if(!Jg(e.precondition,t))return n;const i=e.value.clone(),s=cm(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof am?function(e,t,n,r){if(!Jg(e.precondition,t))return n;const i=cm(e.fieldTransforms,r,t),s=t.data;return s.setAll(lm(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Jg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function im(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Bg(r.transform,e||null);null!=i&&(null===n&&(n=Sp.empty()),n.set(r.field,i))}return n||null}function sm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ed(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof qg&&t instanceof qg||e instanceof Kg&&t instanceof Kg?Ed(e.elements,t.elements,sp):e instanceof Hg&&t instanceof Hg?sp(e.Ie,t.Ie):e instanceof jg&&t instanceof jg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class om extends em{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class am extends em{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lm(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function um(e,t,n){const r=new Map;od(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,zg(o,a,n[i]))}return r}function cm(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Vg(e,s,t))}return r}class hm extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dm extends em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class fm{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&nm(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=rm(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=rm(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Tg();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=tm(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Cd.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ag())}isEqual(e){return this.batchId===e.batchId&&Ed(this.mutations,e.mutations,((e,t)=>sm(e,t)))&&Ed(this.baseMutations,e.baseMutations,((e,t)=>sm(e,t)))}}class pm{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){od(e.mutations.length===n.length);let r=Pg;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new pm(e,t,n,r)}}class gm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class mm{constructor(e,t){this.count=e,this.unchangedNames=t}}var vm,ym;function wm(e){switch(e){default:return sd();case ld.CANCELLED:case ld.UNKNOWN:case ld.DEADLINE_EXCEEDED:case ld.RESOURCE_EXHAUSTED:case ld.INTERNAL:case ld.UNAVAILABLE:case ld.UNAUTHENTICATED:return!1;case ld.INVALID_ARGUMENT:case ld.NOT_FOUND:case ld.ALREADY_EXISTS:case ld.PERMISSION_DENIED:case ld.FAILED_PRECONDITION:case ld.ABORTED:case ld.OUT_OF_RANGE:case ld.UNIMPLEMENTED:case ld.DATA_LOSS:return!0}}function bm(e){if(void 0===e)return nd("GRPC error has no .code"),ld.UNKNOWN;switch(e){case vm.OK:return ld.OK;case vm.CANCELLED:return ld.CANCELLED;case vm.UNKNOWN:return ld.UNKNOWN;case vm.DEADLINE_EXCEEDED:return ld.DEADLINE_EXCEEDED;case vm.RESOURCE_EXHAUSTED:return ld.RESOURCE_EXHAUSTED;case vm.INTERNAL:return ld.INTERNAL;case vm.UNAVAILABLE:return ld.UNAVAILABLE;case vm.UNAUTHENTICATED:return ld.UNAUTHENTICATED;case vm.INVALID_ARGUMENT:return ld.INVALID_ARGUMENT;case vm.NOT_FOUND:return ld.NOT_FOUND;case vm.ALREADY_EXISTS:return ld.ALREADY_EXISTS;case vm.PERMISSION_DENIED:return ld.PERMISSION_DENIED;case vm.FAILED_PRECONDITION:return ld.FAILED_PRECONDITION;case vm.ABORTED:return ld.ABORTED;case vm.OUT_OF_RANGE:return ld.OUT_OF_RANGE;case vm.UNIMPLEMENTED:return ld.UNIMPLEMENTED;case vm.DATA_LOSS:return ld.DATA_LOSS;default:return sd()}}(ym=vm||(vm={}))[ym.OK=0]="OK",ym[ym.CANCELLED=1]="CANCELLED",ym[ym.UNKNOWN=2]="UNKNOWN",ym[ym.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ym[ym.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ym[ym.NOT_FOUND=5]="NOT_FOUND",ym[ym.ALREADY_EXISTS=6]="ALREADY_EXISTS",ym[ym.PERMISSION_DENIED=7]="PERMISSION_DENIED",ym[ym.UNAUTHENTICATED=16]="UNAUTHENTICATED",ym[ym.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ym[ym.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ym[ym.ABORTED=10]="ABORTED",ym[ym.OUT_OF_RANGE=11]="OUT_OF_RANGE",ym[ym.UNIMPLEMENTED=12]="UNIMPLEMENTED",ym[ym.INTERNAL=13]="INTERNAL",ym[ym.UNAVAILABLE=14]="UNAVAILABLE",ym[ym.DATA_LOSS=15]="DATA_LOSS";let _m=null;function Em(){return new TextEncoder}const Sm=new Yh([4294967295,4294967295],0);function km(e){const t=Em().encode(e),n=new Qh;return n.update(t),new Uint8Array(n.digest())}function Cm(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Yh([n,r],0),new Yh([i,s],0)]}class Im{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new xm("Invalid padding: ".concat(t));if(n<0)throw new xm("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new xm("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new xm("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Yh.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Yh.fromNumber(n)));return 1===r.compare(Sm)&&(r=new Yh([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=km(e),[n,r]=Cm(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Im(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=km(e),[n,r]=Cm(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class xm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Tm{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Lm.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Tm(Cd.min(),r,new Ff(_d),Sg(),Ag())}}class Lm{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Lm(n,t,Ag(),Ag(),Ag())}}class Pm{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Mm{constructor(e,t){this.targetId=e,this.fe=t}}class Am{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Dm{constructor(){this.ge=0,this.pe=Rm(),this.ye=Gf.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ag(),t=Ag(),n=Ag();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:sd()}})),new Lm(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Rm()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,od(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Nm{constructor(e){this.Le=e,this.ke=new Map,this.qe=Sg(),this.Qe=Om(),this.Ke=new Ff(_d)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:sd()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(eg(i))if(0===n){const e=new Pd(i.path);this.We(t,e,Cp.newNoDocument(e,Cd.min()))}else od(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==_m||_m.tt(function(e,t,n,r,i){var s,o,a,l,u,c;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(c=null===(u=null==d?void 0:d.bits)||void 0===u?void 0:u.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Xf(n).toUint8Array()}catch(e){if(e instanceof Kf)return rd("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Im(s,r,i)}catch(e){return rd(e instanceof xm?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&eg(i.target)){const t=new Pd(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Cp.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Ag();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Tm(e,t,this.Ke,this.qe,n);return this.qe=Sg(),this.Qe=Om(),this.Ke=new Ff(_d),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Dm,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Bf(_d),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||td("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Dm),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Om(){return new Ff(Pd.comparator)}function Rm(){return new Ff(Pd.comparator)}const Um={asc:"ASCENDING",desc:"DESCENDING"},Fm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vm={and:"AND",or:"OR"};class zm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bm(e,t){return e.useProto3Json||nf(t)?t:{value:t}}function jm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function qm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Wm(e,t){return jm(e,t.toTimestamp())}function Km(e){return od(!!e),Cd.fromTimestamp(function(e){const t=Qf(e);return new kd(t.seconds,t.nanos)}(e))}function Gm(e,t){return Hm(e,t).canonicalString()}function Hm(e,t){const n=function(e){return new xd(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Qm(e){const t=xd.fromString(e);return od(mv(t)),t}function Ym(e,t){return Gm(e.databaseId,t.path)}function Xm(e,t){const n=Qm(t);if(n.get(1)!==e.databaseId.projectId)throw new ud(ld.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ud(ld.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Pd(ev(n))}function Zm(e,t){return Gm(e.databaseId,t)}function $m(e){const t=Qm(e);return 4===t.length?xd.emptyPath():ev(t)}function Jm(e){return new xd(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ev(e){return od(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function tv(e,t,n){return{name:Ym(e,t),fields:n.value.mapValue.fields}}function nv(e,t,n){const r=Xm(e,t.name),i=Km(t.updateTime),s=t.createTime?Km(t.createTime):Cd.min(),o=new Sp({mapValue:{fields:t.fields}}),a=Cp.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function rv(e,t){let n;if(t instanceof om)n={update:tv(e,t.key,t.value)};else if(t instanceof hm)n={delete:Ym(e,t.key)};else if(t instanceof am)n={update:tv(e,t.key,t.data),updateMask:gv(t.fieldMask)};else{if(!(t instanceof dm))return sd();n={verify:Ym(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof jg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof qg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Kg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hg)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw sd()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Wm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:sd()}(e,t.precondition)),n}function iv(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?$g.updateTime(Km(e.updateTime)):void 0!==e.exists?$g.exists(e.exists):$g.none()}(t.currentDocument):$g.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)od("REQUEST_TIME"===t.setToServerValue),n=new jg;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new qg(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Kg(e)}else"increment"in t?n=new Hg(e,t.increment):sd();const r=Ld.fromServerFormat(t.fieldPath);return new Xg(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Xm(e,t.update.name),s=new Sp({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Wf(t.map((e=>Ld.fromServerFormat(e))))}(t.updateMask);return new am(i,s,e,n,r)}return new om(i,s,n,r)}if(t.delete){const r=Xm(e,t.delete);return new hm(r,n)}if(t.verify){const r=Xm(e,t.verify);return new dm(r,n)}return sd()}function sv(e,t){return{documents:[Zm(e,t.path)]}}function ov(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Zm(e,i);const s=function(e){if(0!==e.length)return pv(Dp.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:dv(e.field),direction:uv(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Bm(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function av(e){let t=$m(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){od(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=lv(e);return t instanceof Dp&&Rp(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Lp(fv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,nf(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ip(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Ip(n,t)}(n.endAt)),sg(t,i,o,s,a,"F",l,u)}function lv(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=fv(e.unaryFilter.field);return Ap.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=fv(e.unaryFilter.field);return Ap.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=fv(e.unaryFilter.field);return Ap.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=fv(e.unaryFilter.field);return Ap.create(i,"!=",{nullValue:"NULL_VALUE"});default:return sd()}}(e):void 0!==e.fieldFilter?function(e){return Ap.create(fv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sd()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Dp.create(e.compositeFilter.filters.map((e=>lv(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return sd()}}(e.compositeFilter.op))}(e):sd()}function uv(e){return Um[e]}function cv(e){return Fm[e]}function hv(e){return Vm[e]}function dv(e){return{fieldPath:e.canonicalString()}}function fv(e){return Ld.fromServerFormat(e.fieldPath)}function pv(e){return e instanceof Ap?function(e){if("=="===e.op){if(gp(e.value))return{unaryFilter:{field:dv(e.field),op:"IS_NAN"}};if(pp(e.value))return{unaryFilter:{field:dv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(gp(e.value))return{unaryFilter:{field:dv(e.field),op:"IS_NOT_NAN"}};if(pp(e.value))return{unaryFilter:{field:dv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dv(e.field),op:cv(e.op),value:e.value}}}(e):e instanceof Dp?function(e){const t=e.getFilters().map((e=>pv(e)));return 1===t.length?t[0]:{compositeFilter:{op:hv(e.op),filters:t}}}(e):sd()}function gv(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function mv(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class vv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Cd.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Cd.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gf.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new vv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class yv{constructor(e){this.ct=e}}function wv(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:bv(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ym(e,t.key),fields:t.data.value.mapValue.fields,updateTime:jm(e,t.version.toTimestamp()),createTime:jm(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:_v(t.version)};else{if(!t.isUnknownDocument())return sd();r.unknownDocument={path:n.path.toArray(),version:_v(t.version)}}return r}function bv(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function _v(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ev(e){const t=new kd(e.seconds,e.nanoseconds);return Cd.fromTimestamp(t)}function Sv(e,t){const n=(t.baseMutations||[]).map((t=>iv(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>iv(e.ct,t))),i=kd.fromMillis(t.localWriteTimeMs);return new fm(t.batchId,i,n,r)}function kv(e){const t=Ev(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ev(e.lastLimboFreeSnapshotVersion):Cd.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return od(1===e.documents.length),cg(og($m(e.documents[0])))}(e.query):function(e){return cg(av(e))}(e.query),new vv(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Gf.fromBase64String(e.resumeToken))}function Cv(e,t){const n=_v(t.snapshotVersion),r=_v(t.lastLimboFreeSnapshotVersion);let i;i=eg(t.target)?sv(e.ct,t.target):ov(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:$p(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Iv(e){const t=av({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?fg(t,t.limit,"L"):t}function xv(e,t){return new gm(t.largestBatchId,iv(e.ct,t.overlayMutation))}function Tv(e,t){const n=t.path.lastSegment();return[e,of(t.path.popLast()),n]}function Lv(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:_v(r.readTime),documentKey:of(r.documentKey.path),largestBatchId:r.largestBatchId}}class Pv{getBundleMetadata(e,t){return Mv(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Ev(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Mv(e).put(function(e){return{bundleId:e.id,createTime:_v(Km(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Av(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Iv(e.bundledQuery),readTime:Ev(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Av(e).put(function(e){return{name:e.name,readTime:_v(Km(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Mv(e){return Nf(e,"bundles")}function Av(e){return Nf(e,"namedQueries")}class Dv{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Dv(e,n)}getOverlay(e,t){return Nv(e).get(Tv(this.userId,t)).next((e=>e?xv(this.serializer,e):null))}getOverlays(e,t){const n=xg();return qd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new gm(t,i);r.push(this.ht(e,s))})),qd.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(of(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Nv(e).H("collectionPathOverlayIndex",r))})),qd.waitFor(i)}getOverlaysForCollection(e,t,n){const r=xg(),i=of(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Nv(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=xv(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=xg();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nv(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=xv(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Nv(e).put(function(e,t,n){const[r,i,s]=Tv(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:rv(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Nv(e){return Nf(e,"documentOverlays")}class Ov{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Yf(e.integerValue));else if("doubleValue"in e){const n=Yf(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),rf(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Xf(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?yp(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):sd()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),Pd.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Rv(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Uv(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Rv(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ov.bt=new Ov;class Fv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=Uv(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=Uv(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Vv{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class zv{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Bv{constructor(){this.Gt=new Fv,this.zt=new Vv(this.Gt),this.jt=new zv(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class jv{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new jv(this.indexId,this.documentKey,this.arrayValue,n)}}function qv(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Wv(e.arrayValue,t.arrayValue),0!==n?n:(n=Wv(e.directionalValue,t.directionalValue),0!==n?n:Pd.comparator(e.documentKey,t.documentKey)))}function Wv(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Kv{constructor(e){this.Yt=new Bf(((e,t)=>Ld.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(od(e.collectionGroup===this.collectionId),this.en)return!1;const t=Ad(e);if(void 0!==t&&!this.nn(t))return!1;const n=Dd(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Bf(Ld.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Nd(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Nd(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Nd(n.field,"asc"===n.dir?0:1)));return new Md(Md.UNKNOWN_ID,this.collectionId,t,Od.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Gv(e){var t,n;if(od(e instanceof Ap||e instanceof Dp),e instanceof Ap){if(e instanceof Hp){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Ap.create(e.field,"==",t))))||[];return Dp.create(r,"or")}return e}const r=e.filters.map((e=>Gv(e)));return Dp.create(r,e.op)}function Hv(e){if(0===e.getFilters().length)return[];const t=Zv(Gv(e));return od(Xv(t)),Qv(t)||Yv(t)?[t]:t.getFilters()}function Qv(e){return e instanceof Ap}function Yv(e){return e instanceof Dp&&Rp(e)}function Xv(e){return Qv(e)||Yv(e)||function(e){if(e instanceof Dp&&Op(e)){for(const t of e.getFilters())if(!Qv(t)&&!Yv(t))return!1;return!0}return!1}(e)}function Zv(e){if(od(e instanceof Ap||e instanceof Dp),e instanceof Ap)return e;if(1===e.filters.length)return Zv(e.filters[0]);const t=e.filters.map((e=>Zv(e)));let n=Dp.create(t,e.op);return n=ey(n),Xv(n)?n:(od(n instanceof Dp),od(Np(n)),od(n.filters.length>1),n.filters.reduce(((e,t)=>$v(e,t))))}function $v(e,t){let n;return od(e instanceof Ap||e instanceof Dp),od(t instanceof Ap||t instanceof Dp),n=e instanceof Ap?t instanceof Ap?function(e,t){return Dp.create([e,t],"and")}(e,t):Jv(e,t):t instanceof Ap?Jv(t,e):function(e,t){if(od(e.filters.length>0&&t.filters.length>0),Np(e)&&Np(t))return zp(e,t.getFilters());const n=Op(e)?e:t,r=Op(e)?t:e,i=n.filters.map((e=>$v(e,r)));return Dp.create(i,"or")}(e,t),ey(n)}function Jv(e,t){if(Np(t))return zp(t,e.getFilters());{const n=t.filters.map((t=>$v(e,t)));return Dp.create(n,"or")}}function ey(e){if(od(e instanceof Ap||e instanceof Dp),e instanceof Ap)return e;const t=e.getFilters();if(1===t.length)return ey(t[0]);if(Up(e))return e;const n=t.map((e=>ey(e))),r=[];return n.forEach((t=>{t instanceof Ap?r.push(t):t instanceof Dp&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Dp.create(r,e.op)}class ty{constructor(){this._n=new ny}addToCollectionParentIndex(e,t){return this._n.add(t),qd.resolve()}getCollectionParents(e,t){return qd.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return qd.resolve()}deleteFieldIndex(e,t){return qd.resolve()}deleteAllFieldIndexes(e){return qd.resolve()}createTargetIndexes(e,t){return qd.resolve()}getDocumentsMatchingTarget(e,t){return qd.resolve(null)}getIndexType(e,t){return qd.resolve(0)}getFieldIndexes(e,t){return qd.resolve([])}getNextCollectionGroupToUpdate(e){return qd.resolve(null)}getMinOffset(e,t){return qd.resolve(Fd.min())}getMinOffsetFromCollectionGroup(e,t){return qd.resolve(Fd.min())}updateCollectionGroup(e,t,n){return qd.resolve()}updateIndexEntries(e,t){return qd.resolve()}}class ny{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Bf(xd.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Bf(xd.comparator)).toArray()}}const ry=new Uint8Array(0);class iy{constructor(e,t){this.databaseId=t,this.an=new ny,this.un=new _g((e=>$p(e)),((e,t)=>Jp(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:of(r)};return sy(e).put(i)}return qd.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Sd(t),""],!1,!0);return sy(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(uf(r.parent))}return n}))}addFieldIndex(e,t){const n=ay(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=ly(e);return i.next((e=>{n.put(Lv(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=ay(e),r=ly(e),i=oy(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=ay(e),n=oy(e),r=ly(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return qd.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Kv(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=oy(e);let r=!0;const i=new Map;return qd.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Ag();const r=[];return qd.forEach(i,((i,s)=>{td("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat($p(t)));const o=function(e,t){const n=Ad(t);if(void 0===n)return null;for(const r of tg(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Dd(t))for(const t of tg(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Dd(t)){const t=0===i.kind?ng(e,i.fieldPath,e.startAt):rg(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Ip(n,r)}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of Dd(t)){const t=0===i.kind?rg(e,i.fieldPath,e.endAt):ng(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Ip(n,r)}(s,i),c=this.hn(i,s,l),h=this.hn(i,s,u),d=this.Pn(i,s,a),f=this.In(i.indexId,o,c,l.inclusive,h,u.inclusive,d);return qd.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=Pd.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return qd.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Hv(Dp.create(e.filters,"and")).map((t=>Zp(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),u=[];for(let c=0;c<a;++c){const a=t?this.Tn(t[c/l]):ry,h=this.En(e,a,n[c%l],r),d=this.dn(e,a,i[c%l],s),f=o.map((t=>this.En(e,a,t,!0)));u.push(...this.createRange(h,d,f))}return u}En(e,t,n,r){const i=new jv(e,Pd.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new jv(e,Pd.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Kv(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return qd.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Bf(Ld.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Bv;for(const r of Dd(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Ov.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Bv;return Ov.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Bv;return Ov.bt.Pt(hp(this.databaseId,t),n.Ht(function(e){const t=Dd(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Bv);let i=0;for(const s of Dd(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&fp(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Ov.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Bv;n.seed(e.Wt()),Ov.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Ap&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=ay(e),r=ly(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return qd.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Od(t.sequenceNumber,new Fd(Ev(t.readTime),new Pd(uf(t.documentKey)),t.largestBatchId)):Od.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Nd(Ld.fromServerFormat(t),n)}));return new Md(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:_d(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=ay(e),i=ly(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>qd.forEach(t,(t=>i.put(Lv(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return qd.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?qd.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),qd.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?qd.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return oy(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return oy(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=oy(e);let i=new Bf(qv);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new jv(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Bf(qv);const r=this.An(t,e);if(null==r)return n;const i=Ad(t);if(null!=i){const s=e.data.field(i.fieldPath);if(fp(s))for(const i of s.arrayValue.values||[])n=n.add(new jv(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new jv(t.indexId,e.key,ry,r));return n}wn(e,t,n,r,i){td("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=qf(s),l=qf(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=qf(o)):t?(i(a),a=qf(s)):(a=qf(s),l=qf(o))}}(r,i,qv,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),qd.waitFor(s)}gn(e){let t=1;return ly(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>qv(e,t))).filter(((e,t,n)=>!t||0!==qv(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=qv(s,e),i=qv(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,ry,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,ry,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return qv(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(uy)}getMinOffset(e,t){return qd.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||sd())))).next(uy)}}function sy(e){return Nf(e,"collectionParents")}function oy(e){return Nf(e,"indexEntries")}function ay(e){return Nf(e,"indexConfiguration")}function ly(e){return Nf(e,"indexState")}function uy(e){od(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Vd(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Fd(t.readTime,t.documentKey,n)}const cy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hy{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new hy(e,hy.DEFAULT_COLLECTION_PERCENTILE,hy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function dy(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{od(1===a)})));const u=[];for(const c of n.mutations){const e=df(t,c.key.path,n.batchId);s.push(i.delete(e)),u.push(c.key)}return qd.waitFor(s).next((()=>u))}function fy(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw sd();t=e.noDocument}return JSON.stringify(t).length}hy.DEFAULT_COLLECTION_PERCENTILE=10,hy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hy.DEFAULT=new hy(41943040,hy.DEFAULT_COLLECTION_PERCENTILE,hy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hy.DISABLED=new hy(-1,0,0);class py{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){od(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new py(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return my(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=vy(e),s=my(e);return s.add({}).next((o=>{od("number"==typeof o);const a=new fm(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>rv(e.ct,t))),i=n.mutations.map((t=>rv(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let c=new Bf(((e,t)=>_d(e.canonicalString(),t.canonicalString())));for(const e of r){const t=df(this.userId,e.key.path,o);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,ff))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),qd.waitFor(u).next((()=>a))}))}lookupMutationBatch(e,t){return my(e).get(t).next((e=>e?(od(e.userId===this.userId),Sv(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?qd.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return my(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(od(t.batchId>=n),i=Sv(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return my(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return my(e).W("userMutationsIndex",t).next((e=>e.map((e=>Sv(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=hf(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return vy(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,u=uf(a);if(o===this.userId&&t.path.isEqual(u))return my(e).get(l).next((e=>{if(!e)throw sd();od(e.userId===this.userId),i.push(Sv(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bf(_d);const r=[];return t.forEach((t=>{const i=hf(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=vy(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=uf(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),qd.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=hf(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Bf(_d);return vy(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,u=uf(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(l)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(my(e).get(t).next((e=>{if(null===e)throw sd();od(e.userId===this.userId),n.push(Sv(this.serializer,e))})))})),qd.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return dy(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),qd.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return qd.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return vy(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=uf(e[1]);r.push(t)}else n.done()})).next((()=>{od(0===r.length)}))}))}containsKey(e,t){return gy(e,this.userId,t)}xn(e){return yy(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function gy(e,t,n){const r=hf(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return vy(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function my(e){return Nf(e,"mutations")}function vy(e){return Nf(e,"documentMutations")}function yy(e){return Nf(e,"mutationQueues")}class wy{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new wy(0)}static Bn(){return new wy(-1)}}class by{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new wy(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>Cd.fromTimestamp(new kd(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>_y(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(od(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return _y(e).Y(((s,o)=>{const a=kv(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>qd.waitFor(i))).next((()=>r))}forEachTarget(e,t){return _y(e).Y(((e,n)=>{const r=kv(n);t(r)}))}Ln(e){return Ey(e).get("targetGlobalKey").next((e=>(od(null!==e),e)))}kn(e,t){return Ey(e).put("targetGlobalKey",t)}qn(e,t){return _y(e).put(Cv(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=$p(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return _y(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=kv(n);Jp(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Sy(e);return t.forEach((t=>{const s=of(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),qd.waitFor(r)}removeMatchingKeys(e,t,n){const r=Sy(e);return qd.forEach(t,(t=>{const i=of(t.path);return qd.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Sy(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Sy(e);let i=Ag();return r.Y({range:n,J:!0},((e,t,n)=>{const r=uf(e[1]),s=new Pd(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=of(t.path),r=IDBKeyRange.bound([n],[Sd(n)],!1,!0);let i=0;return Sy(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return _y(e).get(t).next((e=>e?kv(e):null))}}function _y(e){return Nf(e,"targets")}function Ey(e){return Nf(e,"targetGlobal")}function Sy(e){return Nf(e,"targetDocuments")}function ky(e,t){let[n,r]=e,[i,s]=t;const o=_d(n,i);return 0===o?_d(r,s):o}class Cy{constructor(e){this.Kn=e,this.buffer=new Bf(ky),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ky(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Iy{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){td("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Qd(e)?td("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await jd(e)}await this.zn(3e5)}))}}class xy{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return qd.resolve(tf._e);const n=new Cy(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(td("LruGarbageCollector","Garbage collection skipped; disabled"),qd.resolve(cy)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(td("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),cy):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(td("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),ed()<=_o.DEBUG&&td("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),qd.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Ty(e,t){return new xy(e,t)}class Ly{constructor(e,t){this.db=e,this.garbageCollector=Ty(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Py(e,n)}removeReference(e,t,n){return Py(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Py(e,t)}er(e,t){return function(e,t){let n=!1;return yy(e).Z((r=>gy(e,r,t).next((e=>(e&&(n=!0),qd.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Cd.min()),Sy(e).delete(function(e){return[0,of(e.path)]}(s)))))}));r.push(t)}})).next((()=>qd.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Py(e,t)}Xn(e,t){const n=Sy(e);let r,i=tf._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==tf._e&&t(new Pd(uf(r)),i),i=l,r=a):i=tf._e})).next((()=>{i!==tf._e&&t(new Pd(uf(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Py(e,t){return Sy(e).put(function(e,t){return{targetId:0,path:of(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class My{constructor(){this.changes=new _g((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qd.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ay{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ry(e).put(n)}removeEntry(e,t,n){return Ry(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],bv(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Cp.newInvalidDocument(t);return Ry(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Uy(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Cp.newInvalidDocument(t)};return Ry(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Uy(t))},((e,r)=>{n={document:this.nr(t,r),size:fy(r)}})).next((()=>n))}getEntries(e,t){let n=Sg();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Sg(),r=new Ff(Pd.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,fy(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return qd.resolve();let r=new Bf(Vy);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Uy(r.first()),Uy(r.last())),s=r.getIterator();let o=s.getNext();return Ry(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=Pd.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Vy(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(Uy(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),bv(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ry(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Sg();for(const i of e){const e=this.nr(Pd.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(vg(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Sg();const s=Fy(t,n),o=Fy(t,Fd.max());return Ry(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(Pd.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Ny(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Oy(e).get("remoteDocumentGlobalKey").next((e=>(od(!!e),e)))}tr(e,t){return Oy(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=nv(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Pd.fromSegments(t.noDocument.path),r=Ev(t.noDocument.readTime);n=Cp.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return sd();{const e=Pd.fromSegments(t.unknownDocument.path),r=Ev(t.unknownDocument.version);n=Cp.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new kd(e[0],e[1]);return Cd.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Cd.min()))return e}return Cp.newInvalidDocument(e)}}function Dy(e){return new Ay(e)}class Ny extends My{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new _g((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Bf(((e,t)=>_d(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=wv(this.ar.serializer,s);r=r.add(i.path.popLast());const l=fy(a);n+=l-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=wv(this.ar.serializer,s.convertToNoDocument(Cd.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),qd.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Oy(e){return Nf(e,"remoteDocumentGlobal")}function Ry(e){return Nf(e,"remoteDocumentsV14")}function Uy(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Fy(e,t){const n=t.documentKey.path.toArray();return[e,bv(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Vy(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=_d(n[s],r[s]),i)return i;return i=_d(n.length,r.length),i||(i=_d(n[n.length-2],r[r.length-2]),i||_d(n[n.length-1],r[r.length-1]))}class zy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class By{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&rm(n.mutation,e,Wf.empty(),kd.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ag()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ag();const r=xg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Cg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=xg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ag())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Sg();const s=Lg(),o=Lg();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof am)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),rm(o.mutation,t,o.mutation.getFieldMask(),kd.now())):s.set(t.key,Wf.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new zy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Lg();let r=new Ff(((e,t)=>e-t)),i=Ag();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Wf.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ag()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,u=Tg();l.forEach((e=>{if(!i.has(e)){const r=tm(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return qd.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Pd.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):qd.resolve(xg());let o=-1,a=i;return s.next((t=>qd.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?qd.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ag()))).next((e=>({batchId:o,changes:Ig(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Pd(t)).next((e=>{let t=Cg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Cg();return this.indexManager.getCollectionParents(e,i).next((o=>qd.forEach(o,(o=>{const a=function(e,t){return new ig(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cp.newInvalidDocument(r)))}));let n=Cg();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&rm(s.mutation,r,Wf.empty(),kd.now()),vg(t,r)&&(n=n.insert(e,r))})),n}))}}class jy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return qd.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Km(e.createTime)}}(t)),qd.resolve()}getNamedQuery(e,t){return qd.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:Iv(e.bundledQuery),readTime:Km(e.readTime)}}(t)),qd.resolve()}}class qy{constructor(){this.overlays=new Ff(Pd.comparator),this.hr=new Map}getOverlay(e,t){return qd.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xg();return qd.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),qd.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),qd.resolve()}getOverlaysForCollection(e,t,n){const r=xg(),i=t.length+1,s=new Pd(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return qd.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Ff(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=xg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return qd.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new gm(t,n));let i=this.hr.get(t);void 0===i&&(i=Ag(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Wy{constructor(){this.Pr=new Bf(Ky.Ir),this.Tr=new Bf(Ky.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Ky(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Ky(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new Pd(new xd([])),n=new Ky(t,e),r=new Ky(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Pd(new xd([])),n=new Ky(t,e),r=new Ky(t,e+1);let i=Ag();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Ky(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ky{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Pd.comparator(e.key,t.key)||_d(e.pr,t.pr)}static Er(e,t){return _d(e.pr,t.pr)||Pd.comparator(e.key,t.key)}}class Gy{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Bf(Ky.Ir)}checkEmpty(e){return qd.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new fm(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Ky(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return qd.resolve(s)}lookupMutationBatch(e,t){return qd.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return qd.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return qd.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return qd.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ky(t,0),r=new Ky(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),qd.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Bf(_d);return t.forEach((e=>{const t=new Ky(e,0),r=new Ky(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),qd.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Pd.isDocumentKey(i)||(i=i.child(""));const s=new Ky(new Pd(i),0);let o=new Bf(_d);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),qd.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){od(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return qd.forEach(t.mutations,(r=>{const i=new Ky(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Ky(t,0),r=this.wr.firstAfterOrEqual(n);return qd.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,qd.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Hy{constructor(e){this.vr=e,this.docs=new Ff(Pd.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qd.resolve(n?n.document.mutableCopy():Cp.newInvalidDocument(t))}getEntries(e,t){let n=Sg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Cp.newInvalidDocument(e))})),qd.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Sg();const s=t.path,o=new Pd(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Vd(Ud(o),n)<=0||(r.has(o.key)||vg(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return qd.resolve(i)}getAllFromCollectionGroup(e,t,n,r){sd()}Fr(e,t){return qd.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Qy(this)}getSize(e){return qd.resolve(this.size)}}class Qy extends My{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),qd.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Yy{constructor(e){this.persistence=e,this.Mr=new _g((e=>$p(e)),Jp),this.lastRemoteSnapshotVersion=Cd.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Wy,this.targetCount=0,this.Br=wy.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),qd.resolve()}getLastRemoteSnapshotVersion(e){return qd.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qd.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),qd.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),qd.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new wy(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,qd.resolve()}updateTargetData(e,t){return this.qn(t),qd.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,qd.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),qd.waitFor(i).next((()=>r))}getTargetCount(e){return qd.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return qd.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),qd.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),qd.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),qd.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return qd.resolve(n)}containsKey(e,t){return qd.resolve(this.Nr.containsKey(t))}}class Xy{constructor(e,t){this.Lr={},this.overlays={},this.kr=new tf(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Yy(this),this.indexManager=new ty,this.remoteDocumentCache=function(e){return new Hy(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new yv(t),this.$r=new jy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Gy(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){td("MemoryPersistence","Starting transaction:",e);const r=new Zy(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return qd.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Zy extends Bd{constructor(e){super(),this.currentSequenceNumber=e}}class $y{constructor(e){this.persistence=e,this.zr=new Wy,this.jr=null}static Hr(e){return new $y(e)}get Jr(){if(this.jr)return this.jr;throw sd()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),qd.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),qd.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),qd.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qd.forEach(this.Jr,(n=>{const r=Pd.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,Cd.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return qd.or([()=>qd.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Jy{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Wd("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cf,{unique:!0}),e.createObjectStore("documentMutations")}(e),ew(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=qd.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ew(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Cd.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",cf,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return qd.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Cf});t.createIndex("collectionPathOverlayIndex",If,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xf,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:pf});t.createIndex("documentKeyIndex",gf),t.createIndex("collectionGroupIndex",mf)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:_f}).createIndex("sequenceNumberIndex",Ef,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Sf}).createIndex("documentKeyIndex",kf,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=fy(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>qd.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>qd.forEach(n,(n=>{od(n.userId===t.userId);const r=Sv(this.serializer,n);return dy(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new xd(n),o=function(e){return[0,of(e)]}(s);r.push(t.get(o).next((n=>n?qd.resolve():(n=>t.put({targetId:0,path:of(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>qd.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:bf});const n=t.store("collectionParents"),r=new ny,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:of(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new xd(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=uf(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=kv(n),i=Cv(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new Pd(xd.fromString(e.document.name).popFirst(5)):e.noDocument?Pd.fromSegments(e.noDocument.path):e.unknownDocument?Pd.fromSegments(e.unknownDocument.path):sd()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>qd.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Dy(this.serializer),i=new Xy($y.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Ag();Sv(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),qd.forEach(n,((e,n)=>{const s=new Zh(n),o=Dv.lt(this.serializer,s),a=i.getIndexManager(s),l=py.lt(s,this.serializer,a,i.referenceDelegate);return new By(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Df(t,tf._e),e).next()}))}))}}function ew(e){e.createObjectStore("targetDocuments",{keyPath:yf}).createIndex("documentTargetsIndex",wf,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vf,{unique:!0}),e.createObjectStore("targetGlobal")}const tw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class nw{constructor(e,t,n,r,i,s,o,a,l,u){let c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!nw.D())throw new ud(ld.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ly(this,r),this.Ti=t+"main",this.serializer=new yv(a),this.Ei=new Kd(this.Ti,this.ui,new Jy(this.serializer)),this.Qr=new by(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Dy(this.serializer),this.$r=new Pv,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&nd("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ud(ld.FAILED_PRECONDITION,tw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new tf(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>iw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Qd(e))return td("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return td("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return rw(e).get("owner").next((e=>qd.resolve(this.Si(e))))}bi(e){return iw(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Nf(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return qd.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?qd.resolve(!0):rw(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new ud(ld.FAILED_PRECONDITION,tw);return!1}}return!(!this.networkEnabled||!this.inForeground)||iw(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&td("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Df(e,tf._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>iw(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return py.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new iy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Dv.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){td("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Af:14===e?Mf:13===e?Pf:12===e?Lf:11===e?Tf:void sd()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new Df(r,this.kr?this.kr.next():tf._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw nd("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new ud(ld.FAILED_PRECONDITION,zd);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return rw(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ud(ld.FAILED_PRECONDITION,tw)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rw(e).put("owner",t)}static D(){return Kd.D()}yi(e){const t=rw(e);return t.get("owner").next((e=>this.Si(e)?(td("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qd.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(nd("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;eo()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return td("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return nd("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(Px){nd("Failed to set zombie client id.",Px)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(Px){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function rw(e){return Nf(e,"owner")}function iw(e){return Nf(e,"clientMetadata")}function sw(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ow{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Ag(),r=Ag();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ow(e,t.fromCache,n,r)}}class aw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lw{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=eo()?8:Kd.v(Js())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new aw;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(ed()<=_o.DEBUG&&td("QueryEngine","SDK will not create cache indexes for query:",mg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),qd.resolve()):(ed()<=_o.DEBUG&&td("QueryEngine","Query:",mg(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(ed()<=_o.DEBUG&&td("QueryEngine","The SDK decides to create cache indexes for query:",mg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cg(t))):qd.resolve())}ji(e,t){if(ag(t))return qd.resolve(null);let n=cg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=fg(t,null,"F"),n=cg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ag(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,fg(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return ag(t)||r.isEqual(Cd.min())?qd.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?qd.resolve(null):(ed()<=_o.DEBUG&&td("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),mg(t)),this.es(e,s,t,Rd(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Bf(wg(e));return t.forEach(((t,r)=>{vg(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return ed()<=_o.DEBUG&&td("QueryEngine","Using full collection scan to execute query:",mg(t)),this.zi.getDocumentsMatchingQuery(e,t,Fd.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class uw{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Ff(_d),this.rs=new _g((e=>$p(e)),Jp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new By(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function cw(e,t,n,r){return new uw(e,t,n,r)}async function hw(e,t){const n=ad(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Ag();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function dw(e){const t=ad(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function fw(e,t,n){let r=Ag(),i=Ag();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Sg();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Cd.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):td("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function pw(e,t){const n=ad(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function gw(e,t){const n=ad(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,qd.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new vv(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function mw(e,t,n){const r=ad(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Qd(e))throw e;td("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function vw(e,t,n){const r=ad(e);let i=Cd.min(),s=Ag();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=ad(e),i=r.rs.get(n);return void 0!==i?qd.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,cg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:Cd.min(),n?s:Ag()))).next((e=>(bw(r,yg(t),e),{documents:e,hs:s})))))}function yw(e,t){const n=ad(e),r=ad(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function ww(e,t){const n=ad(e),r=n.ss.get(t)||Cd.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Rd(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(bw(n,t,e),e)))}function bw(e,t,n){let r=e.ss.get(t)||Cd.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function _w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ag();const r=await gw(e,cg(Iv(t.bundledQuery))),i=ad(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Km(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Gf.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Ew(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Sw(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function kw(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class Cw{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new ud(r.error.code,r.error.message))),s?new Cw(e,t,r.state,i):(nd("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iw{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new ud(n.error.code,n.error.message))),i?new Iw(e,n.state,r):(nd("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xw{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ng();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=sf(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new xw(e,i):(nd("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Tw{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Tw(t.clientId,t.onlineState):(nd("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Lw{constructor(){this.activeTargetIds=Ng()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pw{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ff(_d),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Ew(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Lw),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Ew(this.persistenceKey,n));if(e){const t=xw.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(kw(this.persistenceKey,e));if(n){const r=Iw.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(kw(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return td("SharedClientState","READ",e,t),t}setItem(e,t){td("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){td("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(td("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void nd("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=tf._e;if(null!=e)try{const n=JSON.parse(e);od("number"==typeof n),t=n}catch(e){nd("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==tf._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Cw(this.currentUser,e,t,n),i=Sw(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Sw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=kw(this.persistenceKey,e),i=new Iw(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return xw.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cw.Es(new Zh(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Iw.Es(r,t)}xs(e){return Tw.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);td("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Ng();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Mw{constructor(){this.no=new Lw,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Lw,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Aw{io(e){}shutdown(){}}class Dw{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){td("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){td("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Nw=null;function Ow(){return null===Nw?Nw=268435456+Math.round(2147483648*Math.random()):Nw++,"0x"+Nw.toString(16)}const Rw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Uw{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Fw="WebChannelConnection";class Vw extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Ow(),o=this.bo(e,t.toUriEncodedString());td("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(td("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw rd("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+$h,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Rw[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Ow();return new Promise(((s,o)=>{const a=new Hh;a.setWithCredentials(!0),a.listenOnce(qh.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case jh.NO_ERROR:const t=a.getResponseJson();td(Fw,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case jh.TIMEOUT:td(Fw,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ud(ld.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const n=a.getStatus();if(td(Fw,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ld).indexOf(t)>=0?t:ld.UNKNOWN}(t.status);o(new ud(e,t.message))}else o(new ud(ld.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ud(ld.UNAVAILABLE,"Connection failed."));break;default:sd()}}finally{td(Fw,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);td(Fw,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Ow(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zh(),o=Bh(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=i.join("");td(Fw,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const c=s.createWebChannel(u,a);let h=!1,d=!1;const f=new Uw({lo:t=>{d?td(Fw,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(td(Fw,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),h=!0),td(Fw,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},ho:()=>c.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(c,Gh.EventType.OPEN,(()=>{d||td(Fw,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(c,Gh.EventType.CLOSE,(()=>{d||(d=!0,td(Fw,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(c,Gh.EventType.ERROR,(t=>{d||(d=!0,rd(Fw,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new ud(ld.UNAVAILABLE,"The operation could not be completed")))})),p(c,Gh.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];od(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){td(Fw,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=vm[e];if(void 0!==t)return bm(t)}(t),i=o.message;void 0===n&&(n=ld.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new ud(n,i)),c.close()}else td(Fw,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Wh.STAT_EVENT,(t=>{t.stat===Kh.PROXY?td(Fw,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Kh.NOPROXY&&td(Fw,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function zw(){return"undefined"!=typeof window?window:null}function Bw(){return"undefined"!=typeof document?document:null}function jw(e){return new zm(e,!0)}class qw{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&td("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Ww{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new qw(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===ld.RESOURCE_EXHAUSTED?(nd(t.toString()),nd("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===ld.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new ud(ld.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return td("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(td("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Kw extends Ww{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:sd()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(od(void 0===t||"string"==typeof t),Gf.fromBase64String(t||"")):(od(void 0===t||t instanceof Uint8Array),Gf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ld.UNKNOWN:bm(e.code);return new ud(t,e.message||"")}(o);n=new Am(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xm(e,r.document.name),s=Km(r.document.updateTime),o=r.document.createTime?Km(r.document.createTime):Cd.min(),a=new Sp({mapValue:{fields:r.document.fields}}),l=Cp.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new Pm(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Xm(e,r.document),s=r.readTime?Km(r.readTime):Cd.min(),o=Cp.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Pm([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Xm(e,r.document),s=r.removedTargetIds||[];n=new Pm([],s,i,null)}else{if(!("filter"in t))return sd();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new mm(r,i),o=e.targetId;n=new Mm(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Cd.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Cd.min():t.readTime?Km(t.readTime):Cd.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Jm(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=eg(r)?{documents:sv(e,r)}:{query:ov(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=qm(e,t.resumeToken);const r=Bm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Cd.min())>0){n.readTime=jm(e,t.snapshotVersion.toTimestamp());const r=Bm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sd()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Jm(this.serializer),t.removeTarget=e,this.t_(t)}}class Gw extends Ww{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(od(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(od(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Km(e.updateTime):Km(t);return n.isEqual(Cd.min())&&(n=Km(t)),new Zg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Km(e.commitTime);return this.listener.T_(n,t)}return od(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Jm(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>rv(this.serializer,e)))};this.t_(t)}}class Hw extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new ud(ld.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Hm(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ld.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ud(ld.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Hm(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===ld.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ud(ld.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Qw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(nd(t),this.g_=!1):td("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Yw{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{ib(this)&&(td("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ad(e);t.v_.add(4),await Zw(t),t.x_.set("Unknown"),t.v_.delete(4),await Xw(t)}(this))}))})),this.x_=new Qw(n,r)}}async function Xw(e){if(ib(e))for(const t of e.F_)await t(!0)}async function Zw(e){for(const t of e.F_)await t(!1)}function $w(e,t){const n=ad(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),rb(n)?nb(n):Eb(n).Jo()&&eb(n,t))}function Jw(e,t){const n=ad(e),r=Eb(n);n.C_.delete(t),r.Jo()&&tb(n,t),0===n.C_.size&&(r.Jo()?r.Xo():ib(n)&&n.x_.set("Unknown"))}function eb(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Cd.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Eb(e).c_(t)}function tb(e,t){e.O_.Oe(t),Eb(e).l_(t)}function nb(e){e.O_=new Nm({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Eb(e).start(),e.x_.p_()}function rb(e){return ib(e)&&!Eb(e).Ho()&&e.C_.size>0}function ib(e){return 0===ad(e).v_.size}function sb(e){e.O_=void 0}async function ob(e){e.C_.forEach(((t,n)=>{eb(e,t)}))}async function ab(e,t){sb(e),rb(e)?(e.x_.S_(t),nb(e)):e.x_.set("Unknown")}async function lb(e,t,n){if(e.x_.set("Online"),t instanceof Am&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){td("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ub(e,n)}else if(t instanceof Pm?e.O_.$e(t):t instanceof Mm?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(Cd.min()))try{const t=await dw(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Gf.EMPTY_BYTE_STRING,r.snapshotVersion)),tb(e,t);const i=new vv(r.target,t,n,r.sequenceNumber);eb(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){td("RemoteStore","Failed to raise snapshot:",t),await ub(e,t)}}async function ub(e,t,n){if(!Qd(t))throw t;e.v_.add(1),await Zw(e),e.x_.set("Offline"),n||(n=()=>dw(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{td("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Xw(e)}))}function cb(e,t){return t().catch((n=>ub(e,n,t)))}async function hb(e){const t=ad(e),n=Sb(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;db(t);)try{const e=await pw(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,fb(t,e)}catch(e){await ub(t,e)}pb(t)&&gb(t)}function db(e){return ib(e)&&e.D_.length<10}function fb(e,t){e.D_.push(t);const n=Sb(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function pb(e){return ib(e)&&!Sb(e).Ho()&&e.D_.length>0}function gb(e){Sb(e).start()}async function mb(e){Sb(e).d_()}async function vb(e){const t=Sb(e);for(const n of e.D_)t.I_(n.mutations)}async function yb(e,t,n){const r=e.D_.shift(),i=pm.from(r,t,n);await cb(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await hb(e)}async function wb(e,t){t&&Sb(e).P_&&await async function(e,t){if(function(e){return wm(e)&&e!==ld.ABORTED}(t.code)){const n=e.D_.shift();Sb(e).Zo(),await cb(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await hb(e)}}(e,t),pb(e)&&gb(e)}async function bb(e,t){const n=ad(e);n.asyncQueue.verifyOperationInProgress(),td("RemoteStore","RemoteStore received new credentials");const r=ib(n);n.v_.add(3),await Zw(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Xw(n)}async function _b(e,t){const n=ad(e);t?(n.v_.delete(2),await Xw(n)):t||(n.v_.add(2),await Zw(n),n.x_.set("Unknown"))}function Eb(e){return e.N_||(e.N_=function(e,t,n){const r=ad(e);return r.R_(),new Kw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:ob.bind(null,e),To:ab.bind(null,e),u_:lb.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),rb(e)?nb(e):e.x_.set("Unknown")):(await e.N_.stop(),sb(e))}))),e.N_}function Sb(e){return e.B_||(e.B_=function(e,t,n){const r=ad(e);return r.R_(),new Gw(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:mb.bind(null,e),To:wb.bind(null,e),E_:vb.bind(null,e),T_:yb.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await hb(e)):(await e.B_.stop(),e.D_.length>0&&(td("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class kb{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new cd,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new kb(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ud(ld.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cb(e,t){if(nd("AsyncQueue","".concat(t,": ").concat(e)),Qd(e))return new ud(ld.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ib{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Pd.comparator(t.key,n.key):(e,t)=>Pd.comparator(e.key,t.key),this.keyedMap=Cg(),this.sortedSet=new Ff(this.comparator)}static emptySet(e){return new Ib(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ib))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ib;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class xb{constructor(){this.L_=new Ff(Pd.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):sd():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Tb{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Tb(e,t,Ib.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Lb{constructor(){this.q_=void 0,this.Q_=[]}}class Pb{constructor(){this.queries=new _g((e=>gg(e)),pg),this.onlineState="Unknown",this.K_=new Set}}async function Mb(e,t){const n=ad(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Lb),i)try{s.q_=await n.onListen(r)}catch(e){const n=Cb(e,"Initialization of query '".concat(mg(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.U_(n.onlineState),s.q_&&t.W_(s.q_)&&Ob(n)}async function Ab(e,t){const n=ad(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),i=0===s.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Db(e,t){const n=ad(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Ob(n)}function Nb(e,t,n){const r=ad(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Ob(e){e.K_.forEach((e=>{e.next()}))}class Rb{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Tb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Tb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Ub{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class Fb{constructor(e){this.serializer=e}Ps(e){return Xm(this.serializer,e)}Is(e){return e.metadata.exists?nv(this.serializer,e.document,!1):Cp.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Km(e)}}class Vb{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zb(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=xd.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new Fb(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Ag()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=ad(e);let s=Ag(),o=Sg();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(s=s.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=await gw(i,function(e){return cg(og(xd.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>fw(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new Fb(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await _w(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function zb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Bb{constructor(e){this.key=e}}class jb{constructor(e){this.key=e}}class qb{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Ag(),this.mutatedKeys=Ag(),this.ua=wg(e),this.ca=new Ib(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new xb,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=vg(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(n.track({type:3,doc:c}),f=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),f=!0,(a&&this.ua(c,a)>0||l&&this.ua(c,l)<0)&&(o=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(a||l)&&(o=!0)),f&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:s,Pa:n,Xi:o,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sd()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const o=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new Tb(this.query,e.ca,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new xb,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Ag(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new jb(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Bb(n))})),t}Ra(e){this.oa=e.hs,this.aa=Ag();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Tb.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Wb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Kb{constructor(e){this.key=e,this.ma=!1}}class Gb{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new _g((e=>gg(e)),pg),this.pa=new Map,this.ya=new Set,this.wa=new Ff(Pd.comparator),this.Sa=new Map,this.ba=new Wy,this.Da={},this.Ca=new Map,this.va=wy.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function Hb(e,t){const n=w_(e);let r,i;const s=n.ga.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const e=await gw(n.localStore,cg(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Qb(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&$w(n.remoteStore,e)}return i}async function Qb(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await vw(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return s_(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const s=await vw(e.localStore,t,!0),o=new qb(t,s.hs),a=o.ha(s.documents),l=Lm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,l);s_(e,n,u.da);const c=new Wb(t,n,o);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function Yb(e,t){const n=ad(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!pg(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await mw(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),Jw(n.remoteStore,r.targetId),r_(n,r.targetId)})).catch(jd)):(r_(n,r.targetId),await mw(n.localStore,r.targetId,!0))}async function Xb(e,t){const n=ad(e);try{const e=await function(e,t){const n=ad(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(Gf.EMPTY_BYTE_STRING,Cd.min()).withLastLimboFreeSnapshotVersion(Cd.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,s)&&o.push(n.Qr.updateTargetData(e,u))}));let a=Sg(),l=Ag();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(fw(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(Cd.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return qd.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(od(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?od(r.ma):e.removedDocuments.size>0&&(od(r.ma),r.ma=!1))})),await l_(n,e,t)}catch(e){await jd(e)}}function Zb(e,t,n){const r=ad(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=ad(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Ob(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $b(e,t,n){const r=ad(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),s=i&&i.key;if(s){let e=new Ff(Pd.comparator);e=e.insert(s,Cp.newNoDocument(s,Cd.min()));const n=Ag().add(s),i=new Tm(Cd.min(),new Map,new Ff(_d),e,n);await Xb(r,i),r.wa=r.wa.remove(s),r.Sa.delete(t),a_(r)}else await mw(r.localStore,t,!1).then((()=>r_(r,t,n))).catch(jd)}async function Jb(e,t){const n=ad(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ad(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=qd.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);od(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ag();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);n_(n,r,null),t_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await l_(n,e)}catch(e){await jd(e)}}async function e_(e,t,n){const r=ad(e);try{const e=await function(e,t){const n=ad(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(od(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);n_(r,t,n),t_(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await l_(r,e)}catch(n){await jd(n)}}function t_(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function n_(e,t,n){const r=ad(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function r_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||i_(e,t)}))}function i_(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(Jw(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),a_(e))}function s_(e,t,n){for(const r of n)r instanceof Bb?(e.ba.addReference(r.key,t),o_(e,r)):r instanceof jb?(td("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||i_(e,r.key)):sd()}function o_(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(td("SyncEngine","New document in limbo: "+n),e.ya.add(r),a_(e))}function a_(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new Pd(xd.fromString(t)),r=e.va.next();e.Sa.set(r,new Kb(n)),e.wa=e.wa.insert(n,r),$w(e.remoteStore,new vv(cg(og(n.path)),r,"TargetPurposeLimboResolution",tf._e))}}async function l_(e,t,n){const r=ad(e),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{o.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=ow.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.fa.u_(i),await async function(e,t){const n=ad(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>qd.forEach(t,(t=>qd.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>qd.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Qd(e))throw e;td("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function u_(e,t){const n=ad(e);if(!n.currentUser.isEqual(t)){td("SyncEngine","User change. New user:",t.toKey());const e=await hw(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new ud(ld.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await l_(n,e.us)}}function c_(e,t){const n=ad(e),r=n.Sa.get(t);if(r&&r.ma)return Ag().add(r.key);{let e=Ag();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function h_(e,t){const n=ad(e),r=await vw(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&s_(n,t.targetId,i.da),i}async function d_(e,t){const n=ad(e);return ww(n.localStore,t).then((e=>l_(n,e)))}async function f_(e,t,n,r){const i=ad(e),s=await function(e,t){const n=ad(e),r=ad(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):qd.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await hb(i.remoteStore):"acknowledged"===n||"rejected"===n?(n_(i,t,r||null),t_(i,t),function(e,t){ad(ad(e).mutationQueue).Mn(t)}(i.localStore,t)):sd(),await l_(i,s)):td("SyncEngine","Cannot apply mutation batch with id: "+t)}async function p_(e,t,n){const r=ad(e),i=[],s=[];for(const o of t){let e;const t=r.pa.get(o);if(t&&0!==t.length){e=await gw(r.localStore,cg(t[0]));for(const e of t){const t=r.ga.get(e),n=await h_(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await yw(r.localStore,o);e=await gw(r.localStore,t),await Qb(r,g_(t),o,!1,e.resumeToken)}i.push(e)}return r.fa.u_(s),i}function g_(e){return sg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function m_(e){return function(e){return ad(ad(e).persistence).Li()}(ad(e).localStore)}async function v_(e,t,n,r){const i=ad(e);if(i.Fa)return void td("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await ww(i.localStore,yg(s[0])),r=Tm.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Gf.EMPTY_BYTE_STRING);await l_(i,e,r);break}case"rejected":await mw(i.localStore,t,!0),r_(i,t,r);break;default:sd()}}async function y_(e,t,n){const r=w_(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){td("SyncEngine","Adding an already active target "+e);continue}const t=await yw(r.localStore,e),n=await gw(r.localStore,t);await Qb(r,g_(t),n.targetId,!1,n.resumeToken),$w(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await mw(r.localStore,e,!1).then((()=>{Jw(r.remoteStore,e),r_(r,e)})).catch(jd)}}function w_(e){const t=ad(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=c_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$b.bind(null,t),t.fa.u_=Db.bind(null,t.eventManager),t.fa.xa=Nb.bind(null,t.eventManager),t}function b_(e){const t=ad(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=e_.bind(null,t),t}class __{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=jw(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return cw(this.persistence,new lw,e.initialUser,this.serializer)}createPersistence(e){return new Xy($y.Hr,this.serializer)}createSharedClientState(e){return new Mw}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class E_ extends __{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await b_(this.Na.syncEngine),await hb(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return cw(this.persistence,new lw,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Iy(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ef(t,this.persistence);return new Jd(e.asyncQueue,n)}createPersistence(e){const t=sw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?hy.withCacheSize(this.cacheSizeBytes):hy.DEFAULT;return new nw(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,zw(),Bw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Mw}}class S_ extends E_{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof Pw&&(this.sharedClientState.syncEngine={Zs:f_.bind(null,t),Xs:v_.bind(null,t),eo:y_.bind(null,t),Li:m_.bind(null,t),Ys:d_.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=ad(e);if(w_(n),b_(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await p_(n,e.toArray());n.Fa=!0,await _b(n.remoteStore,!0);for(const r of t)$w(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(r_(n,i),mw(n.localStore,i,!0)))),Jw(n.remoteStore,i)})),await t,await p_(n,e),function(e){const t=ad(e);t.Sa.forEach(((e,n)=>{Jw(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new Ff(Pd.comparator)}(n),n.Fa=!1,await _b(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=zw();if(!Pw.D(t))throw new ud(ld.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=sw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pw(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class k_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Zb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=u_.bind(null,this.syncEngine),await _b(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Pb}createDatastore(e){const t=jw(e.databaseInfo.databaseId),n=function(e){return new Vw(e)}(e.databaseInfo);return function(e,t,n,r){return new Hw(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Yw(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Zb(this.syncEngine,e,0)),Dw.D()?new Dw:new Aw)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Gb(e,t,n,r,i,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=ad(e);td("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Zw(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function C_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class I_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):nd("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class x_{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new cd,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new Ub(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class T_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ud(ld.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=ad(e),r={documents:t.map((e=>Ym(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,xd.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){od(!!t.found),t.found.name,t.found.updateTime;const n=Xm(e,t.found.name),r=Km(t.found.updateTime),i=t.found.createTime?Km(t.found.createTime):Cd.min(),s=new Sp({mapValue:{fields:t.found.fields}});return Cp.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){od(!!t.missing),od(!!t.readTime);const n=Xm(e,t.missing),r=Km(t.readTime);return Cp.newNoDocument(n,r)}(e,t):sd()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());od(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new hm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Pd.fromPath(t);this.mutations.push(new dm(n,this.precondition(n)))})),await async function(e,t){const n=ad(e),r={writes:t.map((e=>rv(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,xd.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw sd();t=Cd.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ud(ld.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Cd.min())?$g.exists(!1):$g.updateTime(t):$g.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Cd.min()))throw new ud(ld.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $g.updateTime(t)}return $g.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class L_{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new qw(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new T_(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!nf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wm(t)}return!1}}class P_{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Zh.UNAUTHENTICATED,this.clientId=bd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{td("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(td("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ud(ld.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cd;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Cb(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function M_(e,t){e.asyncQueue.verifyOperationInProgress(),td("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await hw(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function A_(e,t){e.asyncQueue.verifyOperationInProgress();const n=await N_(e);td("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>bb(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>bb(t.remoteStore,n))),e._onlineComponents=t}function D_(e){return"FirebaseError"===e.name?e.code===ld.FAILED_PRECONDITION||e.code===ld.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function N_(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){td("FirestoreClient","Using user provided OfflineComponentProvider");try{await M_(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!D_(n))throw n;rd("Error using user provided cache. Falling back to memory cache: "+n),await M_(e,new __)}}else td("FirestoreClient","Using default OfflineComponentProvider"),await M_(e,new __);return e._offlineComponents}async function O_(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(td("FirestoreClient","Using user provided OnlineComponentProvider"),await A_(e,e._uninitializedComponentsProvider._online)):(td("FirestoreClient","Using default OnlineComponentProvider"),await A_(e,new k_))),e._onlineComponents}function R_(e){return N_(e).then((e=>e.persistence))}function U_(e){return N_(e).then((e=>e.localStore))}function F_(e){return O_(e).then((e=>e.remoteStore))}function V_(e){return O_(e).then((e=>e.syncEngine))}function z_(e){return O_(e).then((e=>e.datastore))}async function B_(e){const t=await O_(e),n=t.eventManager;return n.onListen=Hb.bind(null,t.syncEngine),n.onUnlisten=Yb.bind(null,t.syncEngine),n}function j_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new cd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new I_({next:s=>{t.enqueueAndForget((()=>Ab(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new ud(ld.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new ud(ld.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Rb(og(n.path),s,{includeMetadataChanges:!0,Z_:!0});return Mb(e,o)}(await B_(e),e.asyncQueue,t,n,r))),r.promise}function q_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new cd;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new I_({next:n=>{t.enqueueAndForget((()=>Ab(e,o))),n.fromCache&&"server"===r.source?i.reject(new ud(ld.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Rb(n,s,{includeMetadataChanges:!0,Z_:!0});return Mb(e,o)}(await B_(e),e.asyncQueue,t,n,r))),r.promise}function W_(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Em().encode(e):e,function(e,t){return new x_(e,t)}(function(e,t){if(e instanceof Uint8Array)return C_(e,t);if(e instanceof ArrayBuffer)return C_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,jw(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=ad(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=ad(e),r=Km(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(zb(r));const i=new Vb(r,e.localStore,t.serializer);let s=await t.Oa();for(;s;){const e=await i.na(s);e&&n._updateProgress(e),s=await t.Oa()}const o=await i.complete();return await l_(e,o.sa,void 0),await function(e,t){const n=ad(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(e){return rd("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await V_(e),i,r)}))}function K_(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const G_=new Map;function H_(e,t,n){if(!n)throw new ud(ld.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Q_(e,t,n,r){if(!0===t&&!0===r)throw new ud(ld.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Y_(e){if(!Pd.isDocumentKey(e))throw new ud(ld.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function X_(e){if(Pd.isDocumentKey(e))throw new ud(ld.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Z_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":sd()}function $_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ud(ld.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Z_(e);throw new ud(ld.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function J_(e,t){if(t<=0)throw new ud(ld.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class eE{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new ud(ld.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ud(ld.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K_(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ud(ld.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ud(ld.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ud(ld.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tE{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ud(ld.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ud(ld.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new dd;switch(e.type){case"firstParty":return new md(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ud(ld.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=G_.get(e);t&&(td("ComponentProvider","Removing Datastore"),G_.delete(e),t.terminate())}(this),Promise.resolve()}}function nE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=$_(e,tE))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&rd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Zh.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ws(JSON.stringify({alg:"none",type:"JWT"})),Ws(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ud(ld.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Zh(s)}e._authCredentials=new fd(new hd(t,n))}}class rE{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new rE(this.firestore,e,this._query)}}class iE{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sE(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new iE(this.firestore,e,this._key)}}class sE extends rE{constructor(e,t,n){super(e,t,og(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new iE(this.firestore,null,new Pd(e))}withConverter(e){return new sE(this.firestore,e,this._path)}}function oE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=go(e),H_("collection","path",t),e instanceof tE){const n=xd.fromString(t,...r);return X_(n),new sE(e,null,n)}{if(!(e instanceof iE||e instanceof sE))throw new ud(ld.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(xd.fromString(t,...r));return X_(n),new sE(e.firestore,null,n)}}function aE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=go(e),1===arguments.length&&(t=bd.newId()),H_("doc","path",t),e instanceof tE){const n=xd.fromString(t,...r);return Y_(n),new iE(e,null,new Pd(n))}{if(!(e instanceof iE||e instanceof sE))throw new ud(ld.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(xd.fromString(t,...r));return Y_(n),new iE(e.firestore,e instanceof sE?e.converter:null,new Pd(n))}}function lE(e,t){return e=go(e),t=go(t),(e instanceof iE||e instanceof sE)&&(t instanceof iE||t instanceof sE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uE(e,t){return e=go(e),t=go(t),e instanceof rE&&t instanceof rE&&e.firestore===t.firestore&&pg(e._query,t._query)&&e.converter===t.converter}class cE{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new qw(this,"async_queue_retry"),this._u=()=>{const e=Bw();e&&td("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Bw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Bw();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new cd;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(Px){if(!Qd(Px))throw Px;td("AsyncQueue","Operation failed with retryable error: "+Px)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw nd("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=kb.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&sd()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function hE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class dE{constructor(){this._progressObserver={},this._taskCompletionResolver=new cd,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fE extends tE{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new cE,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||gE(this),this._firestoreClient.terminate()}}function pE(e){return e._firestoreClient||gE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function gE(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new ep(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,K_(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new P_(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function mE(e,t,n){const r=new cd;return e.asyncQueue.enqueue((async()=>{try{await M_(e,n),await A_(e,t),r.resolve()}catch(e){const n=e;if(!D_(n))throw n;rd("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function vE(e){return function(e){const t=new cd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ad(e);ib(n.remoteStore)||td("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ad(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=Cb(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await V_(e),t))),t.promise}(pE(e=$_(e,fE)))}function yE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await R_(e),n=await F_(e);return t.setNetworkEnabled(!0),function(e){const t=ad(e);return t.v_.delete(0),Xw(t)}(n)}))}(pE(e=$_(e,fE)))}function wE(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await R_(e),n=await F_(e);return t.setNetworkEnabled(!1),async function(e){const t=ad(e);t.v_.add(0),await Zw(t),t.x_.set("Offline")}(n)}))}(pE(e=$_(e,fE)))}function bE(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ad(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await U_(e),t)))}(pE(e=$_(e,fE)),t).then((t=>t?new rE(e,null,t.query):null))}function _E(e){if(e._initialized||e._terminated)throw new ud(ld.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class EE{constructor(e){this._byteString=e}static fromBase64String(e){try{return new EE(Gf.fromBase64String(e))}catch(e){throw new ud(ld.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new EE(Gf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class SE{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ud(ld.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ld(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kE{constructor(e){this._methodName=e}}class CE{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ud(ld.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ud(ld.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _d(this._lat,e._lat)||_d(this._long,e._long)}}const IE=/^__.*__$/;class xE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new am(e,this.data,this.fieldMask,t,this.fieldTransforms):new om(e,this.data,t,this.fieldTransforms)}}class TE{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new am(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sd()}}class PE{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new PE(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return XE(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(LE(this.du)&&IE.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class ME{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jw(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new PE({du:e,methodName:t,wu:n,path:Ld.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function AE(e){const t=e._freezeSettings(),n=jw(e._databaseId);return new ME(e._databaseId,!!t.ignoreUndefinedProperties,n)}function DE(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Su(s.merge||s.mergeFields?2:0,t,n,i);GE("Data must be an object, but it was:",o,r);const a=WE(r,o);let l,u;if(s.merge)l=new Wf(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=HE(t,r,n);if(!o.contains(i))throw new ud(ld.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));ZE(e,i)||e.push(i)}l=new Wf(e),u=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=o.fieldTransforms;return new xE(new Sp(a),l,u)}class NE extends kE{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof NE}}function OE(e,t,n){return new PE({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class RE extends kE{_toFieldTransform(e){return new Xg(e.path,new jg)}isEqual(e){return e instanceof RE}}class UE extends kE{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=OE(this,e,!0),n=this.bu.map((e=>qE(e,t))),r=new qg(n);return new Xg(e.path,r)}isEqual(e){return e instanceof UE&&oo(this.bu,e.bu)}}class FE extends kE{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=OE(this,e,!0),n=this.bu.map((e=>qE(e,t))),r=new Kg(n);return new Xg(e.path,r)}isEqual(e){return e instanceof FE&&oo(this.bu,e.bu)}}class VE extends kE{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Hg(e.serializer,Ug(e.serializer,this.Du));return new Xg(e.path,t)}isEqual(e){return e instanceof VE&&this.Du===e.Du}}function zE(e,t,n,r){const i=e.Su(1,t,n);GE("Data must be an object, but it was:",i,r);const s=[],o=Sp.empty();Rf(r,((e,r)=>{const a=YE(t,e,n);r=go(r);const l=i.fu(a);if(r instanceof NE)s.push(a);else{const e=qE(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Wf(s);return new TE(o,a,i.fieldTransforms)}function BE(e,t,n,r,i,s){const o=e.Su(1,t,n),a=[HE(t,r,n)],l=[i];if(s.length%2!=0)throw new ud(ld.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(HE(t,s[d])),l.push(s[d+1]);const u=[],c=Sp.empty();for(let d=a.length-1;d>=0;--d)if(!ZE(u,a[d])){const e=a[d];let t=l[d];t=go(t);const n=o.fu(e);if(t instanceof NE)u.push(e);else{const r=qE(t,n);null!=r&&(u.push(e),c.set(e,r))}}const h=new Wf(u);return new TE(c,h,o.fieldTransforms)}function jE(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return qE(n,e.Su(r?4:3,t))}function qE(e,t){if(KE(e=go(e)))return GE("Unsupported field value:",t,e),WE(e,t);if(e instanceof kE)return function(e,t){if(!LE(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=qE(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=go(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ug(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=kd.fromDate(e);return{timestampValue:jm(t.serializer,n)}}if(e instanceof kd){const n=new kd(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jm(t.serializer,n)}}if(e instanceof CE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof EE)return{bytesValue:qm(t.serializer,e._byteString)};if(e instanceof iE){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Gm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Z_(e)))}(e,t)}function WE(e,t){const n={};return Uf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Rf(e,((e,r)=>{const i=qE(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function KE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kd||e instanceof CE||e instanceof EE||e instanceof iE||e instanceof kE)}function GE(e,t,n){if(!KE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Z_(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function HE(e,t,n){if((t=go(t))instanceof SE)return t._internalPath;if("string"==typeof t)return YE(e,t);throw XE("Field path arguments must be of type string or ",e,!1,void 0,n)}const QE=new RegExp("[~\\*/\\[\\]]");function YE(e,t,n){if(t.search(QE)>=0)throw XE("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new SE(...t.split("."))._internalPath}catch(Wa){throw XE("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function XE(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new ud(ld.INVALID_ARGUMENT,a+e+l)}function ZE(e,t){return e.some((e=>e.isEqual(t)))}class $E{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new iE(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JE extends $E{data(){return super.data()}}function eS(e,t){return"string"==typeof t?YE(e,t):t instanceof SE?t._internalPath:t._delegate._internalPath}function tS(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ud(ld.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nS{}class rS extends nS{}function iS(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof nS&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof oS)).length,n=e.filter((e=>e instanceof sS)).length;if(t>1||t>0&&n>0)throw new ud(ld.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class sS extends rS{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sS(e,t,n)}_apply(e){const t=this._parse(e);return pS(e._query,t),new rE(e.firestore,e.converter,dg(e._query,t))}_parse(e){const t=AE(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ud(ld.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){fS(o,s);const t=[];for(const n of o)t.push(dS(r,e,n));a={arrayValue:{values:t}}}else a=dS(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||fS(o,s),a=jE(n,t,o,"in"===s||"not-in"===s);return Ap.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class oS extends nS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new oS(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Dp.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)pS(n,i),n=dg(n,i)}(e._query,t),new rE(e.firestore,e.converter,dg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class aS extends rS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new aS(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new ud(ld.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ud(ld.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lp(t,n)}(e._query,this._field,this._direction);return new rE(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new ig(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class lS extends rS{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new lS(e,t,n)}_apply(e){return new rE(e.firestore,e.converter,fg(e._query,this._limit,this._limitType))}}class uS extends rS{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new uS(e,t,n)}_apply(e){const t=hS(e,this.type,this._docOrFields,this._inclusive);return new rE(e.firestore,e.converter,function(e,t){return new ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class cS extends rS{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new cS(e,t,n)}_apply(e){const t=hS(e,this.type,this._docOrFields,this._inclusive);return new rE(e.firestore,e.converter,function(e,t){return new ig(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function hS(e,t,n,r){if(n[0]=go(n[0]),n[0]instanceof $E)return function(e,t,n,r,i){if(!r)throw new ud(ld.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of ug(e))if(o.field.isKeyField())s.push(hp(t,r.key));else{const e=r.data.field(o.field);if(Zf(e))throw new ud(ld.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new ud(ld.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Ip(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=AE(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new ud(ld.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new ud(ld.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!lg(e)&&-1!==s.indexOf("/"))throw new ud(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(xd.fromString(s));if(!Pd.isDocumentKey(n))throw new ud(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new Pd(n);a.push(hp(t,i))}else{const e=jE(n,r,s);a.push(e)}}return new Ip(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function dS(e,t,n){if("string"==typeof(n=go(n))){if(""===n)throw new ud(ld.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lg(t)&&-1!==n.indexOf("/"))throw new ud(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(xd.fromString(n));if(!Pd.isDocumentKey(r))throw new ud(ld.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return hp(e,new Pd(r))}if(n instanceof iE)return hp(e,n._key);throw new ud(ld.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Z_(n),"."))}function fS(e,t){if(!Array.isArray(e)||0===e.length)throw new ud(ld.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function pS(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ud(ld.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ud(ld.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class gS{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yf(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw sd()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Rf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new CE(Yf(e.latitude),Yf(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=$f(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Jf(e));default:return null}}convertTimestamp(e){const t=Qf(e);return new kd(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=xd.fromString(e);od(mv(n));const r=new tp(n.get(1),n.get(3)),i=new Pd(n.popFirst(5));return r.isEqual(t)||nd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function mS(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class vS extends gS{constructor(e){super(),this.firestore=e}convertBytes(e){return new EE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new iE(this.firestore,null,t)}}class yS{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wS extends $E{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new bS(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(eS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class bS extends wS{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class _S{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yS(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new bS(this._firestore,this._userDataWriter,n.key,n,new yS(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ud(ld.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new bS(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yS(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new bS(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yS(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ES(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ES(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sd()}}function SS(e,t){return e instanceof wS&&t instanceof wS?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _S&&t instanceof _S&&e._firestore===t._firestore&&uE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class kS extends gS{constructor(e){super(),this.firestore=e}convertBytes(e){return new EE(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new iE(this.firestore,null,t)}}function CS(e){e=$_(e,iE);const t=$_(e.firestore,fE),n=pE(t),r=new kS(t);return function(e,t){const n=new cd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=ad(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new ud(ld.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Cb(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await U_(e),t,n))),n.promise}(n,e._key).then((n=>new wS(t,r,e._key,n,new yS(null!==n&&n.hasLocalMutations,!0),e.converter)))}function IS(e){e=$_(e,rE);const t=$_(e.firestore,fE),n=pE(t),r=new kS(t);return function(e,t){const n=new cd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await vw(e,t,!0),i=new qb(t,r.hs),s=i.ha(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Cb(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await U_(e),t,n))),n.promise}(n,e._query).then((n=>new _S(t,r,e,n)))}function xS(e,t,n){e=$_(e,iE);const r=$_(e.firestore,fE),i=mS(e.converter,t,n);return MS(r,[DE(AE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,$g.none())])}function TS(e,t,n){e=$_(e,iE);const r=$_(e.firestore,fE),i=AE(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=go(t))||t instanceof SE?BE(i,"updateDoc",e._key,t,n,a):zE(i,"updateDoc",e._key,t),MS(r,[s.toMutation(e._key,$g.exists(!0))])}function LS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=go(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||hE(n[l])||(a=n[l],l++);const u={includeMetadataChanges:a.includeMetadataChanges};if(hE(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let c,h,d;if(e instanceof iE)h=$_(e.firestore,fE),d=og(e._key.path),c={next:t=>{n[l]&&n[l](AS(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=$_(e,rE);h=$_(t.firestore,fE),d=t._query;const r=new kS(h);c={next:e=>{n[l]&&n[l](new _S(h,r,t,e))},error:n[l+1],complete:n[l+2]},tS(e._query)}return function(e,t,n,r){const i=new I_(r),s=new Rb(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Mb(await B_(e),s))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Ab(await B_(e),s)))}}(pE(h),d,u,c)}function PS(e,t){return function(e,t){const n=new I_(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ad(e).K_.add(t),t.next()}(await B_(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ad(e).K_.delete(t)}(await B_(e),n)))}}(pE(e=$_(e,fE)),hE(t)?t:{next:t})}function MS(e,t){return function(e,t){const n=new cd;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=b_(e);try{const e=await function(e,t){const n=ad(e),r=kd.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ag());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Sg(),l=Ag();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=im(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new am(e.key,t,kp(t.value.mapValue),$g.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ig(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Ff(_d)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await l_(r,e.changes),await hb(r.remoteStore)}catch(e){const t=Cb(e,"Failed to persist write");n.reject(t)}}(await V_(e),t,n))),n.promise}(pE(e),t)}function AS(e,t,n){const r=n.docs.get(t._key),i=new kS(e);return new wS(e,i,t._key,r,new yS(n.hasPendingWrites,n.fromCache),t.converter)}const DS={maxAttempts:5};class NS{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=AE(e)}set(e,t,n){this._verifyNotCommitted();const r=OS(e,this._firestore),i=mS(r.converter,t,n),s=DE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,$g.none())),this}update(e,t,n){this._verifyNotCommitted();const r=OS(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=go(t))||t instanceof SE?BE(this._dataReader,"WriteBatch.update",r._key,t,n,o):zE(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,$g.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=OS(e,this._firestore);return this._mutations=this._mutations.concat(new hm(t._key,$g.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ud(ld.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function OS(e,t){if((e=go(e)).firestore!==t)throw new ud(ld.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class RS extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=AE(e)}get(e){const t=OS(e,this._firestore),n=new vS(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return sd();const r=e[0];if(r.isFoundDocument())return new $E(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new $E(this._firestore,n,t._key,null,t.converter);throw sd()}))}set(e,t,n){const r=OS(e,this._firestore),i=mS(r.converter,t,n),s=DE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=OS(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=go(t))||t instanceof SE?BE(this._dataReader,"Transaction.update",r._key,t,n,o):zE(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=OS(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=OS(e,this._firestore),n=new kS(this._firestore);return super.get(e).then((e=>new wS(this._firestore,n,t._key,e._document,new yS(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){$h=e}(oa),ea(new mo("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new fE(new pd(e.getProvider("auth-internal")),new yd(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ud(ld.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tp(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ha(Xh,"4.4.3",e),ha(Xh,"4.4.3","esm2017")}();function US(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ud("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function FS(){if("undefined"===typeof Uint8Array)throw new ud("unimplemented","Uint8Arrays are not available in this environment.")}function VS(){if("undefined"==typeof atob)throw new ud("unimplemented","Blobs are unavailable in Firestore in this environment.")}class zS{constructor(e){this._delegate=e}static fromBase64String(e){return VS(),new zS(EE.fromBase64String(e))}static fromUint8Array(e){return FS(),new zS(EE.fromUint8Array(e))}toBase64(){return VS(),this._delegate.toBase64()}toUint8Array(){return FS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function BS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class jS{enableIndexedDbPersistence(e,t){return function(e,t){_E(e=$_(e,fE));const n=pE(e);if(n._uninitializedComponentsProvider)throw new ud(ld.FAILED_PRECONDITION,"SDK cache is already specified.");rd("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new k_;return mE(n,i,new E_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){_E(e=$_(e,fE));const t=pE(e);if(t._uninitializedComponentsProvider)throw new ud(ld.FAILED_PRECONDITION,"SDK cache is already specified.");rd("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new k_;return mE(t,r,new S_(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new ud(ld.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new cd;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Kd.D())return Promise.resolve();const t=e+"main";await Kd.delete(t)}(sw(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class qS{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof tp||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||rd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};nE(this._delegate,e,t,n)}enableNetwork(){return yE(this._delegate)}disableNetwork(){return wE(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Q_("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return vE(this._delegate)}onSnapshotsInSync(e){return PS(this._delegate,e)}get app(){if(!this._appCompat)throw new ud("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rk(this,oE(this._delegate,e))}catch(Px){throw YS(Px,"collection()","Firestore.collection()")}}doc(e){try{return new QS(this,aE(this._delegate,e))}catch(Px){throw YS(Px,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ek(this,function(e,t){if(e=$_(e,tE),H_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ud(ld.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new rE(e,null,function(e){return new ig(xd.emptyPath(),e)}(t))}(this._delegate,e))}catch(Px){throw YS(Px,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=$_(e,fE);const r=Object.assign(Object.assign({},DS),n);return function(e){if(e.maxAttempts<1)throw new ud(ld.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new cd;return e.asyncQueue.enqueueAndForget((async()=>{const i=await z_(e);new L_(e.asyncQueue,i,n,t,r).ja()})),r.promise}(pE(e),(n=>t(new RS(e,n))),r)}(this._delegate,(t=>e(new KS(this,t))))}batch(){return pE(this._delegate),new GS(new NS(this._delegate,(e=>MS(this._delegate,e))))}loadBundle(e){return function(e,t){const n=pE(e=$_(e,fE)),r=new dE;return W_(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return bE(this._delegate,e).then((e=>e?new ek(this,e):null))}}class WS extends gS{constructor(e){super(),this.firestore=e}convertBytes(e){return new zS(new EE(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return QS.forKey(t,this.firestore,null)}}class KS{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new WS(e)}get(e){const t=ik(e);return this._delegate.get(t).then((e=>new $S(this._firestore,new wS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=ik(e);return n?(US("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=ik(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=ik(e);return this._delegate.delete(t),this}}class GS{constructor(e){this._delegate=e}set(e,t,n){const r=ik(e);return n?(US("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=ik(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=ik(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class HS{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new bS(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new JS(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=HS.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new HS(e,new WS(e),t),r.set(t,i)),i}}HS.INSTANCES=new WeakMap;class QS{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WS(e)}static forPath(e,t,n){if(e.length%2!==0)throw new ud("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new QS(t,new iE(t._delegate,n,new Pd(e)))}static forKey(e,t,n){return new QS(t,new iE(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new rk(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rk(this.firestore,oE(this._delegate,e))}catch(Px){throw YS(Px,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=go(e))instanceof iE&&lE(this._delegate,e)}set(e,t){t=US("DocumentReference.set",t);try{return t?xS(this._delegate,e,t):xS(this._delegate,e)}catch(Px){throw YS(Px,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?TS(this._delegate,e):TS(this._delegate,e,t,...r)}catch(Px){throw YS(Px,"updateDoc()","DocumentReference.update()")}}delete(){return MS($_((e=this._delegate).firestore,fE),[new hm(e._key,$g.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=XS(t),i=ZS(t,(e=>new $S(this.firestore,new wS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return LS(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?CS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$_(e,iE);const t=$_(e.firestore,fE);return j_(pE(t),e._key,{source:"server"}).then((n=>AS(t,e,n)))}(this._delegate):function(e){e=$_(e,iE);const t=$_(e.firestore,fE);return j_(pE(t),e._key).then((n=>AS(t,e,n)))}(this._delegate),t.then((e=>new $S(this.firestore,new wS(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new QS(this.firestore,e?this._delegate.withConverter(HS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function YS(e,t,n){return e.message=e.message.replace(t,n),e}function XS(e){for(const t of e)if("object"===typeof t&&!BS(t))return t;return{}}function ZS(e,t){var n,r;let i;return i=BS(e[0])?e[0]:BS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $S{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new QS(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return SS(this._delegate,e._delegate)}}class JS extends $S{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||sd(),t}}class ek{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new WS(e)}where(e,t,n){try{return new ek(this.firestore,iS(this._delegate,function(e,t,n){const r=t,i=eS("where",e);return sS._create(i,r,n)}(e,t,n)))}catch(Px){throw YS(Px,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ek(this.firestore,iS(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=eS("orderBy",e);return aS._create(n,t)}(e,t)))}catch(Px){throw YS(Px,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ek(this.firestore,iS(this._delegate,(J_("limit",t=e),lS._create("limit",t,"F"))))}catch(t){throw YS(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new ek(this.firestore,iS(this._delegate,(J_("limitToLast",t=e),lS._create("limitToLast",t,"L"))))}catch(t){throw YS(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new ek(this.firestore,iS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uS._create("startAt",t,!0)}(...arguments)))}catch(Px){throw YS(Px,"startAt()","Query.startAt()")}}startAfter(){try{return new ek(this.firestore,iS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return uS._create("startAfter",t,!1)}(...arguments)))}catch(Px){throw YS(Px,"startAfter()","Query.startAfter()")}}endBefore(){try{return new ek(this.firestore,iS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cS._create("endBefore",t,!1)}(...arguments)))}catch(Px){throw YS(Px,"endBefore()","Query.endBefore()")}}endAt(){try{return new ek(this.firestore,iS(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cS._create("endAt",t,!0)}(...arguments)))}catch(Px){throw YS(Px,"endAt()","Query.endAt()")}}isEqual(e){return uE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?IS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$_(e,rE);const t=$_(e.firestore,fE),n=pE(t),r=new kS(t);return q_(n,e._query,{source:"server"}).then((n=>new _S(t,r,e,n)))}(this._delegate):function(e){e=$_(e,rE);const t=$_(e.firestore,fE),n=pE(t),r=new kS(t);return tS(e._query),q_(n,e._query).then((n=>new _S(t,r,e,n)))}(this._delegate),t.then((e=>new nk(this.firestore,new _S(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=XS(t),i=ZS(t,(e=>new nk(this.firestore,new _S(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return LS(this._delegate,r,i)}withConverter(e){return new ek(this.firestore,e?this._delegate.withConverter(HS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class tk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new JS(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class nk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ek(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new JS(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new tk(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new JS(this._firestore,n))}))}isEqual(e){return SS(this._delegate,e._delegate)}}class rk extends ek{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new QS(this.firestore,e):null}doc(e){try{return new QS(this.firestore,void 0===e?aE(this._delegate):aE(this._delegate,e))}catch(Px){throw YS(Px,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=$_(e.firestore,fE),r=aE(e),i=mS(e.converter,t);return MS(n,[DE(AE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,$g.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new QS(this.firestore,e)))}isEqual(e){return lE(this._delegate,e._delegate)}withConverter(e){return new rk(this.firestore,e?this._delegate.withConverter(HS.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ik(e){return $_(e,iE)}class sk{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new SE(...t)}static documentId(){return new sk(Ld.keyField().canonicalString())}isEqual(e){return(e=go(e))instanceof SE&&this._delegate._internalPath.isEqual(e._internalPath)}}class ok{constructor(e){this._delegate=e}static serverTimestamp(){const e=new RE("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new ok(e)}static delete(){const e=new NE("deleteField");return e._methodName="FieldValue.delete",new ok(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new UE("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new ok(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new FE("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new ok(e)}static increment(e){const t=new VE("increment",e);return t._methodName="FieldValue.increment",new ok(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ak={Firestore:qS,GeoPoint:CE,Timestamp:kd,Blob:zS,Transaction:KS,WriteBatch:GS,DocumentReference:QS,DocumentSnapshot:$S,Query:ek,QueryDocumentSnapshot:JS,QuerySnapshot:nk,CollectionReference:rk,FieldPath:sk,FieldValue:ok,setLogLevel:function(e){var t;t=e,Jh.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var lk;(function(e,t){e.INTERNAL.registerComponent(new mo("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ak)))})(lk=Pa,((e,t)=>new qS(e,t,new jS))),lk.registerVersion("@firebase/firestore-compat","0.3.26");Pa.initializeApp({apiKey:"AIzaSyApqxmExbGqE8ejAxDlLA0rV7ccN7fUsdA",authDomain:"maps-react-app-84ddd.firebaseapp.com",projectId:"maps-react-app-84ddd",storageBucket:"maps-react-app-84ddd.appspot.com",messagingSenderId:"688383032028",appId:"1:688383032028:web:82c59783c4b8791ea6d219"});const uk=Pa.firestore(),ck=()=>{const e=Ze(),{isAuth:t,email:n}=function(){const{email:e,token:t,id:n}=$e((e=>e.user));return{isAuth:!!e,email:e,token:t,id:n}}(),[i,s]=(0,r.useState)([]);(0,r.useEffect)((()=>{const e=uk.collection("quests").onSnapshot((e=>{const t=e.docs.sort(((e,t)=>e.data().timestamp-t.data().timestamp)).map((e=>(console.log(e.data()),{id:e.id,lat:e.data().location.lat||0,lng:e.data().location.lng||0})));s(t)}));return()=>e()}),[]);const o=()=>{i.forEach((e=>{uk.collection("quests").doc(e.id).delete().then((()=>{console.log("Marker deleted from Firestore")})).catch((e=>{console.error("Error deleting marker from Firestore: ",e)}))})),s([])};return t?(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("h1",{children:"Welcome"}),(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("h1",{children:"Map App"}),(0,Wn.jsx)(zs,{markers:i,onMapClick:e=>{const t=e.latLng;if(t){const e={lat:t.lat(),lng:t.lng()};uk.collection("quests").add({location:e,timestamp:+(new Date).getTime()}).then((e=>{console.log("New quest added with ID: ",e.id)})).catch((e=>{console.error("Error adding new quest: ",e)}))}},onMarkerDragEnd:(e,t)=>{const n=t.latLng;if(n){const t=i.map(((t,r)=>r===e?{id:"",lat:n.lat(),lng:n.lng()}:t));s(t)}},onDeleteAllMarkers:o,deleteOneMarker:e=>{const t=[...i];t.splice(e,1),s(t)}})]}),(0,Wn.jsx)("button",{onClick:o,children:"Delete all markers"}),(0,Wn.jsxs)("button",{onClick:()=>e(jn()),children:["Log out from ",n]})]}):(0,Wn.jsxs)(Wn.Fragment,{children:[(0,Wn.jsx)("h1",{children:"Home"}),(0,Wn.jsx)(Ce,{to:"/login",children:"login"})]})};function hk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function dk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fk=dk,pk=new ro("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),gk=new Io("@firebase/auth");function mk(e){if(gk.logLevel<=_o.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gk.error("Auth (".concat(oa,"): ").concat(e),...n)}}function vk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw bk(e,...n)}function yk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return bk(e,...n)}function wk(e,t,n){const r=Object.assign(Object.assign({},fk()),{[t]:n});return new ro("auth","Firebase",r).create(t,{appName:e.name})}function bk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return pk.create(e,...n)}function _k(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw bk(t,...r)}}function Ek(e){const t="INTERNAL ASSERTION FAILED: "+e;throw mk(t),new Error(t)}function Sk(e,t){e||Ek(t)}function kk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Ck(){return"http:"===Ik()||"https:"===Ik()}function Ik(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function xk(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Ck()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Tk{constructor(e,t){this.shortDelay=e,this.longDelay=t,Sk(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Js())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return xk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Lk(e,t){Sk(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Pk{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Ek("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Ek("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Ek("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Mk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ak=new Tk(3e4,6e4);function Dk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Nk(e,t,n,r){return Ok(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=lo(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Pk.fetch()(Uk(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Ok(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Mk),t);try{const t=new Vk(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw zk(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw zk(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw zk(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw zk(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw wk(e,a,o);vk(e,a)}}catch(Px){if(Px instanceof no)throw Px;vk(e,"network-request-failed",{message:String(Px)})}}async function Rk(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Nk(e,t,n,r,i);return"mfaPendingCredential"in s&&vk(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Uk(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Lk(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Fk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(yk(this.auth,"network-request-failed"))),Ak.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function zk(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yk(e,t,r);return i.customData._tokenResponse=n,i}function Bk(e){return void 0!==e&&void 0!==e.enterprise}class jk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fk(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function qk(e,t){return Nk(e,"GET","/v2/recaptchaConfig",Dk(e,t))}function Wk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Px){}}function Kk(e){return 1e3*Number(e)}function Gk(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return mk("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ks(n);return e?JSON.parse(e):(mk("Failed to decode base64 JWT payload"),null)}catch(Px){return mk("Caught error parsing JWT payload as JSON",null===Px||void 0===Px?void 0:Px.toString()),null}}async function Hk(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Px){throw Px instanceof no&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Px)&&e.auth.currentUser===e&&await e.auth.signOut(),Px}}class Qk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Px){return void((null===Px||void 0===Px?void 0:Px.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Yk{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wk(this.lastLoginAt),this.creationTime=Wk(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xk(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Hk(e,async function(e,t){return Nk(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));_k(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=hk(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),c=!!l&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yk(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,h)}class Zk{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_k(e.idToken,"internal-error"),_k("undefined"!==typeof e.idToken,"internal-error"),_k("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Gk(e);return _k(t,"internal-error"),_k("undefined"!==typeof t.exp,"internal-error"),_k("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _k(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Ok(e,{},(async()=>{const n=lo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Uk(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Pk.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Zk;return n&&(_k("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(_k("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(_k("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zk,this.toJSON())}_performRefresh(){return Ek("not implemented")}}function $k(e,t){_k("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Jk{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=hk(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Yk(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Hk(this,this.stsTokenManager.getToken(this.auth,e));return _k(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=go(e),r=await n.getIdToken(t),i=Gk(r);_k(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wk(Kk(i.auth_time)),issuedAtTime:Wk(Kk(i.iat)),expirationTime:Wk(Kk(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=go(e);await Xk(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_k(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Jk(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_k(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xk(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Hk(this,async function(e,t){return Nk(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;_k(y&&E,e,"internal-error");const S=Zk.fromJSON(this.name,E);_k("string"===typeof y,e,"internal-error"),$k(c,e.name),$k(h,e.name),_k("boolean"===typeof w,e,"internal-error"),_k("boolean"===typeof b,e,"internal-error"),$k(d,e.name),$k(f,e.name),$k(p,e.name),$k(g,e.name),$k(m,e.name),$k(v,e.name);const k=new Jk({uid:y,auth:e,email:h,emailVerified:w,displayName:c,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(k.providerData=_.map((e=>Object.assign({},e)))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zk;r.updateFromServerResponse(t);const i=new Jk({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xk(i),i}}const eC=new Map;function tC(e){Sk(e instanceof Function,"Expected a class definition");let t=eC.get(e);return t?(Sk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,eC.set(e,t),t)}class nC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nC.type="NONE";const rC=nC;function iC(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class sC{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=iC(this.userKey,r.apiKey,i),this.fullPersistenceKey=iC("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jk._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new sC(tC(rC),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||tC(rC);const s=iC(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const t=await u._get(s);if(t){const n=Jk._fromJSON(e,t);u!==i&&(o=n),i=u;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new sC(i,e,n)):new sC(i,e,n)}}function oC(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cC(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aC(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dC(t))return"Blackberry";if(fC(t))return"Webos";if(lC(t))return"Safari";if((t.includes("chrome/")||uC(t))&&!t.includes("edge/"))return"Chrome";if(hC(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function aC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/firefox\//i.test(e)}function lC(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/crios\//i.test(e)}function cC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/iemobile/i.test(e)}function hC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/android/i.test(e)}function dC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/blackberry/i.test(e)}function fC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/webos/i.test(e)}function pC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function gC(){return function(){const e=Js();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function mC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js();return pC(e)||hC(e)||fC(e)||dC(e)||/windows phone/i.test(e)||cC(e)}function vC(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oC(Js());break;case"Worker":t="".concat(oC(Js()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(oa,"/").concat(r)}class yC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Px){r(Px)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Px){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Px||void 0===Px?void 0:Px.message})}}}class wC{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class bC{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EC(this),this.idTokenSubscription=new EC(this),this.beforeStateQueue=new yC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pk,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tC(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await sC.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Px){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Px){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Px)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _k(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Px){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xk(e)}catch(Px){if((null===Px||void 0===Px?void 0:Px.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?go(e):null;return t&&_k(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&_k(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(tC(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Nk(e,"GET","/v2/passwordPolicy",Dk(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wC(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ro("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Nk(e,"POST","/v2/accounts:revokeToken",Dk(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tC(e)||this._popupRedirectResolver;_k(t,this,"argument-error"),this.redirectPersistenceManager=await sC.create(this,[tC(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_k(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _k(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(gk.logLevel<=_o.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];gk.warn("Auth (".concat(oa,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function _C(e){return go(e)}class EC{constructor(e){this.auth=e,this.observer=null,this.addObserver=ho((e=>this.observer=e))}get next(){return _k(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let SC={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kC(e){return SC.loadJS(e)}function CC(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class IC{constructor(e){this.type="recaptcha-enterprise",this.auth=_C(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Bk(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{qk(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new jk(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Bk(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=SC.recaptchaEnterpriseScript;0!==t.length&&(t+=i),kC(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function xC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new IC(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function TC(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xC(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await xC(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function LC(e,t,n){const r=_C(e);_k(r._canInitEmulator,r,"emulator-config-failed"),_k(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=PC(t),{host:o,port:a}=function(e){const t=PC(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:MC(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:MC(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function PC(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function MC(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class AC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ek("not implemented")}_getIdTokenResponse(e){return Ek("not implemented")}_linkToIdToken(e,t){return Ek("not implemented")}_getReauthenticationResolver(e){return Ek("not implemented")}}async function DC(e,t){return Nk(e,"POST","/v1/accounts:signUp",t)}async function NC(e,t){return Rk(e,"POST","/v1/accounts:signInWithPassword",Dk(e,t))}class OC extends AC{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new OC(e,t,"password")}static _fromEmailAndCode(e,t){return new OC(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return TC(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",NC);case"emailLink":return async function(e,t){return Rk(e,"POST","/v1/accounts:signInWithEmailLink",Dk(e,t))}(e,{email:this._email,oobCode:this._password});default:vk(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return TC(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DC);case"emailLink":return async function(e,t){return Rk(e,"POST","/v1/accounts:signInWithEmailLink",Dk(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:vk(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function RC(e,t){return Rk(e,"POST","/v1/accounts:signInWithIdp",Dk(e,t))}class UC extends AC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new UC(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vk("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=hk(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new UC(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return RC(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,RC(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,RC(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=lo(t)}return e}}const FC={USER_NOT_FOUND:"user-not-found"};class VC extends AC{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new VC({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new VC({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Rk(e,"POST","/v1/accounts:signInWithPhoneNumber",Dk(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Rk(e,"POST","/v1/accounts:signInWithPhoneNumber",Dk(e,t));if(n.temporaryProof)throw zk(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Rk(e,"POST","/v1/accounts:signInWithPhoneNumber",Dk(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),FC)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new VC({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class zC{constructor(e){var t,n,r,i,s,o;const a=uo(co(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,u=null!==(n=a.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);_k(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=uo(co(e)).link,n=t?uo(co(t)).deep_link_id:null,r=uo(co(e)).deep_link_id;return(r?uo(co(r)).link:null)||r||n||t||e}(e);try{return new zC(t)}catch(n){return null}}}class BC{constructor(){this.providerId=BC.PROVIDER_ID}static credential(e,t){return OC._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=zC.parseLink(t);return _k(n,"argument-error"),OC._fromEmailAndCode(e,n.code,n.tenantId)}}BC.PROVIDER_ID="password",BC.EMAIL_PASSWORD_SIGN_IN_METHOD="password",BC.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class jC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qC extends jC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class WC extends qC{constructor(){super("facebook.com")}static credential(e){return UC._fromParams({providerId:WC.PROVIDER_ID,signInMethod:WC.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return WC.credentialFromTaggedObject(e)}static credentialFromError(e){return WC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return WC.credential(t.oauthAccessToken)}catch(n){return null}}}WC.FACEBOOK_SIGN_IN_METHOD="facebook.com",WC.PROVIDER_ID="facebook.com";class KC extends qC{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return UC._fromParams({providerId:KC.PROVIDER_ID,signInMethod:KC.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return KC.credentialFromTaggedObject(e)}static credentialFromError(e){return KC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return KC.credential(n,r)}catch(i){return null}}}KC.GOOGLE_SIGN_IN_METHOD="google.com",KC.PROVIDER_ID="google.com";class GC extends qC{constructor(){super("github.com")}static credential(e){return UC._fromParams({providerId:GC.PROVIDER_ID,signInMethod:GC.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GC.credentialFromTaggedObject(e)}static credentialFromError(e){return GC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return GC.credential(t.oauthAccessToken)}catch(n){return null}}}GC.GITHUB_SIGN_IN_METHOD="github.com",GC.PROVIDER_ID="github.com";class HC extends qC{constructor(){super("twitter.com")}static credential(e,t){return UC._fromParams({providerId:HC.PROVIDER_ID,signInMethod:HC.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return HC.credentialFromTaggedObject(e)}static credentialFromError(e){return HC.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return HC.credential(n,r)}catch(i){return null}}}async function QC(e,t){return Rk(e,"POST","/v1/accounts:signUp",Dk(e,t))}HC.TWITTER_SIGN_IN_METHOD="twitter.com",HC.PROVIDER_ID="twitter.com";class YC{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Jk._fromIdTokenResponse(e,n,r),s=XC(n);return new YC({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=XC(n);return new YC({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function XC(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ZC extends no{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ZC.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ZC(e,t,n,r)}}function $C(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ZC._fromErrorAndOperation(e,n,t,r);throw n}))}async function JC(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Hk(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return YC._forOperation(e,"link",r)}async function eI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Hk(e,$C(r,i,t,e),n);_k(s.idToken,r,"internal-error");const o=Gk(s.idToken);_k(o,r,"internal-error");const{sub:a}=o;return _k(e.uid===a,r,"user-mismatch"),YC._forOperation(e,i,s)}catch(Px){throw(null===Px||void 0===Px?void 0:Px.code)==="auth/".concat("user-not-found")&&vk(r,"user-mismatch"),Px}}async function tI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await $C(e,r,t),s=await YC._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function nI(e,t){return tI(_C(e),t)}async function rI(e){const t=_C(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const iI="__sak";class sI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(iI,"1"),this.storage.removeItem(iI),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class oI extends sI{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Js();return lC(e)||pC(e)}()&&function(){try{return!(!window||window===window.top)}catch(Px){return!1}}(),this.fallbackToPolling=mC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);gC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oI.type="LOCAL";const aI=oI;class lI extends sI{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lI.type="SESSION";const uI=lI;class cI{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new cI(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function hI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}cI.receivers=[];class dI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=hI("",20);r.port1.start();const u=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function fI(){return window}function pI(){return"undefined"!==typeof fI().WorkerGlobalScope&&"function"===typeof fI().importScripts}const gI="firebaseLocalStorageDb",mI="firebaseLocalStorage",vI="fbase_key";class yI{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function wI(e,t){return e.transaction([mI],t?"readwrite":"readonly").objectStore(mI)}function bI(){const e=indexedDB.open(gI,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(mI,{keyPath:vI})}catch(Px){n(Px)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(mI)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(gI);return new yI(e).toPromise()}(),t(await bI()))}))}))}async function _I(e,t,n){const r=wI(e,!0).put({[vI]:t,value:n});return new yI(r).toPromise()}function EI(e,t){const n=wI(e,!0).delete(t);return new yI(n).toPromise()}class SI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await bI()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Px){if(t++>3)throw Px;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=cI._getInstance(pI()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new dI(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bI();return await _I(e,iI,"1"),await EI(e,iI),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_I(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=wI(e,!1).get(t),r=await new yI(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>EI(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=wI(e,!1).getAll();return new yI(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}SI.type="LOCAL";const kI=SI;CC("rcb"),new Tk(3e4,6e4);const CI="recaptcha";async function II(e,t,n){var r;const i=await n.verify();try{let s;if(_k("string"===typeof i,e,"argument-error"),_k(n.type===CI,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){_k("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Nk(e,"POST","/v2/accounts/mfaEnrollment:start",Dk(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{_k("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;_k(n,e,"missing-multi-factor-info");const o=await function(e,t){return Nk(e,"POST","/v2/accounts/mfaSignIn:start",Dk(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Nk(e,"POST","/v1/accounts:sendVerificationCode",Dk(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class xI{constructor(e){this.providerId=xI.PROVIDER_ID,this.auth=_C(e)}verifyPhoneNumber(e,t){return II(this.auth,e,go(t))}static credential(e,t){return VC._fromVerification(e,t)}static credentialFromResult(e){const t=e;return xI.credentialFromTaggedObject(t)}static credentialFromError(e){return xI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?VC._fromTokenResponse(n,r):null}}function TI(e,t){return t?tC(t):(_k(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}xI.PROVIDER_ID="phone",xI.PHONE_SIGN_IN_METHOD="phone";class LI extends AC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return RC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return RC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return RC(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function PI(e){return tI(e.auth,new LI(e),e.bypassAuthState)}function MI(e){const{auth:t,user:n}=e;return _k(n,t,"internal-error"),eI(n,new LI(e),e.bypassAuthState)}async function AI(e){const{auth:t,user:n}=e;return _k(n,t,"internal-error"),JC(n,new LI(e),e.bypassAuthState)}class DI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Px){this.reject(Px)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Px){this.reject(Px)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return PI;case"linkViaPopup":case"linkViaRedirect":return AI;case"reauthViaPopup":case"reauthViaRedirect":return MI;default:vk(this.auth,"internal-error")}}resolve(e){Sk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Sk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const NI=new Tk(2e3,1e4);class OI extends DI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,OI.currentPopupAction&&OI.currentPopupAction.cancel(),OI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _k(e,this.auth,"internal-error"),e}async onExecution(){Sk(1===this.filter.length,"Popup operations only handle one event");const e=hI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(yk(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(yk(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,OI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(yk(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,NI.get())};e()}}OI.currentPopupAction=null;const RI="pendingRedirect",UI=new Map;class FI extends DI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=UI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=BI(t),r=zI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(Px){e=()=>Promise.reject(Px)}UI.set(this.auth._key(),e)}return this.bypassAuthState||UI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function VI(e,t){UI.set(e._key(),t)}function zI(e){return tC(e._redirectPersistence)}function BI(e){return iC(RI,e.config.apiKey,e.name)}async function jI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=_C(e),i=TI(r,t),s=new FI(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class qI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!KI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yk(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(WI(e))}saveEventToCache(e){this.cachedEventUids.add(WI(e)),this.lastProcessedEventTime=Date.now()}}function WI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function KI(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const GI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HI=/^https?/;async function QI(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Nk(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(YI(r))return}catch(n){}vk(e,"unauthorized-domain")}function YI(e){const t=kk(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!HI.test(n))return!1;if(GI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const XI=new Tk(3e4,6e4);function ZI(){const e=fI().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function $I(e){return new Promise(((t,n)=>{var r,i,s;function o(){ZI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ZI(),n(yk(e,"network-request-failed"))},timeout:XI.get()})}if(null===(i=null===(r=fI().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=fI().gapi)||void 0===s?void 0:s.load)){const t=CC("iframefcb");return fI()[t]=()=>{gapi.load?o():n(yk(e,"network-request-failed"))},kC("".concat(SC.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw JI=null,e}))}let JI=null;const ex=new Tk(5e3,15e3),tx="__/auth/iframe",nx="emulator/auth/iframe",rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ix=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sx(e){const t=e.config;_k(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Lk(t,nx):"https://".concat(e.config.authDomain,"/").concat(tx),r={apiKey:t.apiKey,appName:e.name,v:oa},i=ix.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(lo(r).slice(1))}async function ox(e){const t=await function(e){return JI=JI||$I(e),JI}(e),n=fI().gapi;return _k(n,e,"internal-error"),t.open({where:document.body,url:sx(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rx,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=yk(e,"network-request-failed"),s=fI().setTimeout((()=>{r(i)}),ex.get());function o(){fI().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const ax={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class lx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Px){}}}function ux(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ax),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Js().toLowerCase();n&&(a=uC(u)?"_blank":n),aC(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return pC(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Js())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new lx(null);const h=window.open(t||"",a,c);_k(h,e,"popup-blocked");try{h.focus()}catch(Px){}return new lx(h)}const cx="__/auth/handler",hx="emulator/auth/handler",dx=encodeURIComponent("fac");async function fx(e,t,n,r,i,s){_k(e.config.authDomain,e,"auth-domain-config-required"),_k(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:oa,eventId:i};if(t instanceof jC){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof qC){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];const l=await e._getAppCheckToken(),u=l?"#".concat(dx,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(cx);return Lk(t,hx)}(e),"?").concat(lo(a).slice(1)).concat(u)}const px="webStorageSupport";const gx=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uI,this._completeRedirectFn=jI,this._overrideRedirectResult=VI}async _openPopup(e,t,n,r){var i;Sk(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ux(e,await fx(e,t,n,kk(),r),hI())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){fI().location.href=e}(await fx(e,t,n,kk(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Sk(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ox(e),n=new qI(e);return t.register("authEvent",(t=>{_k(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(px,{type:px},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[px];void 0!==i&&t(!!i),vk(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mC()||lC()||pC()}};var mx="@firebase/auth",vx="1.6.1";class yx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_k(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const wx=Zs("authIdTokenMaxAge")||300;let bx=null;function _x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la();const t=ta(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=ta(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(oo(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;vk(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:gx,persistence:[kI,aI,uI]}),r=Zs("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>wx)return;const r=null===t||void 0===t?void 0:t.token;bx!==r&&(bx=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){go(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){go(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Ys("auth");return s&&LC(n,"http://".concat(s)),n}var Ex;!function(e){SC=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=yk("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ex="Browser",ea(new mo("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;_k(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ex,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vC(Ex)},u=new bC(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tC);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ea(new mo("auth-internal",(e=>(e=>new yx(e))(_C(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ha(mx,vx,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ex)),ha(mx,vx,"esm2017");const Sx=e=>{let{title:t,handleClick:n}=e;const[i,s]=(0,r.useState)(""),[o,a]=(0,r.useState)("");return(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("input",{type:"email",value:i,onChange:e=>s(e.target.value),placeholder:"email"}),(0,Wn.jsx)("input",{type:"password",value:o,onChange:e=>a(e.target.value),placeholder:"password"}),(0,Wn.jsx)("button",{onClick:()=>n(i,o),children:t})]})},kx=()=>{const e=Ze(),t=ee();return(0,Wn.jsx)(Sx,{title:"Login",handleClick:(n,r)=>{(function(e,t,n){return nI(go(e),BC.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rI(e),t}))})(_x(),n,r).then((n=>{let{user:r}=n;e(Bn({email:r.email,id:r.uid,token:r.refreshToken})),t("/")})).catch((()=>alert("invalid user!")))}})},Cx=()=>(0,Wn.jsxs)(Wn.Fragment,{children:[(0,Wn.jsx)("h1",{children:"Login"}),(0,Wn.jsx)(kx,{}),(0,Wn.jsx)(Ce,{to:"/register",children:"register"})]}),Ix=()=>{const e=Ze(),t=ee();return(0,Wn.jsx)(Sx,{title:"Register",handleClick:(n,r)=>{(async function(e,t,n){const r=_C(e),i=TC(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QC),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&rI(e),t})),o=await YC._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o})(_x(),n,r).then((n=>{let{user:r}=n;console.log(r),e(Bn({email:r.email,id:r.uid,token:r.refreshToken})),t("/")})).catch(console.error)}})},xx=()=>(0,Wn.jsxs)("div",{children:[(0,Wn.jsx)("h2",{children:"Register"}),(0,Wn.jsx)(Ix,{}),(0,Wn.jsx)(Ce,{to:"/login",children:"Login"})]});const Tx=function(){return(0,Wn.jsxs)(me,{children:[(0,Wn.jsx)(pe,{path:"/",Component:ck}),(0,Wn.jsx)(pe,{path:"/login",Component:Cx}),(0,Wn.jsx)(pe,{path:"/register",Component:xx})]})},Lx=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new pn;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(cn):s.push(hn(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"===typeof n)a=n;else{if(!sn(n))throw new Error(Vn(1));a=an(n)}l="function"===typeof r?r(t):t();let u=ln;i&&(u=dn({trace:!1,..."object"===typeof i&&i}));const c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(en(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=ln(...a)(i.dispatch),{...i,dispatch:s}}}(...l),h=bn(c);let d="function"===typeof o?o(h):h();return on(a,s,u(...d))}({reducer:{user:qn}});s.createRoot(document.getElementById("root")).render((0,Wn.jsx)(r.StrictMode,{children:(0,Wn.jsx)(Ee,{children:(0,Wn.jsx)(Ke,{store:Lx,children:(0,Wn.jsx)(Tx,{})})})}))})()})();
//# sourceMappingURL=main.c251064d.js.map